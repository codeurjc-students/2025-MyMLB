<div class="w-full max-w-4xl team-section-container space-y-10 animate-fade-in">
    <h2 class="text-xl text-center app-page-titles">Edit {{ team.teamStats.name }}</h2>

    <!-- Logo + Basic Info -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8 items-center">
        <!-- Logo -->
        <div class="flex justify-center md:justify-start">
			<div
				class="p-4 rounded-xl shadow-md border border-gray-300 dark:border-gray-600"
				[ngClass]="getBackgroundColor(team.teamStats.abbreviation)"
			>
				<img
					src="assets/team-logos-new/{{ team.teamStats.league }}/{{ team.teamStats.division }}/{{ team.teamStats.abbreviation }}.png"
					alt="{{ team.teamStats.name }} logo"
					class="w-24 h-24 object-contain"
				/>
			</div>
		</div>

        <!-- Info -->
        <div class="md:col-span-3 grid grid-cols-2 sm:grid-cols-3 gap-6 text-center">
			<!-- Abbreviation -->
			<div class="min-w-[6rem] p-4 bg-gray-50 dark:bg-gray-700 rounded-xl shadow flex flex-col items-center justify-center gap-1">
				<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
					<path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" />
					<path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6Z" />
				</svg>
				<p class="text-lg font-bold text-gray-800 dark:text-white">{{ team.teamStats.abbreviation }}</p>
				<p class="text-sm text-gray-600 dark:text-gray-300">Abbreviation</p>
			</div>

			<!-- League -->
			<div class="min-w-[6rem] p-4 bg-gray-50 dark:bg-gray-700 rounded-xl shadow flex flex-col items-center justify-center gap-1">
				<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
					<path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0" />
				</svg>
				<p class="text-lg font-bold text-gray-800 dark:text-white">{{ team.teamStats.league }}</p>
				<p class="text-sm text-gray-600 dark:text-gray-300">League</p>
			</div>

			<!-- Division -->
			<div class="min-w-[6rem] p-4 bg-gray-50 dark:bg-gray-700 rounded-xl shadow flex flex-col items-center justify-center gap-1">
				<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
					<path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0" />
				</svg>
				<p class="text-lg font-bold text-gray-800 dark:text-white">{{ team.teamStats.division }}</p>
				<p class="text-sm text-gray-600 dark:text-gray-300">Division</p>
			</div>
		</div>
    </div>

    <!-- Stats -->
    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6 text-center">
        <div class="min-w-[6rem] p-4 bg-gray-50 dark:bg-gray-700 rounded-xl shadow">
            <p class="text-lg font-bold text-black dark:text-white">{{ team.teamStats.totalGames }}</p>
            <p class="text-sm text-gray-600 dark:text-gray-300">Games</p>
        </div>
        <div class="min-w-[6rem] p-4 bg-gray-50 dark:bg-gray-700 rounded-xl shadow">
            <p class="text-lg font-bold text-green-600">{{ team.teamStats.wins }}</p>
            <p class="text-sm text-gray-600 dark:text-gray-300">Wins</p>
        </div>
        <div class="min-w-[6rem] p-4 bg-gray-50 dark:bg-gray-700 rounded-xl shadow">
            <p class="text-lg font-bold text-red-600">{{ team.teamStats.losses }}</p>
            <p class="text-sm text-gray-600 dark:text-gray-300">Losses</p>
        </div>
        <div class="min-w-[6rem] p-4 bg-gray-50 dark:bg-gray-700 rounded-xl shadow">
            <p class="text-lg font-bold text-black dark:text-white">{{ team.teamStats.pct | number:'1.3-3' }}</p>
            <p class="text-sm text-gray-600 dark:text-gray-300">Win %</p>
        </div>
        <div class="min-w-[6rem] p-4 bg-gray-50 dark:bg-gray-700 rounded-xl shadow">
            <p class="text-lg font-bold text-black dark:text-white">{{ team.teamStats.lastTen }}</p>
            <p class="text-sm text-gray-600 dark:text-gray-300">Last Ten</p>
        </div>
    </div>

    <!-- Editable Fields -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- City -->
        <div class="flex flex-col">
            <label class="text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">City</label>
            <input
                type="text"
                [placeholder]="team.city"
                [(ngModel)]="cityInput"
                class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 shadow-inner focus:outline-none focus:ring-2 focus:ring-blue-700"
            />
        </div>

        <!-- Stadium -->
		<div class="flex flex-col">
			<label class="text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">Stadium</label>
			<button
				type="button"
				(click)="showStadiumsModal()"
				class="px-5 py-2.5 rounded-xl cursor-pointer border border-gray-300 dark:border-gray-600 bg-gradient-to-br from-sky-600 via-sky-700 to-sky-800 text-white font-medium shadow-md hover:brightness-110 hover:scale-[1.02] transition-all duration-300 ease-out"
			>
				{{ stadiumInput }}
			</button>
		</div>

        <!-- General Info -->
        <div class="md:col-span-2 flex flex-col">
            <label class="text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">General Info</label>
            <textarea
                [(ngModel)]="infoInput"
                [placeholder]="team.generalInfo"
                rows="4"
                class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 shadow-inner focus:outline-none focus:ring-2 focus:ring-blue-700"
            ></textarea>
        </div>

        <!-- Championships -->
        <div class="md:col-span-2 flex flex-col">
            <label class="text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">Championships</label>
            <div class="flex flex-col gap-4 md:flex-row md:items-center">
                <ul class="flex gap-2 flex-wrap">
                    @for (year of team.championships; track year) {
                        <li class="px-3 py-1 bg-indigo-100 dark:bg-indigo-600 text-indigo-800 dark:text-white rounded-full text-sm shadow">
                            {{ year }}
                        </li>
                    }
                </ul>
                <div class="flex gap-2">
                    <input
                        type="number"
                        placeholder="Add year..."
                        [(ngModel)]="newChampionshipInput"
                        class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 shadow-inner focus:outline-none focus:ring-2 focus:ring-blue-700"
                    />
                </div>
            </div>
        </div>
    </div>

    <!-- Actions -->
	<app-action-buttons (goBack)="goToEditMenu()" (confirm)="confirm()"></app-action-buttons>

	@if (selectStadiumButtonClicked) {
		<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"
			[ngClass]="isClose ? 'animate-fade-out-down' : 'animate-fade-in-up'">
			<div class="bg-white dark:bg-gray-900 rounded-xl shadow-2xl w-11/12 max-w-2xl p-6 overflow-y-auto max-h-[80vh]">
				<h2 class="text-2xl font-bold mb-6 text-center text-blue-800 dark:text-blue-300">
					Select a Stadium
				</h2>

				@if (availableStadiums.length === 0) {
					<p class="text-white font-medium text-base truncate">No available stadiums</p>
				}
				@else {
					<ul class="space-y-2">
						@for (stadium of availableStadiums; track stadium.name) {
							<li>
								<button
									(click)="selectStadium(stadium)"
									class="w-full flex items-center justify-start gap-4 px-4 py-3 rounded-lg transition-all duration-300 ease-out cursor-pointer bg-white dark:bg-gray-800 hover:bg-sky-100 dark:hover:bg-sky-900 hover:scale-[1.02] hover:shadow-lg"
								>
								<svg
									xmlns="http://www.w3.org/2000/svg"
									viewBox="0 0 512 512"
									class="w-9 h-9 fill-current text-black dark:text-white">
									<g>
										<path d="M450.338,288.096L331.012,393.623c-20.722,18.317-47.358,28.394-75.014,28.394   c-27.656,0-54.29-10.077-75.014-28.394L61.972,288.37c-22.726-21.301-44.765-42.132-59.222-64.937l4.105,52.848   c1.08,13.798,7.209,26.723,17.226,36.298l147.887,156.668c40.09,39.166,126.771,39.166,166.861,0l147.906-156.668   c10.018-9.575,16.146-22.5,17.206-36.298l3.948-50.638C493.474,247.524,472.201,267.599,450.338,288.096z"/>
										<path d="M71.242,277.881l119.033,105.244c37.536,33.186,93.929,33.186,131.465,0l119.013-105.244   c62.247-58.347,97.249-97.239,47.888-168.088C432.7,29.524,318.225,13.378,255.998,13.378c-62.227,0-176.721,16.145-232.643,96.414   C-26.007,180.642,9.015,219.534,71.242,277.881z M91.867,217.314c2.71-8.81,6.364-17.256,10.862-25.28   c4.498-7.994,9.861-15.576,15.93-22.638c6.088-7.051,12.905-13.612,20.33-19.593c7.68-6.148,16.028-11.687,24.945-16.548   c8.898-4.842,18.366-8.987,28.285-12.355c9.9-3.369,20.311-5.962,31.036-7.71c10.744-1.729,21.841-2.613,33.215-2.544   c11.373,0.079,22.471,1.1,33.196,2.967c10.744,1.866,21.115,4.606,30.995,8.093c9.919,3.496,19.347,7.768,28.226,12.718   c8.878,4.969,17.186,10.617,24.808,16.864c7.406,6.069,14.182,12.718,20.193,19.838c6.03,7.15,11.314,14.791,15.733,22.844   c4.459,8.072,8.033,16.578,10.666,25.416c2.632,8.869,4.301,18.071,4.89,27.559L281.552,370.358   c-14.987,12.875-37.202,12.757-52.052-0.286L86.799,244.814C87.448,235.336,89.176,226.143,91.867,217.314z"/>
										<polygon points="275.934,159.821 256.41,143.508 236.768,159.576 256.273,176.055"/>
										<polygon points="143.86,235.749 123.472,252.435 142.957,269.484 163.365,252.68"/>
										<polygon points="368.921,270.908 388.544,254.114 368.274,237.163 348.729,253.859"/>
										<polygon points="241.266,355.547 255.566,368.099 270.062,355.734 270.062,339.47 241.364,339.303"/>
										<path d="M244.861,322.165c3.516-0.599,7.149-0.904,10.902-0.865c3.712,0.02,7.346,0.364,10.862,1.012   c3.535,0.639,6.933,1.572,10.174,2.77c3.222,1.208,6.305,2.662,9.173,4.351c2.867,1.69,5.578,3.604,8.033,5.726l57.336-49.165   c-2.455-2.072-4.695-4.35-6.64-6.796c-1.944-2.426-3.634-5.028-5.008-7.759c-1.395-2.73-2.456-5.588-3.182-8.544   c-0.766-2.946-1.179-6.001-1.199-9.124c-0.039-3.114,0.276-6.148,0.962-9.075c0.669-2.916,1.67-5.715,2.967-8.396   c1.296-2.671,2.887-5.196,4.753-7.563c1.847-2.376,3.988-4.576,6.364-6.58l-56.982-47.701c-2.358,1.974-4.93,3.751-7.739,5.313   c-2.79,1.562-5.775,2.888-8.917,3.988c-3.143,1.09-6.444,1.925-9.861,2.484c-3.457,0.57-6.974,0.836-10.607,0.816   c-3.634-0.02-7.17-0.344-10.587-0.952c-3.418-0.599-6.737-1.483-9.861-2.613c-3.123-1.129-6.069-2.494-8.858-4.095   c-2.751-1.591-5.323-3.398-7.661-5.412l-57.415,46.974c2.357,2.042,4.479,4.272,6.345,6.659c1.846,2.386,3.438,4.94,4.715,7.631   c1.296,2.691,2.278,5.509,2.946,8.436c0.628,2.937,0.962,5.971,0.904,9.074c-0.059,3.123-0.492,6.168-1.277,9.124   c-0.766,2.937-1.865,5.785-3.28,8.496c-1.414,2.71-3.123,5.293-5.107,7.71c-1.983,2.416-4.203,4.654-6.698,6.698l57.042,49.891   c2.475-2.092,5.166-3.977,8.033-5.628c2.888-1.66,5.972-3.063,9.212-4.233C237.927,323.668,241.325,322.764,244.861,322.165z    M236.749,247.908l36.515,0.235v8.731l-36.594-0.226L236.749,247.908z"/>
									</g>
								</svg>
									<span class="text-white font-medium text-base truncate">{{ stadium.name }}</span>
								</button>
							</li>
						}
					</ul>

					@if (hasMore) {
						<div class="mt-6 text-center">
							<button
								(click)="loadNextPage()"
								class="px-4 py-2 text-sm font-medium text-white bg-gray-200 rounded-lg bg-gradient-to-br from-sky-600 via-sky-700 to-sky-800 hover:brightness-125 hover:shadow-lg transition-all duration-300 ease-out cursor-pointer dark:from-indigo-900 dark:via-blue-900 dark:to-sky-800"
							>
								Load more teams
							</button>
						</div>
					}
					@else {
						<div class="mt-6 text-center">
							<button
								(click)="closeStadiumModal()"
								class="px-4 py-2 text-sm font-medium text-white bg-gray-200 rounded-lg bg-gradient-to-br from-sky-600 via-sky-700 to-sky-800 hover:brightness-125 hover:shadow-lg transition-all duration-300 ease-out cursor-pointer dark:from-indigo-900 dark:via-blue-900 dark:to-sky-800"
							>
								Close
							</button>
						</div>
					}
				}
			</div>
		</div>
	}

    <!-- Modals -->
    @if (finish) {
        <app-success-modal [message]="'Changes applied successfully'" (continue)="goToEditMenu()"></app-success-modal>
    }

	@if (success) {
		<app-success-modal [message]="successMessage" (continue)="success = false"></app-success-modal>
	}

    @if (error) {
        <app-error-modal [title]="errorMessage" (cancel)="error = false"></app-error-modal>
    }
</div>