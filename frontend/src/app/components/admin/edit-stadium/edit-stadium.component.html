<div
	class="w-full max-w-3xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 space-y-10 animate-fade-in"
>
	<!-- Title -->
	<h2 class="text-xl text-center app-page-titles">Edit {{ stadium.name }}</h2>

	<!-- Stadium Info -->
	<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
		<div class="flex flex-col">
			<label class="text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">Name</label>
			<input
				type="text"
				[value]="stadium.name"
				disabled
				class="px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 cursor-not-allowed shadow-inner"
			/>
		</div>

		<div class="flex flex-col">
			<label class="text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"
				>Opening Date</label
			>
			<input
				type="text"
				[value]="stadium.openingDate"
				disabled
				class="px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 cursor-not-allowed shadow-inner"
			/>
		</div>

		<div class="flex flex-col">
			<label class="text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">Team</label>
			<input
				type="text"
				[value]="stadium.teamName"
				disabled
				class="px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 cursor-not-allowed shadow-inner"
			/>
		</div>
	</div>

	<!-- Pictures -->
	<div class="space-y-4">
		<label class="block text-sm font-semibold text-gray-700 dark:text-gray-300">Pictures</label>

		<div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
			@for (pic of pictures; track pic.url) {
				<div
					class="relative group rounded-xl overflow-hidden shadow-md hover:shadow-lg transition"
				>
					<img
						[src]="pic.url"
						alt="Stadium picture"
						class="w-full h-28 object-cover rounded-xl border border-gray-300 dark:border-gray-600"
					/>

					<button
						(click)="handleRemovePicture(pic)"
						class="absolute top-2 right-2 cursor-pointer bg-red-600 text-white text-xs px-2 py-1 rounded-md shadow-md"
					>
						âœ• Remove
					</button>
				</div>
			}
		</div>

		<!-- Add new picture -->
		@if (verifyPictures()) {
			<div class="flex flex-col sm:flex-row gap-4 mt-4 items-center">
				<label class="relative inline-block cursor-pointer group">
					<input
						type="file"
						accept="image/webp"
						(change)="handleFileUpload($event)"
						class="absolute inset-0 opacity-0 cursor-pointer"
					/>
					<div class="flex items-center gap-2 px-5 py-2 app-button">
						<svg
							class="w-4 h-4"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							viewBox="0 0 24 24"
						>
							<path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
						</svg>
						Upload Picture
					</div>
				</label>
				<span class="text-sm font-medium text-gray-700 dark:text-gray-300">
					Only <strong>.webp</strong> images are supported for stadium pictures
				</span>
			</div>
		}
	</div>

	<!-- Confirm Button -->
	<div class="flex justify-end gap-4 pt-6">
		<button (click)="goToEditMenu()" class="px-6 py-3 app-success-button hover:scale-105">
			Go Back
		</button>

		<button (click)="confirm()" class="px-6 py-3 app-success-button hover:scale-105">
			Confirm Changes
		</button>
	</div>

	@if (success) {
		<app-success-modal [message]="successMessage" (continue)="success = false"></app-success-modal>
	}

	@if (loading) {
		<app-loading-modal [message]="'Uploading the image...'"></app-loading-modal>
	}

	@if (openConfirmationModal) {
		<app-remove-confirmation-modal
			[title]="'Are you sure you want to remove this picture?'"
			[contentMessage]="`This action cannot be undone. The picture will be removed from the stadium's picture list.`"
			[buttonContent]="'Yes, Remove'"
			[svg]="removeModalIcon"
			(confirm)="removePicture()"
			(cancel)="cancelConfirmationModal()"
		/>
	}

	@if (error) {
		<app-error-modal [title]="errorMessage" (cancel)="error = false"></app-error-modal>
	}

	@if (finish) {
		<app-success-modal
			[message]="'Changes applied successfully'"
			(continue)="goToEditMenu()"
		></app-success-modal>
	}
</div>