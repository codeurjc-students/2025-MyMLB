<div
    class="app-background min-h-screen text-gray-900 dark:text-white px-6 py-16 space-y-12 flex flex-col items-center"
>
    <div class="w-full max-w-3xl mx-auto team-section-container space-y-10 animate-fade-in">
        <!-- Title -->
		 <div class="flex items-center justify-center gap-10">
			<h2 class="text-xl text-center app-page-titles">Create Player</h2>
			<svg [matTooltip]="'Creating a player means that the player has been promoted to the MLB team, and that he is playing his first season in the league'" matTooltipPosition="above" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
				class="w-15 h-15 opacity-70 hover:opacity-100 transition-opacity cursor-help">
				<path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
			</svg>
		</div>

        <!-- Form fields -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Name -->
            <div class="flex flex-col">
                <label class="text-sm font-semibold text-gray-600 dark:text-gray-300 mb-1">Name</label>
                <input
                    type="text"
                    [(ngModel)]="nameInput"
                    placeholder="e.g., Aaron Judge"
                    class="px-4 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-600"
                />
            </div>

            <!-- Player number -->
            <div class="flex flex-col">
                <label class="text-sm font-semibold text-gray-600 dark:text-gray-300 mb-1">Player #</label>
                <input
                    type="number"
                    [(ngModel)]="playerNumberInput"
                    placeholder="99"
                    min="0"
                    class="px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-600 text-center"
                />
            </div>

            <!-- Team name -->
            <div class="flex flex-col md:col-span-2">
                <label class="text-sm font-semibold text-gray-600 dark:text-gray-300 mb-1">Team</label>
                <div class="flex items-center gap-3">
                    <input
                        type="text"
                        [(ngModel)]="teamNameInput"
                        placeholder="e.g., New York Yankees"
                        class="flex-1 px-4 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-600"
                    />
                    <button type="button" (click)="showTeamsModal()" class="px-4 py-2 app-button group tracking-widest">
                        <span class="app-button-bright"></span>
						<span class="app-button-texts">Select Team</span>
                    </button>
                </div>
            </div>

            <!-- Position -->
            <div class="flex flex-col">
                <label class="text-sm font-semibold text-gray-600 dark:text-gray-300 mb-1">Position</label>
                <div class="relative w-full">
					<select
						[(ngModel)]="positionInput"
						(focus)="togglePositionInput(true)"
						(blur)="togglePositionInput(false)"
						(change)="togglePositionInput(false)"
						placholder="Select the position..."
						class="appearance-none w-full pr-10 px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-600"
					>
						@for (pos of availablePositions; track pos) {
							<option [value]="pos">{{ pos }}</option>
						}
					</select>
					<svg
						class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500 pointer-events-none
						transition-transform duration-300 ease-in-out"
						[ngClass]="{ 'rotate-180': isPositionInputOpen }"
						xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
					</svg>
				</div>
            </div>
        </div>

        <!-- Actions -->
       	<app-action-buttons (goBack)="returnToHome()" (confirm)="createPlayer()"></app-action-buttons>

        <!-- Modals -->
        <app-select-element-modal
            [teamElements]="true"
            [openModal]="selectTeamButtonClicked"
            [isClose]="isClose"
            [hasMore]="selector.hasMore"
            [elements]="(selector.items$ | async) ?? []"
            (select)="selectTeam($event)"
            (loadNextPageFunction)="loadNextPage()"
            (closeModal)="closeTeamModal()"
			[appEscapeClose]="closeTeamModal">
		</app-select-element-modal>

        @if (success) {
            <app-success-modal [message]="successMessage" (continue)="returnToHome()"></app-success-modal>
        }

		@if (selectedTeam) {
			<app-success-modal [message]="successMessage" (continue)="closeSuccessModal()"></app-success-modal>
		}

        @if (error) {
            <app-error-modal [title]="errorMessage" (cancel)="error = false"></app-error-modal>
        }
    </div>
</div>