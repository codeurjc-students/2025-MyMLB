<header>
	<nav class="shadow-md px-4 py-2 relative" [ngClass]="navBarStyleClass">
		<div class="flex items-center justify-between mx-auto max-w-[98%] lg:max-w-[95%]">

		<!-- Logo -->
		<div class="z-20 flex-shrink-0">
			<a [routerLink]="'/'" class="flex items-center hover:opacity-90 transition duration-300">
			<img src="assets/logo.png" class="h-8 sm:h-10 mr-3 rounded-md bg-white p-0.5 shadow-md" alt="MLB Portal Logo" />
			<span class="text-xl sm:text-2xl font-bold text-white whitespace-nowrap">MLB Portal</span>
			</a>
		</div>

		<!-- Navigation Items -->
		<div class="hidden lg:flex absolute inset-0 items-center justify-center pointer-events-none">
			<ul class="flex flex-row items-center gap-x-4 xl:gap-x-6 font-medium pointer-events-auto">
			<li>
				<a [routerLink]="'/'" class="nav-elems px-4 py-2 rounded-md" [ngClass]="[applyStyle('/'), itemsHover()]">
				Home
				</a>
			</li>

			@if (!roles.includes("USER") && !roles.includes("ADMIN")) {
				<li><a [routerLink]="'/auth'" [queryParams]="{ form: 'login' }" class="nav-elems" [ngClass]="itemsHover()">Login</a></li>
				<li><a [routerLink]="'/auth'" [queryParams]="{ form: 'register' }" class="nav-elems" [ngClass]="itemsHover()">Sign Up</a></li>
			}

			@if (roles.includes("USER")) {
				<li><a class="nav-elems cursor-pointer" [ngClass]="[applyStyle('/my-tickets'), itemsHover()]" (click)="redirect('tickets')">My Tickets</a></li>
				<li><a class="nav-elems cursor-pointer" [ngClass]="[applyStyle('/favorite-teams'), itemsHover()]" (click)="redirect('fav-teams')">Fav Teams</a></li>
			}

			@if (!roles.includes("ADMIN")) {
				<li class="relative group">
				<a class="nav-elems cursor-pointer" [ngClass]="[applyStyle('/team'), itemsHover()]">Teams</a>
				<app-dropdown-menu></app-dropdown-menu>
				</li>
				<li><a class="nav-elems cursor-pointer" [ngClass]="[applyStyle('/standings'), itemsHover()]" (click)="redirect('standings')">Standings</a></li>
			}
			@else if (roles.includes("ADMIN")) {
				<li><a class="nav-elems cursor-pointer" [ngClass]="[applyStyle('/edit-menu'), itemsHover()]" (click)="redirect('edit-menu')">Edit Menu</a></li>
				<li><a class="nav-elems cursor-pointer" [ngClass]="[applyStyle('/create-player'), itemsHover()]" (click)="redirect('create-player')">Create Player</a></li>
				<li><a class="nav-elems cursor-pointer" [ngClass]="[applyStyle('/create-stadium'), itemsHover()]" (click)="redirect('create-stadium')">Create Stadium</a></li>
				<li><a class="nav-elems cursor-pointer" [ngClass]="[applyStyle('/statistics'), itemsHover()]" (click)="redirect('coming-soon')">Statistics</a></li>
			}
			</ul>
		</div>

		<div class="z-20 flex items-center gap-x-3 sm:gap-x-5">

			<div class="flex items-center transition-all duration-300"
				[ngClass]="!roles.includes('ADMIN') ? 'mr-8 sm:mr-12 lg:mr-16' : 'mr-2 sm:mr-4'">
				<label class="relative inline-flex items-center cursor-pointer">
					<input type="checkbox" [checked]="isDarkMode" (change)="toggleDarkModeButton()" class="sr-only peer" />

					<div [ngClass]="toggleButtonColor()"
						class="w-11 h-6 bg-gray-400/50 rounded-full peer peer-focus:ring-2 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full">
					</div>

					<span class="ml-2 text-sm font-medium text-white hidden xl:inline">Dark Mode</span>
				</label>
			</div>

			@if (roles.includes('ADMIN')) {
			<div class="relative">
				<button (click)="redirect('inbox')" class="relative p-1.5 cursor-pointer text-gray-200 hover:bg-white/10 rounded-full transition flex items-center justify-center">
				<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-7 h-7">
					<path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
				</svg>

				@if (currentOpenTickets > 0) {
					<span class="absolute top-0 right-0 bg-red-600 text-white text-[10px] font-bold rounded-full h-5 w-5 flex items-center justify-center border-2 border-slate-900 shadow-sm">
					{{ currentOpenTickets }}
					</span>
				}
				</button>
			</div>
			}

			<!-- Profile -->
			<button (click)="redirect('profile')" class="flex-shrink-0">
				<img [src]="getProfilePicture()" class="h-10 w-10 sm:h-12 sm:w-12 rounded-full border-2 border-transparent cursor-pointer hover:border-blue-500 transition object-cover shadow-sm" alt="Avatar Profile" />
			</button>

			<!-- For Mobile  -->
			<button (click)="toggleMenu()" class="lg:hidden p-1 text-white hover:bg-white/10 rounded-md transition ml-1">
				<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					@if (!isMenuOpen) {
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
					}
					@else {
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
					}
				</svg>
			</button>
		</div>
		</div>

		<!-- Mobile Menu -->
		@if (isMenuOpen) {
            <div class="lg:hidden mt-2 pb-4 border-t border-white/10 animate-fadeIn">
                <ul class="flex flex-col space-y-2 mt-4 px-2">
                    <li>
                        <a [routerLink]="'/'" (click)="isMenuOpen = false" class="block px-4 py-2 text-white hover:bg-white/10 rounded-md">Home</a>
                    </li>

                    @if (!roles.includes("USER") && !roles.includes("ADMIN")) {
                        <li><a [routerLink]="'/auth'" [queryParams]="{ form: 'login' }" (click)="isMenuOpen = false" class="block px-4 py-2 text-white hover:bg-white/10 rounded-md">Login</a></li>
                        <li><a [routerLink]="'/auth'" [queryParams]="{ form: 'register' }" (click)="isMenuOpen = false" class="block px-4 py-2 text-white hover:bg-white/10 rounded-md">Sign Up</a></li>
                    }

                    @if (roles.includes("USER")) {
                        <li><a (click)="isMenuOpen = false; redirect('tickets')" class="block px-4 py-2 text-white hover:bg-white/10 rounded-md cursor-pointer">My Tickets</a></li>
                        <li><a (click)="isMenuOpen = false; redirect('fav-teams')" class="block px-4 py-2 text-white hover:bg-white/10 rounded-md cursor-pointer">Fav Teams</a></li>
                    }

                    @if (!roles.includes("ADMIN")) {
                        <li><a (click)="isMenuOpen = false; redirect('standings')" class="block px-4 py-2 text-white hover:bg-white/10 rounded-md cursor-pointer">Standings</a></li>
                    }
                    @else if (roles.includes("ADMIN")) {
                        <div class="text-[10px] text-gray-400 uppercase tracking-widest px-4 mt-2">Admin Tools</div>
                        <li><a (click)="isMenuOpen = false; redirect('edit-menu')" class="block px-4 py-2 text-white hover:bg-white/10 rounded-md cursor-pointer">Edit Menu</a></li>
                        <li><a (click)="isMenuOpen = false; redirect('create-player')" class="block px-4 py-2 text-white hover:bg-white/10 rounded-md cursor-pointer">Create Player</a></li>
                        <li><a (click)="isMenuOpen = false; redirect('create-stadium')" class="block px-4 py-2 text-white hover:bg-white/10 rounded-md cursor-pointer">Create Stadium</a></li>
                        <li><a (click)="isMenuOpen = false; redirect('coming-soon')" class="block px-4 py-2 text-white hover:bg-white/10 rounded-md cursor-pointer">Statistics</a></li>
                    }
                </ul>
            </div>
        }
	</nav>
</header>