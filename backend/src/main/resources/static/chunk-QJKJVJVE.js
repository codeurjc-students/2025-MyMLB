import{a as G,b as Q}from"./chunk-AJHDRXOI.js";import{a as Y}from"./chunk-H3ZNWRGA.js";import{b as V}from"./chunk-NPRANQSH.js";import{a as J,b as K}from"./chunk-OEP7YT4B.js";import{a as R,c as W,e as A,g as H,j as q,k as D,l as L,n as O,q as j}from"./chunk-EHWH32QV.js";import{a as z}from"./chunk-NSO5BDPE.js";import{$ as o,Aa as k,Fa as I,Ga as N,H as S,I as s,K as d,L as v,Ra as B,U as b,Ua as E,W as h,X as T,Y as M,Z as x,_ as u,aa as n,cb as F,fa as P,ga as c,ia as m,pa as p,qa as w,ta as y,ua as g,va as _,w as C,x as f}from"./chunk-D66FJKGB.js";var X=()=>[];function Z(l,a){if(l&1&&(o(0,"option",13),p(1),n()),l&2){let t=a.$implicit;u("value",t),s(),w(t)}}function $(l,a){if(l&1){let t=P();o(0,"app-success-modal",18),c("continue",function(){C(t);let r=m();return f(r.returnToHome())}),n()}if(l&2){let t=m();u("message",t.successMessage)}}function ee(l,a){if(l&1){let t=P();o(0,"app-success-modal",18),c("continue",function(){C(t);let r=m();return f(r.closeSuccessModal())}),n()}if(l&2){let t=m();u("message",t.successMessage)}}function te(l,a){if(l&1){let t=P();o(0,"app-error-modal",19),c("cancel",function(){C(t);let r=m();return f(r.error=!1)}),n()}if(l&2){let t=m();u("title",t.errorMessage)}}var U=class l{constructor(a,t,e,r){this.playerService=a;this.teamService=t;this.selector=e;this.router=r}nameInput="";playerNumberInput=void 0;teamNameInput="";positionInput="";success=!1;error=!1;selectTeamButtonClicked=!1;isClose=!1;selectedTeam=!1;availableTeams=[];errorMessage="";successMessage="";pageSize=10;availablePositions=["C","1B","2B","3B","SS","LF","CF","RF","DH","SP","CP","RP"];pitcherPositions=["SP","RP","CP"];positionPlayerPositions=["C","1B","2B","3B","SS","LF","CF","RF","DH"];buildRequest(){return{name:this.nameInput,playerNumber:this.playerNumberInput,teamName:this.teamNameInput,position:this.positionInput}}ngOnInit(){}isPitcher(){return this.pitcherPositions.includes(this.positionInput)}isPositionPlayer(){return this.positionPlayerPositions.includes(this.positionInput)}createPlayer(){let a=this.buildRequest();this.isPitcher()?this.createPlayerByType(()=>this.playerService.createPitcher(a)):this.isPositionPlayer()?this.createPlayerByType(()=>this.playerService.createPositionPlayer(a)):(this.error=!0,this.errorMessage="All the fields are required")}createPlayerByType(a){a().subscribe({next:t=>{this.success=!0,this.successMessage=`${t.name}  successfully created`},error:t=>{this.error=!0,this.errorMessage=t?.error?.message??"All the fields are required"}})}showTeamsModal(){this.selectTeamButtonClicked=!0,this.selector.reset(),this.selector.loadPage(0,this.pageSize,this.teamService.getAvailableTeams.bind(this.teamService))}closeTeamModal(){this.isClose=!0,setTimeout(()=>{this.selectTeamButtonClicked=!1,this.isClose=!1},300)}handleEscape(a){a.key==="Escape"&&this.closeTeamModal()}closeSuccessModal(){this.selectedTeam=!1,this.selectTeamButtonClicked=!1}selectTeam(a){let t=a;this.selectedTeam=!0,this.successMessage="Team Selected",this.teamNameInput=this.selector.select(t,e=>e.name)}loadNextPage(){this.selector.loadNextPage(this.pageSize,this.teamService.getAvailableTeams.bind(this.teamService))}returnToHome(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||l)(d(Q),d(V),d(G),d(F))};static \u0275cmp=v({type:l,selectors:[["app-create-player"]],hostBindings:function(t,e){t&1&&c("keydown",function(i){return e.handleEscape(i)},S)},decls:32,vars:15,consts:[[1,"app-background","min-h-screen","text-gray-900","dark:text-white","px-6","py-16","space-y-12","flex","flex-col","items-center"],[1,"w-full","max-w-3xl","mx-auto","team-section-container","space-y-10","animate-fade-in"],[1,"text-xl","text-center","app-page-titles"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"flex","flex-col"],[1,"text-sm","font-semibold","text-gray-600","dark:text-gray-300","mb-1"],["type","text","placeholder","e.g., Aaron Judge",1,"px-4","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-gray-200","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-600",3,"ngModelChange","ngModel"],["type","number","placeholder","99","min","0",1,"px-3","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-gray-200","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-600","text-center",3,"ngModelChange","ngModel"],[1,"flex","flex-col","md:col-span-2"],[1,"flex","items-center","gap-3"],["type","text","placeholder","e.g., New York Yankees",1,"flex-1","px-4","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-gray-200","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-600",3,"ngModelChange","ngModel"],["type","button",1,"px-4","py-2","app-button","hover:scale-[1.02]",3,"click"],[1,"px-3","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-600",3,"ngModelChange","ngModel"],[3,"value"],[3,"goBack","confirm"],[3,"select","loadNextPageFunction","closeModal","teamElements","openModal","isClose","hasMore","elements"],[3,"message"],[3,"title"],[3,"continue","message"],[3,"cancel","title"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),p(3,"Create Player"),n(),o(4,"div",3)(5,"div",4)(6,"label",5),p(7,"Name"),n(),o(8,"input",6),_("ngModelChange",function(i){return g(e.nameInput,i)||(e.nameInput=i),i}),n()(),o(9,"div",4)(10,"label",5),p(11,"Player #"),n(),o(12,"input",7),_("ngModelChange",function(i){return g(e.playerNumberInput,i)||(e.playerNumberInput=i),i}),n()(),o(13,"div",8)(14,"label",5),p(15,"Team"),n(),o(16,"div",9)(17,"input",10),_("ngModelChange",function(i){return g(e.teamNameInput,i)||(e.teamNameInput=i),i}),n(),o(18,"button",11),c("click",function(){return e.showTeamsModal()}),p(19," Select Team "),n()()(),o(20,"div",4)(21,"label",5),p(22,"Position"),n(),o(23,"select",12),_("ngModelChange",function(i){return g(e.positionInput,i)||(e.positionInput=i),i}),M(24,Z,2,2,"option",13,T),n()()(),o(26,"app-action-buttons",14),c("goBack",function(){return e.returnToHome()})("confirm",function(){return e.createPlayer()}),n(),o(27,"app-select-element-modal",15),I(28,"async"),c("select",function(i){return e.selectTeam(i)})("loadNextPageFunction",function(){return e.loadNextPage()})("closeModal",function(){return e.closeTeamModal()}),n(),b(29,$,1,1,"app-success-modal",16),b(30,ee,1,1,"app-success-modal",16),b(31,te,1,1,"app-error-modal",17),n()()),t&2&&(s(8),y("ngModel",e.nameInput),s(4),y("ngModel",e.playerNumberInput),s(5),y("ngModel",e.teamNameInput),s(6),y("ngModel",e.positionInput),s(),x(e.availablePositions),s(3),u("teamElements",!0)("openModal",e.selectTeamButtonClicked)("isClose",e.isClose)("hasMore",e.selector.hasMore)("elements",N(28,12,e.selector.items$)??k(14,X)),s(2),h(e.success?29:-1),s(),h(e.selectedTeam?30:-1),s(),h(e.error?31:-1))},dependencies:[E,j,D,L,R,H,q,W,O,A,z,J,Y,K,B],encapsulation:2})};export{U as CreatePlayerComponent};
