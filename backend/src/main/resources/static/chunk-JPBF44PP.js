import{a as D}from"./chunk-67EPZR55.js";import{a as S}from"./chunk-4MKGYKPC.js";import{$ as a,I as i,L as c,P as b,U as h,W as x,_ as s,aa as l,bb as E,ca as g,da as C,ea as y,fa as w,ga as u,ha as A,ia as p,pa as m,qa as P,ra as M,v as d,w as v,x as _}from"./chunk-PKXEEY3P.js";var f=class n{content;confirm=new b;handleConfirm(){this.confirm.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=c({type:n,selectors:[["app-profile-buttons"]],inputs:{content:"content"},outputs:{confirm:"confirm"},decls:4,vars:1,consts:[[1,"relative","inline-flex","items-center","justify-center","px-6","py-3","overflow-hidden","font-medium","text-white","cursor-pointer","transition-all","duration-300","bg-gradient-to-r","from-red-500","to-rose-600","rounded-xl","shadow-lg","group","hover:from-red-600","hover:to-rose-700","hover:scale-105",3,"click"],[1,"absolute","inset-0","transition-transform","duration-300","ease-out","translate-x-full","bg-white","opacity-10","group-hover:translate-x-0"],[1,"relative","z-10","text-lg","tracking-wide"]],template:function(e,t){e&1&&(g(0,"button",0),A("click",function(){return t.handleConfirm()}),y(1,"span",1),g(2,"span",2),m(3),C()()),e&2&&(i(3),P(t.content))},encapsulation:2})};function B(n,o){if(n&1){let e=w();a(0,"app-remove-confirmation-modal",5),u("confirm",function(){v(e);let r=p();return _(r.confirm())})("cancel",function(){v(e);let r=p();return _(r.cancel())}),l()}if(n&2){let e=p();s("title",e.activeAction==="logout"?"Are you sure you want to log out?":"Are you sure you want to delete your account?")("contentMessage",e.activeAction==="logout"?"You will be signed out of your account and will need to log in again to continue.":"Your account will be deleted from the system and this is an irreversible change.")("buttonContent",e.activeAction==="logout"?"Yes, Logout":"Yes, Delete")("isDelete",e.activeAction==="delete")}}var I=class n{authService=d(D);router=d(E);username="";errorMessage="";activeAction=null;ngOnInit(){this.authService.getActiveUser().subscribe({next:o=>this.username=o.username,error:()=>this.errorMessage="Unexpected error while retrieving the user"})}openModal(o){this.activeAction=o}cancel(){this.activeAction=null}confirm(){this.activeAction==="logout"&&this.authService.logoutUser().subscribe(()=>this.router.navigate(["/"])),this.activeAction==="delete"&&this.authService.deleteAccount().subscribe(()=>this.router.navigate(["/"])),this.activeAction=null}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=c({type:n,selectors:[["app-profile"]],decls:7,vars:4,consts:[[1,"min-h-screen","app-background","flex","flex-col","items-center","justify-center","gap-8","p-6"],[1,"text-3xl","font-semibold","text-blue-600","dark:text-blue-400"],[1,"flex","flex-row","items-center","justify-center","gap-5"],[3,"confirm","content"],[3,"title","contentMessage","buttonContent","isDelete"],[3,"confirm","cancel","title","contentMessage","buttonContent","isDelete"]],template:function(e,t){e&1&&(a(0,"div",0)(1,"h1",1),m(2),l(),a(3,"div",2)(4,"app-profile-buttons",3),u("confirm",function(){return t.openModal("logout")}),l(),a(5,"app-profile-buttons",3),u("confirm",function(){return t.openModal("delete")}),l()(),h(6,B,1,4,"app-remove-confirmation-modal",4),l()),e&2&&(i(2),M(" ",t.username," "),i(2),s("content","Logout"),i(),s("content","Delete Account"),i(),x(t.activeAction?6:-1))},dependencies:[S,f],encapsulation:2})};export{I as ProfileComponent};
