import{a as U}from"./chunk-XTNYDHVJ.js";import{a as Y}from"./chunk-X3DQU5VO.js";import{a as K}from"./chunk-F47TWOGG.js";import{b as V}from"./chunk-35XGI5P5.js";import"./chunk-NRPEG6UI.js";import{a as Q}from"./chunk-EXDF6GWC.js";import{a as R,c as W,e as A,g as q,k as D,l as L,m as H,o as O,r as j,t as G}from"./chunk-332QIL6S.js";import{e as F}from"./chunk-IZW5FDFG.js";import{a as z,b as J}from"./chunk-HDDW6YC7.js";import{Ab as c,Bb as w,Da as s,Eb as g,Fb as y,Gb as _,Ia as d,Lb as I,Pa as S,Qb as k,Rb as N,bb as b,ca as C,da as f,db as h,fb as v,gb as T,hb as M,ib as u,jb as i,kb as n,lb as x,nc as B,pb as P,qb as p,rc as E,sb as m}from"./chunk-GAK5OYFS.js";var Z=()=>[];function $(o,l){if(o&1&&(i(0,"option",15),c(1),n()),o&2){let t=l.$implicit;u("value",t),s(),w(t)}}function ee(o,l){if(o&1){let t=P();i(0,"app-success-modal",20),p("continue",function(){C(t);let r=m();return f(r.returnToHome())}),n()}if(o&2){let t=m();u("message",t.successMessage)}}function te(o,l){if(o&1){let t=P();i(0,"app-success-modal",20),p("continue",function(){C(t);let r=m();return f(r.closeSuccessModal())}),n()}if(o&2){let t=m();u("message",t.successMessage)}}function ie(o,l){if(o&1){let t=P();i(0,"app-error-modal",21),p("cancel",function(){C(t);let r=m();return f(r.error=!1)}),n()}if(o&2){let t=m();u("title",t.errorMessage)}}var X=class o{constructor(l,t,e,r){this.playerService=l;this.teamService=t;this.selector=e;this.router=r}nameInput="";playerNumberInput=void 0;teamNameInput="";positionInput="";success=!1;error=!1;selectTeamButtonClicked=!1;isClose=!1;selectedTeam=!1;availableTeams=[];errorMessage="";successMessage="";pageSize=10;availablePositions=["C","1B","2B","3B","SS","LF","CF","RF","DH","SP","CP","RP"];pitcherPositions=["SP","RP","CP"];positionPlayerPositions=["C","1B","2B","3B","SS","LF","CF","RF","DH"];buildRequest(){return{name:this.nameInput,playerNumber:this.playerNumberInput,teamName:this.teamNameInput,position:this.positionInput}}ngOnInit(){}isPitcher(){return this.pitcherPositions.includes(this.positionInput)}isPositionPlayer(){return this.positionPlayerPositions.includes(this.positionInput)}createPlayer(){let l=this.buildRequest();this.isPitcher()?this.createPlayerByType(()=>this.playerService.createPitcher(l)):this.isPositionPlayer()?this.createPlayerByType(()=>this.playerService.createPositionPlayer(l)):(this.error=!0,this.errorMessage="All the fields are required")}createPlayerByType(l){l().subscribe({next:t=>{this.success=!0,this.successMessage=`${t.name}  successfully created`},error:t=>{this.error=!0,this.errorMessage=t?.error?.message??"All the fields are required"}})}showTeamsModal(){this.selectTeamButtonClicked=!0,this.selector.reset(),this.selector.loadPage(0,this.pageSize,this.teamService.getAvailableTeams.bind(this.teamService))}closeTeamModal=()=>{this.isClose=!0,setTimeout(()=>{this.selectTeamButtonClicked=!1,this.isClose=!1},300)};closeSuccessModal(){this.selectedTeam=!1,this.selectTeamButtonClicked=!1}selectTeam(l){let t=l;this.selectedTeam=!0,this.successMessage="Team Selected",this.teamNameInput=this.selector.select(t,e=>e.name)}loadNextPage(){this.selector.loadNextPage(this.pageSize,this.teamService.getAvailableTeams.bind(this.teamService))}returnToHome(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||o)(d(U),d(V),d(Y),d(F))};static \u0275cmp=S({type:o,selectors:[["app-create-player"]],decls:34,vars:16,consts:[[1,"app-background","min-h-screen","text-gray-900","dark:text-white","px-6","py-16","space-y-12","flex","flex-col","items-center"],[1,"w-full","max-w-3xl","mx-auto","team-section-container","space-y-10","animate-fade-in"],[1,"text-xl","text-center","app-page-titles"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"flex","flex-col"],[1,"text-sm","font-semibold","text-gray-600","dark:text-gray-300","mb-1"],["type","text","placeholder","e.g., Aaron Judge",1,"px-4","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-gray-200","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-600",3,"ngModelChange","ngModel"],["type","number","placeholder","99","min","0",1,"px-3","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-gray-200","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-600","text-center",3,"ngModelChange","ngModel"],[1,"flex","flex-col","md:col-span-2"],[1,"flex","items-center","gap-3"],["type","text","placeholder","e.g., New York Yankees",1,"flex-1","px-4","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-gray-200","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-600",3,"ngModelChange","ngModel"],["type","button",1,"px-4","py-2","app-button","group","tracking-widest",3,"click"],[1,"app-button-bright"],[1,"app-button-texts"],[1,"px-3","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-600",3,"ngModelChange","ngModel"],[3,"value"],[3,"goBack","confirm"],[3,"select","loadNextPageFunction","closeModal","teamElements","openModal","isClose","hasMore","elements","appEscapeClose"],[3,"message"],[3,"title"],[3,"continue","message"],[3,"cancel","title"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),c(3,"Create Player"),n(),i(4,"div",3)(5,"div",4)(6,"label",5),c(7,"Name"),n(),i(8,"input",6),_("ngModelChange",function(a){return y(e.nameInput,a)||(e.nameInput=a),a}),n()(),i(9,"div",4)(10,"label",5),c(11,"Player #"),n(),i(12,"input",7),_("ngModelChange",function(a){return y(e.playerNumberInput,a)||(e.playerNumberInput=a),a}),n()(),i(13,"div",8)(14,"label",5),c(15,"Team"),n(),i(16,"div",9)(17,"input",10),_("ngModelChange",function(a){return y(e.teamNameInput,a)||(e.teamNameInput=a),a}),n(),i(18,"button",11),p("click",function(){return e.showTeamsModal()}),x(19,"span",12),i(20,"span",13),c(21,"Select Team"),n()()()(),i(22,"div",4)(23,"label",5),c(24,"Position"),n(),i(25,"select",14),_("ngModelChange",function(a){return y(e.positionInput,a)||(e.positionInput=a),a}),T(26,$,2,2,"option",15,v),n()()(),i(28,"app-action-buttons",16),p("goBack",function(){return e.returnToHome()})("confirm",function(){return e.createPlayer()}),n(),i(29,"app-select-element-modal",17),k(30,"async"),p("select",function(a){return e.selectTeam(a)})("loadNextPageFunction",function(){return e.loadNextPage()})("closeModal",function(){return e.closeTeamModal()}),n(),b(31,ee,1,1,"app-success-modal",18),b(32,te,1,1,"app-success-modal",18),b(33,ie,1,1,"app-error-modal",19),n()()),t&2&&(s(8),g("ngModel",e.nameInput),s(4),g("ngModel",e.playerNumberInput),s(5),g("ngModel",e.teamNameInput),s(8),g("ngModel",e.positionInput),s(),M(e.availablePositions),s(3),u("teamElements",!0)("openModal",e.selectTeamButtonClicked)("isClose",e.isClose)("hasMore",e.selector.hasMore)("elements",N(30,13,e.selector.items$)??I(15,Z))("appEscapeClose",e.closeTeamModal),s(2),h(e.success?31:-1),s(),h(e.selectedTeam?32:-1),s(),h(e.error?33:-1))},dependencies:[E,j,L,H,R,q,D,W,O,A,J,G,K,Q,z,B],encapsulation:2})};export{X as CreatePlayerComponent};
