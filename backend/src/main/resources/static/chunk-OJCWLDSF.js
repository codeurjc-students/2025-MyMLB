import{b as R,c as G,d as Y}from"./chunk-SU4CYYNY.js";import{a as q}from"./chunk-IHJKJOPJ.js";import{$ as w,Aa as I,E as M,F as $,G as o,Ha as P,I as x,J as C,Ja as O,La as k,N as H,Q as f,R as L,S as _,U as F,V,W as g,X as r,Y as s,Z as T,_ as h,_a as K,aa as U,ba as u,da as p,ea as N,fa as l,l as j,ma as c,na as E,oa as S,ra as D,sa as A,u as m,v as d,w as b,x as z,za as B}from"./chunk-DXTTCSYX.js";var y=class i{message="";continue=new H;handleConfirm(){this.continue.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-success-modal"]],inputs:{message:"message"},outputs:{continue:"continue"},decls:10,vars:1,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm","animate-fadeIn"],[1,"relative","w-full","max-w-md","p-6"],[1,"relative","bg-white","dark:bg-gray-900","rounded-2xl","shadow-xl","p-6","text-center","animate-scaleIn"],[1,"w-14","h-14","rounded-full","bg-green-100","dark:bg-green-800","flex","items-center","justify-center","mx-auto","mb-4"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"w-8","h-8","text-green-600","dark:text-green-400"],["fill-rule","evenodd","clip-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"],[1,"text-lg","font-semibold","text-gray-800","dark:text-white","mb-4"],["type","button",1,"px-5","py-2.5","text-sm","font-medium","text-white","bg-green-600","rounded-lg","shadow-md","hover:bg-green-700","hover:shadow-lg","transition","focus:outline-none","focus:ring-2","focus:ring-green-400","dark:focus:ring-green-500",3,"click"]],template:function(e,n){e&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),b(),h(4,"svg",4),U(5,"path",5),w()(),z(),h(6,"p",6),c(7),w(),h(8,"button",7),N("click",function(){return n.handleConfirm()}),c(9," Continue "),w()()()()),e&2&&(o(7),S(" ",n.message," "))},dependencies:[k],encapsulation:2})};var Q=(i,t)=>t.abbreviation;function Z(i,t){if(i&1){let e=u();r(0,"div",3)(1,"button",8),p("click",function(){m(e);let a=l();return d(a.loadTeams())}),c(2,"Add Favorite Team"),s()()}}function ee(i,t){if(i&1){let e=u();r(0,"div",10)(1,"div",12),p("click",function(){let a=m(e).$implicit,v=l(2);return d(v.selectTeam(a.name))}),T(2,"img",13),s(),r(3,"div",14)(4,"span",15),c(5),s(),r(6,"button",16),p("click",function(){let a=m(e).$implicit,v=l(2);return d(v.openDeleteModal(a))}),b(),r(7,"svg",17),T(8,"path",18),s()()()()}if(i&2){let e=t.$implicit,n=l(2);o(),g("ngClass",n.logoBackground(e)),o(),g("src",A("assets/team-logos-new/",e.league,"/",e.division,"/",e.abbreviation,".png"),M)("alt",D("",e.name," Logo")),o(3),E(e.name)}}function te(i,t){if(i&1){let e=u();r(0,"section",4)(1,"div",9),F(2,ee,9,8,"div",10,Q),B(4,"async"),s(),r(5,"div",11)(6,"button",8),p("click",function(){m(e);let a=l();return d(a.loadTeams())}),c(7," Add Favorite Team "),s()()()}if(i&2){let e=l();o(2),V(I(4,0,e.favTeams$))}}function ie(i,t){if(i&1){let e=u();r(0,"li")(1,"button",23),p("click",function(){let a=m(e).$implicit,v=l(2);return d(v.addFavoriteTeam(a))}),T(2,"img",24),r(3,"span",25),c(4),s()()()}if(i&2){let e=t.$implicit,n=l(2);o(),g("ngClass",n.logoBackground(e)),o(),g("src",A("assets/team-logos-new/",e.league,"/",e.division,"/",e.abbreviation,".png"),M)("alt",D("",e.name," Logo")),o(2),E(e.name)}}function ne(i,t){if(i&1){let e=u();r(0,"div",22)(1,"button",26),p("click",function(){m(e);let a=l(2);return d(a.loadMoreTeams())}),c(2," Load more teams "),s()()}}function ae(i,t){if(i&1){let e=u();r(0,"div",22)(1,"button",26),p("click",function(){m(e);let a=l(2);return d(a.addButtonClicked=!1)}),c(2," Close "),s()()}}function oe(i,t){if(i&1&&(r(0,"div",5)(1,"div",19)(2,"h2",20),c(3," Select a Team to Add "),s(),r(4,"ul",21),F(5,ie,5,8,"li",null,Q),s(),f(7,ne,3,0,"div",22)(8,ae,3,0,"div",22),s()()),i&2){let e=l();o(5),V(e.visibleTeams),o(2),_(e.visibleTeams.length<e.availableTeams.length?7:8)}}function re(i,t){if(i&1){let e=u();r(0,"app-success-modal",27),p("continue",function(){m(e);let a=l();return d(a.showSuccessModal=!1)}),s()}if(i&2){let e=l();g("message",e.successMessage)}}function se(i,t){if(i&1){let e=u();r(0,"app-remove-confirmation-modal",28),p("confirm",function(){m(e);let a=l();return d(a.confirmDeleteTeam())})("cancel",function(){m(e);let a=l();return d(a.cancelDeleteModal())}),s()}if(i&2){let e=l();g("title","Are you sure you want to remove this team as favorite?")("contentMessage","This action cannot be undone. The team will be removed from your favorites.")("buttonContent","Yes, Remove")("svg",e.removeModalIcon)}}var J=class i{constructor(t,e,n,a){this.userService=t;this.backgroundService=e;this.teamService=n;this.authService=a}favTeams$;username="";errorMessage="";successMessage="";showDeleteModal=!1;teamToDelete;showSuccessModal=!1;addButtonClicked=!1;availableTeams=[];visibleTeams=[];pageSize=10;currentPage=0;removeModalIcon=`<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" class="w-12 h-12 mx-auto">
		<path fill-rule="evenodd" clip-rule="evenodd"
			d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
		></path>
	</svg>`;ngOnInit(){this.favTeams$=this.userService.favTeams$,this.userService.getFavTeams(),this.getUsername()}getUsername(){this.authService.getActiveUser().subscribe({next:t=>this.username=t.username,error:t=>this.errorMessage="Unexpected error while retrieving the user"})}updateAvailableTeams(t){this.favTeams$.pipe(j(1)).subscribe(e=>{this.availableTeams=t.filter(n=>!e.some(a=>a.name===n.name)),this.currentPage=0,this.visibleTeams=this.availableTeams.slice(0,this.pageSize)})}loadTeams(){this.addButtonClicked=!0,this.errorMessage="",this.teamService.getTeamsNamesAndAbbr().subscribe({next:t=>this.updateAvailableTeams(t),error:t=>this.errorMessage="Error while loading the teams"})}addFavoriteTeam(t){this.errorMessage="",this.successMessage="",this.userService.addFavTeam(t).subscribe({next:e=>{this.successMessage="Team successfully added",this.showSuccessModal=!0,this.userService.getFavTeams(),this.teamService.getTeamsNamesAndAbbr().subscribe(n=>{this.updateAvailableTeams(n)})},error:e=>this.errorMessage=e.message})}handleEscape(t){t.key==="Escape"&&(this.addButtonClicked=!1)}openDeleteModal(t){this.showDeleteModal=!0,this.teamToDelete=t}cancelDeleteModal(){this.showDeleteModal=!1}confirmDeleteTeam(){this.errorMessage="",this.successMessage="",this.userService.removeFavTeam(this.teamToDelete).subscribe({next:t=>{this.showDeleteModal=!1,this.successMessage="Team successfully removed",this.showSuccessModal=!0,this.userService.getFavTeams(),this.teamService.getTeamsNamesAndAbbr().subscribe(e=>{this.updateAvailableTeams(e)})},error:t=>this.errorMessage=t.message})}logoBackground(t){return this.backgroundService.getBackgroundColor(t.abbreviation)}selectTeam(t){this.teamService.selectTeam(t).subscribe({error:e=>this.errorMessage=e.message})}loadMoreTeams(){this.currentPage++;let t=this.currentPage*this.pageSize,e=t+this.pageSize;this.visibleTeams=[...this.visibleTeams,...this.availableTeams.slice(t,e)]}static \u0275fac=function(e){return new(e||i)(x(Y),x(G),x(R),x(K))};static \u0275cmp=C({type:i,selectors:[["app-fav-team"]],hostBindings:function(e,n){e&1&&p("keydown",function(v){return n.handleEscape(v)},$)},decls:10,vars:7,consts:[[1,"app-background","min-h-screen","text-gray-900","dark:text-white","px-6","py-16","space-y-24","flex","flex-col","items-center"],[1,"w-full","flex","justify-center","text-center","overflow-visible"],[1,"text-6xl","leading-[1.5]","font-extrabold","bg-gradient-to-r","from-blue-500","via-indigo-500","to-purple-500","bg-clip-text","text-transparent","drop-shadow-xl","break-words","max-w-[90vw]"],[1,"flex","justify-center"],[1,"w-full","max-w-6xl","team-section-container"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm","animate-fadeIn"],[3,"message"],[3,"title","contentMessage","buttonContent","svg"],[1,"px-6","py-3","text-lg","font-semibold","text-white","rounded-lg","shadow-md","bg-gradient-to-br","from-sky-600","via-sky-700","to-sky-800","hover:brightness-125","hover:shadow-lg","transition-all","duration-300","ease-out","cursor-pointer","dark:from-indigo-900","dark:via-blue-900","dark:to-sky-800",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-4","lg:grid-cols-6","gap-x-14","gap-y-16","justify-center"],[1,"flex","flex-col","items-center","space-y-3","relative","text-center"],[1,"mt-12","flex","justify-center"],[1,"w-32","h-32","rounded-full","shadow-lg","flex","items-center","justify-center","cursor-pointer",3,"click","ngClass"],[1,"w-24","h-24","object-contain","cursor-pointer","hover:animate-scale",3,"src","alt"],[1,"flex","items-center","justify-center","gap-2"],[1,"text-lg","font-semibold","text-center"],["title","Remove team",1,"text-red-500","hover:text-red-700","transition","cursor-pointer",3,"click"],["fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"bg-white","dark:bg-gray-900","rounded-xl","shadow-2xl","w-11/12","max-w-2xl","p-6","overflow-y-auto","max-h-[80vh]"],[1,"text-2xl","font-bold","mb-6","text-center","text-blue-800","dark:text-blue-300"],[1,"space-y-2"],[1,"mt-6","text-center"],[1,"w-full","flex","items-center","justify-start","gap-4","px-4","py-3","rounded-lg","transition","cursor-pointer","hover:brightness-110","hover:shadow-md",3,"click","ngClass"],[1,"w-8","h-8",3,"src","alt"],[1,"text-white","font-medium","text-base","truncate"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-gray-200","rounded-lg","bg-gradient-to-br","from-sky-600","via-sky-700","to-sky-800","hover:brightness-125","hover:shadow-lg","transition-all","duration-300","ease-out","cursor-pointer","dark:from-indigo-900","dark:via-blue-900","dark:to-sky-800",3,"click"],[3,"continue","message"],[3,"confirm","cancel","title","contentMessage","buttonContent","svg"]],template:function(e,n){if(e&1&&(r(0,"div",0)(1,"section",1)(2,"h1",2),c(3),s()(),f(4,Z,3,0,"div",3),B(5,"async"),L(6,te,8,2,"section",4),f(7,oe,9,1,"div",5),f(8,re,1,1,"app-success-modal",6),f(9,se,1,4,"app-remove-confirmation-modal",7),s()),e&2){let a;o(3),S(" ",n.username,"'s Favorite Teams "),o(),_(((a=I(5,5,n.favTeams$))==null?null:a.length)===0?4:6),o(3),_(n.addButtonClicked?7:-1),o(),_(n.showSuccessModal?8:-1),o(),_(n.showDeleteModal?9:-1)}},dependencies:[k,P,q,y,O],encapsulation:2})};export{J as FavTeamComponent};
