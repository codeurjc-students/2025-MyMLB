import{b as J}from"./chunk-SBW6NNV3.js";import{a as X}from"./chunk-42ZNSP4Z.js";import{j as W}from"./chunk-E5YB5CHU.js";import{a as Q}from"./chunk-2DFG6UGS.js";import{Ab as m,B as $,Bb as A,Cb as S,Da as F,Fa as L,Ga as o,Ib as j,Jb as D,La as _,N as z,Qb as B,R as H,Ra as C,Rb as I,Wa as N,X as c,Y as d,Z as x,_ as O,db as g,eb as R,fb as h,hb as V,ib as E,j as U,jb as v,kb as r,kc as K,lb as s,mb as T,mc as Y,nb as b,ob as w,oc as y,pb as P,qb as p,rb as u,sb as G,tb as l,uc as q}from"./chunk-FU6UCUUO.js";var k=class i{message="";continue=new N;handleConfirm(){this.continue.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-success-modal"]],inputs:{message:"message"},outputs:{continue:"continue"},decls:10,vars:1,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm","animate-fadeIn"],[1,"relative","w-full","max-w-md","p-6"],[1,"relative","bg-white","dark:bg-gray-900","rounded-2xl","shadow-xl","p-6","text-center","animate-scaleIn"],[1,"w-14","h-14","rounded-full","bg-green-100","dark:bg-green-800","flex","items-center","justify-center","mx-auto","mb-4"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"w-8","h-8","text-green-600","dark:text-green-400"],["fill-rule","evenodd","clip-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"],[1,"text-lg","font-semibold","text-gray-800","dark:text-white","mb-4"],[1,"px-5","py-2.5","app-success-button",3,"click"]],template:function(e,a){e&1&&(b(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),x(),b(4,"svg",4),P(5,"path",5),w()(),O(),b(6,"p",6),m(7),w(),b(8,"button",7),G("click",function(){return a.handleConfirm()}),m(9," Continue "),w()()()()),e&2&&(o(7),S(" ",a.message," "))},dependencies:[y],encapsulation:2})};var M=class i{constructor(t){this.http=t}apiUrl="https://localhost:8443/api/users";favTeamsSubject=new U([]);favTeams$=this.favTeamsSubject.asObservable();getAllUsers(){return this.http.get(this.apiUrl)}getFavTeams(){this.http.get(`${this.apiUrl}/favorites/teams`,{withCredentials:!0}).subscribe({next:t=>this.favTeamsSubject.next(t)})}getSelectedFavTeams(){return this.favTeamsSubject.getValue()}addFavTeam(t){return this.http.post(`${this.apiUrl}/favorites/teams/${t.name}`,{},{withCredentials:!0})}removeFavTeam(t){return this.http.delete(`${this.apiUrl}/favorites/teams/${t.name}`,{withCredentials:!0})}static \u0275fac=function(e){return new(e||i)(H(q))};static \u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})};var te=(i,t)=>t.abbreviation;function ne(i,t){if(i&1){let e=p();r(0,"div",3)(1,"button",8),u("click",function(){c(e);let n=l();return d(n.loadTeams())}),m(2,"Add Favorite Team"),s()()}}function oe(i,t){if(i&1){let e=p();r(0,"div",10)(1,"div",12),u("click",function(){let n=c(e).$implicit,f=l(2);return d(f.selectTeam(n.name))}),T(2,"img",13),s(),r(3,"div",14)(4,"span",15),m(5),s(),r(6,"button",16),u("click",function(){let n=c(e).$implicit,f=l(2);return d(f.openDeleteModal(n))}),x(),r(7,"svg",17),T(8,"path",18),s()()()()}if(i&2){let e=t.$implicit,a=l(2);o(),v("ngClass",a.logoBackground(e)),o(),v("src",D("assets/team-logos-new/",e.league,"/",e.division,"/",e.abbreviation,".png"),F)("alt",j("",e.name," Logo")),o(3),A(e.name)}}function re(i,t){if(i&1){let e=p();r(0,"section",4)(1,"div",9),V(2,oe,9,8,"div",10,te),B(4,"async"),s(),r(5,"div",11)(6,"button",8),u("click",function(){c(e);let n=l();return d(n.loadTeams())}),m(7," Add Favorite Team "),s()()()}if(i&2){let e=l();o(2),E(I(4,0,e.favTeams$))}}function se(i,t){if(i&1){let e=p();r(0,"li")(1,"button",23),u("click",function(){let n=c(e).$implicit,f=l(2);return d(f.addFavoriteTeam(n))}),T(2,"img",24),r(3,"span",25),m(4),s()()()}if(i&2){let e=t.$implicit,a=l(2);o(),v("ngClass",a.logoBackground(e)),o(),v("src",D("assets/team-logos-new/",e.league,"/",e.division,"/",e.abbreviation,".png"),F)("alt",j("",e.name," Logo")),o(2),A(e.name)}}function le(i,t){if(i&1){let e=p();r(0,"div",22)(1,"button",26),u("click",function(){c(e);let n=l(2);return d(n.loadMoreTeams())}),m(2," Load more teams "),s()()}}function me(i,t){if(i&1){let e=p();r(0,"div",22)(1,"button",26),u("click",function(){c(e);let n=l(2);return d(n.addButtonClicked=!1)}),m(2," Close "),s()()}}function ce(i,t){if(i&1&&(r(0,"div",5)(1,"div",19)(2,"h2",20),m(3," Select a Team to Add "),s(),r(4,"ul",21),V(5,se,5,8,"li",null,te),s(),g(7,le,3,0,"div",22)(8,me,3,0,"div",22),s()()),i&2){let e=l();v("ngClass",e.isClose?"animate-fade-out-down":"animate-fade-in-up"),o(5),E(e.visibleTeams),o(2),h(e.visibleTeams.length<e.availableTeams.length?7:8)}}function de(i,t){if(i&1){let e=p();r(0,"app-success-modal",27),u("continue",function(){c(e);let n=l();return d(n.showSuccessModal=!1)}),s()}if(i&2){let e=l();v("message",e.successMessage)}}function ue(i,t){if(i&1){let e=p();r(0,"app-remove-confirmation-modal",28),u("confirm",function(){c(e);let n=l();return d(n.confirmDeleteTeam())})("cancel",function(){c(e);let n=l();return d(n.cancelDeleteModal())}),s()}if(i&2){let e=l();v("title","Are you sure you want to remove this team as favorite?")("contentMessage","This action cannot be undone. The team will be removed from your favorites.")("buttonContent","Yes, Remove")("svg",e.removeModalIcon)}}var ee=class i{constructor(t,e,a,n){this.userService=t;this.backgroundService=e;this.teamService=a;this.authService=n}favTeams$;username="";errorMessage="";successMessage="";showDeleteModal=!1;teamToDelete;showSuccessModal=!1;addButtonClicked=!1;availableTeams=[];visibleTeams=[];pageSize=10;currentPage=0;isClose=!1;removeModalIcon=`<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" class="w-12 h-12 mx-auto">
		<path fill-rule="evenodd" clip-rule="evenodd"
			d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
		></path>
	</svg>`;ngOnInit(){this.favTeams$=this.userService.favTeams$,this.userService.getFavTeams(),this.getUsername()}getUsername(){this.authService.getActiveUser().subscribe({next:t=>this.username=t.username,error:t=>this.errorMessage="Unexpected error while retrieving the user"})}updateAvailableTeams(t){this.favTeams$.pipe($(1)).subscribe(e=>{this.availableTeams=t.filter(a=>!e.some(n=>n.name===a.name)),this.currentPage=0,this.visibleTeams=this.availableTeams.slice(0,this.pageSize)})}loadTeams(){this.addButtonClicked=!0,this.errorMessage="",this.teamService.getTeamsNamesAndAbbr().subscribe({next:t=>this.updateAvailableTeams(t),error:t=>this.errorMessage="Error while loading the teams"})}addFavoriteTeam(t){this.errorMessage="",this.successMessage="",this.userService.addFavTeam(t).subscribe({next:e=>{this.successMessage="Team successfully added",this.showSuccessModal=!0,this.userService.getFavTeams(),this.teamService.getTeamsNamesAndAbbr().subscribe(a=>{this.updateAvailableTeams(a)})},error:e=>this.errorMessage=e.message})}closeTeamModal(){this.isClose=!0,setTimeout(()=>{this.addButtonClicked=!1,this.isClose=!1},300)}handleEscape(t){t.key==="Escape"&&this.closeTeamModal()}openDeleteModal(t){this.showDeleteModal=!0,this.teamToDelete=t}cancelDeleteModal(){this.showDeleteModal=!1}confirmDeleteTeam(){this.errorMessage="",this.successMessage="",this.userService.removeFavTeam(this.teamToDelete).subscribe({next:t=>{this.showDeleteModal=!1,this.successMessage="Team successfully removed",this.showSuccessModal=!0,this.userService.getFavTeams(),this.teamService.getTeamsNamesAndAbbr().subscribe(e=>{this.updateAvailableTeams(e)})},error:t=>this.errorMessage=t.message})}logoBackground(t){return this.backgroundService.getBackgroundColor(t.abbreviation)}selectTeam(t){this.teamService.selectTeam(t).subscribe({error:e=>this.errorMessage=e.message})}loadMoreTeams(){this.currentPage++;let t=this.currentPage*this.pageSize,e=t+this.pageSize;this.visibleTeams=[...this.visibleTeams,...this.availableTeams.slice(t,e)]}static \u0275fac=function(e){return new(e||i)(_(M),_(Q),_(J),_(W))};static \u0275cmp=C({type:i,selectors:[["app-fav-team"]],hostBindings:function(e,a){e&1&&u("keydown",function(f){return a.handleEscape(f)},L)},decls:10,vars:7,consts:[[1,"app-background","min-h-screen","text-gray-900","dark:text-white","px-6","py-16","space-y-24","flex","flex-col","items-center"],[1,"w-full","flex","justify-center","text-center","overflow-visible"],[1,"app-page-titles"],[1,"flex","justify-center"],[1,"w-full","max-w-6xl","team-section-container"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm",3,"ngClass"],[3,"message"],[3,"title","contentMessage","buttonContent","svg"],[1,"px-6","py-3","text-lg","font-semibold","text-white","rounded-lg","shadow-md","bg-gradient-to-br","from-sky-600","via-sky-700","to-sky-800","hover:brightness-125","hover:shadow-lg","transition-all","duration-300","ease-out","cursor-pointer","dark:from-indigo-900","dark:via-blue-900","dark:to-sky-800",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-4","lg:grid-cols-6","gap-x-14","gap-y-16","justify-center"],[1,"flex","flex-col","items-center","space-y-3","relative","text-center"],[1,"mt-12","flex","justify-center"],["id","team-container",1,"w-32","h-32","rounded-full","shadow-lg","flex","items-center","justify-center","cursor-pointer",3,"click","ngClass"],[1,"w-24","h-24","object-contain","cursor-pointer","hover:animate-scale",3,"src","alt"],[1,"flex","items-center","justify-center","gap-2"],[1,"text-lg","font-semibold","text-center"],["title","Remove team",1,"text-red-500","hover:text-red-700","transition","cursor-pointer",3,"click"],["fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"bg-white","dark:bg-gray-900","rounded-xl","shadow-2xl","w-11/12","max-w-2xl","p-6","overflow-y-auto","max-h-[80vh]"],[1,"text-2xl","font-bold","mb-6","text-center","text-blue-800","dark:text-blue-300"],[1,"space-y-2"],[1,"mt-6","text-center"],[1,"w-full","flex","items-center","justify-start","gap-4","px-4","py-3","rounded-lg","transition","cursor-pointer","hover:brightness-110","hover:shadow-md",3,"click","ngClass"],[1,"w-8","h-8",3,"src","alt"],[1,"text-white","font-medium","text-base","truncate"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-gray-200","rounded-lg","bg-gradient-to-br","from-sky-600","via-sky-700","to-sky-800","hover:brightness-125","hover:shadow-lg","transition-all","duration-300","ease-out","cursor-pointer","dark:from-indigo-900","dark:via-blue-900","dark:to-sky-800",3,"click"],[3,"continue","message"],[3,"confirm","cancel","title","contentMessage","buttonContent","svg"]],template:function(e,a){if(e&1&&(r(0,"div",0)(1,"section",1)(2,"h1",2),m(3),s()(),g(4,ne,3,0,"div",3),B(5,"async"),R(6,re,8,2,"section",4),g(7,ce,9,2,"div",5),g(8,de,1,1,"app-success-modal",6),g(9,ue,1,4,"app-remove-confirmation-modal",7),s()),e&2){let n;o(3),S(" ",a.username,"'s Favorite Teams "),o(),h(((n=I(5,5,a.favTeams$))==null?null:n.length)===0?4:6),o(3),h(a.addButtonClicked?7:-1),o(),h(a.showSuccessModal?8:-1),o(),h(a.showDeleteModal?9:-1)}},dependencies:[y,K,X,k,Y],encapsulation:2})};export{ee as FavTeamComponent};
