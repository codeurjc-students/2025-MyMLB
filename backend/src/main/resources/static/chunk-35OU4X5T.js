import{a as fe}from"./chunk-O33IWDLJ.js";import{a as he}from"./chunk-E2OKA6XF.js";import{a as Ce}from"./chunk-QKM3ZCLN.js";import{a as Ae}from"./chunk-UZGF4XIP.js";import{a as Re,b as Be,c as _e}from"./chunk-TXIPLVKL.js";import{a as ye}from"./chunk-6MSJJXHK.js";import{b as le,c as ge}from"./chunk-EIZO4MGF.js";import{a as se}from"./chunk-NRPEG6UI.js";import{a as U}from"./chunk-EXDF6GWC.js";import{a as W,c as z,e as G,g as ce,k as pe,l as me,m as de,r as H,t as B}from"./chunk-332QIL6S.js";import"./chunk-IZW5FDFG.js";import{a as ue,b as Z}from"./chunk-HDDW6YC7.js";import{a as je}from"./chunk-UM6U26ZR.js";import{Aa as F,Ab as c,Bb as b,Cb as M,Da as l,E as ke,Eb as E,Fb as T,Gb as k,H as Pe,Hb as Fe,I as K,Ia as w,Ib as O,Jb as ie,Lb as ne,Mb as Q,Pa as N,Qb as j,Rb as oe,Sa as te,Sb as Y,U as X,Ua as A,Y as Ie,Z as ee,a as Ee,bb as f,ca as u,da as g,db as h,ea as x,fa as S,fb as D,gb as P,hb as I,ib as d,jb as o,k as Te,kb as a,lb as y,lc as L,nc as ae,oa as Ve,pb as C,pc as re,qb as _,rc as R,sb as s,xc as Ne}from"./chunk-GAK5OYFS.js";var be=class i{constructor(r){this.http=r}search(r,e,n=0,t=10,p){let m=`${je.apiUrl}/searchs/${r}?query=${encodeURIComponent(e)}&page=${n}&size=${t}`;return r==="player"&&p&&(m+=`&playerType=${encodeURIComponent(p)}`),this.http.get(m)}static \u0275fac=function(e){return new(e||i)(Ie(Ne))};static \u0275prov=X({token:i,factory:i.\u0275fac,providedIn:"root"})};var qe=(i,r)=>r.url;function $e(i,r){if(i&1){let e=C();o(0,"div",16),y(1,"img",22),o(2,"button",23),_("click",function(){let t=u(e).$implicit,p=s();return g(p.handleRemovePicture(t))}),c(3," \u2715 Remove "),a()()}if(i&2){let e=r.$implicit;l(),d("src",e.url,F)}}function Qe(i,r){if(i&1){let e=C();o(0,"div",17)(1,"label",24)(2,"input",25),_("change",function(t){u(e);let p=s();return g(p.handleFileUpload(t))}),a(),o(3,"div",26),x(),o(4,"svg",27),y(5,"path",28),a(),c(6," Upload Picture "),a()(),S(),o(7,"span",29),c(8," Only files under "),o(9,"span",30),c(10,"1MB"),a()()()}}function Ye(i,r){if(i&1){let e=C();o(0,"app-success-modal",31),_("continue",function(){u(e);let t=s();return g(t.success=!1)}),a()}if(i&2){let e=s();d("message",e.successMessage)}}function Je(i,r){i&1&&y(0,"app-loading-modal",19),i&2&&d("message","Uploading the image...")}function Ke(i,r){if(i&1){let e=C();o(0,"app-remove-confirmation-modal",32),_("confirm",function(){u(e);let t=s();return g(t.removePicture())})("cancel",function(){u(e);let t=s();return g(t.cancelConfirmationModal())}),a()}i&2&&d("title","Are you sure you want to remove this picture?")("contentMessage","This action cannot be undone. The picture will be removed from the stadium's picture list.")("buttonContent","Yes, Remove")("isDelete",!0)}function Xe(i,r){if(i&1){let e=C();o(0,"app-error-modal",33),_("cancel",function(){u(e);let t=s();return g(t.error=!1)}),a()}if(i&2){let e=s();d("title",e.errorMessage)}}function et(i,r){if(i&1){let e=C();o(0,"app-success-modal",31),_("continue",function(){u(e);let t=s();return g(t.goToEditMenu())}),a()}i&2&&d("message","Changes applied successfully")}var xe=class i{constructor(r){this.stadiumService=r}stadium;backToMenu=new A;pictures=[];pictureToDelete;success=!1;successMessage="";error=!1;errorMessage="";openConfirmationModal=!1;loading=!1;finish=!1;maxPictureSize=1*1024*1024;ngOnInit(){this.pictures=this.stadium.pictures}verifyPictures(){return this.pictures.length<5}resetState(){this.error=!1,this.errorMessage="",this.success=!1,this.successMessage="",this.loading=!1}uploadPicture(r,e){if(this.resetState(),this.loading=!0,e.size>this.maxPictureSize){this.error=!0,this.errorMessage="The picture must be less than 1MB";return}this.stadiumService.uploadPicture(r,e).pipe(K(()=>this.loading=!1)).subscribe({next:n=>{this.success=!0,this.successMessage="Picture uploaded successfully",this.pictures.push(n)},error:n=>{this.error=!0,this.errorMessage="An error occurred trying to store the picture"}})}removePicture(){this.resetState(),this.stadiumService.removePicture(this.stadium.name,this.pictureToDelete.publicId).subscribe({next:r=>{this.success=!0,this.successMessage="Picture successfully deleted",this.pictures=this.pictures.filter(e=>e.publicId!==this.pictureToDelete.publicId),this.openConfirmationModal=!1},error:r=>{this.error=!0,this.errorMessage="An error occurred while trying to delete the image"}})}handleRemovePicture(r){this.openConfirmationModal=!0,this.pictureToDelete=r}cancelConfirmationModal(){this.openConfirmationModal=!1}handleFileUpload(r){let e=r.target;if(e.files&&e.files.length>0){let n=e.files[0];if(n.size>this.maxPictureSize){this.error=!0,this.errorMessage="The picture must be less than 1MB",this.loading=!1;return}this.uploadPicture(this.stadium.name,n)}}goToEditMenu(){this.finish=!1,this.backToMenu.emit()}confirm(){this.finish=!0}static \u0275fac=function(e){return new(e||i)(w(Ce))};static \u0275cmp=N({type:i,selectors:[["app-edit-stadium"]],inputs:{stadium:"stadium"},outputs:{backToMenu:"backToMenu"},decls:40,vars:10,consts:[[1,"w-full","max-w-4xl","team-section-container","space-y-10","animate-fade-in"],[1,"text-xl","text-center","app-page-titles"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","text-center"],[1,"min-w-[6rem]","p-4","bg-gray-50","dark:bg-gray-700","rounded-xl","shadow","flex","flex-col","items-center","justify-center","gap-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"],["stroke-linecap","round","stroke-linejoin","round","d","M6 6h.008v.008H6V6Z"],[1,"text-lg","font-bold","text-gray-800","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-300"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d","M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"],["fill-rule","evenodd","d","M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z","clip-rule","evenodd"],["stroke-linecap","round","stroke-linejoin","round","d","M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"],[1,"space-y-4"],[1,"block","text-sm","font-semibold","text-gray-700","dark:text-gray-300"],[1,"grid","grid-cols-2","sm:grid-cols-3","gap-4"],[1,"relative","group","rounded-xl","overflow-hidden","shadow-md","hover:shadow-lg","transition"],[1,"flex","flex-col","sm:flex-row","gap-4","mt-4","items-center"],[3,"goBack","confirm"],[3,"message"],[3,"title","contentMessage","buttonContent","isDelete"],[3,"title"],["alt","Stadium picture",1,"w-full","h-28","object-cover","rounded-xl","border","border-gray-300","dark:border-gray-600",3,"src"],[1,"absolute","top-2","right-2","cursor-pointer","bg-red-600","text-white","text-xs","px-2","py-1","rounded-md","shadow-md",3,"click"],[1,"relative","inline-block","cursor-pointer","group"],["type","file","accept","image/webp",1,"absolute","inset-0","opacity-0","cursor-pointer",3,"change"],[1,"flex","items-center","gap-2","px-5","py-2","app-button"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4v16m8-8H4"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"font-semibold"],[3,"continue","message"],[3,"confirm","cancel","title","contentMessage","buttonContent","isDelete"],[3,"cancel","title"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"h2",1),c(2),a(),o(3,"div",2)(4,"div",3),x(),o(5,"svg",4),y(6,"path",5)(7,"path",6),a(),S(),o(8,"p",7),c(9),a(),o(10,"p",8),c(11,"Name"),a()(),o(12,"div",3),x(),o(13,"svg",9),y(14,"path",10)(15,"path",11),a(),S(),o(16,"p",7),c(17),a(),o(18,"p",8),c(19,"Opening Date"),a()(),o(20,"div",3),x(),o(21,"svg",4),y(22,"path",12),a(),S(),o(23,"p",7),c(24),a(),o(25,"p",8),c(26,"Team"),a()()(),o(27,"div",13)(28,"label",14),c(29,"Pictures"),a(),o(30,"div",15),P(31,$e,4,1,"div",16,qe),a(),f(33,Qe,11,0,"div",17),a(),o(34,"app-action-buttons",18),_("goBack",function(){return n.goToEditMenu()})("confirm",function(){return n.confirm()}),a(),f(35,Ye,1,1,"app-success-modal",19),f(36,Je,1,1,"app-loading-modal",19),f(37,Ke,1,4,"app-remove-confirmation-modal",20),f(38,Xe,1,1,"app-error-modal",21),f(39,et,1,1,"app-success-modal",19),a()),e&2&&(l(2),M("Edit ",n.stadium.name),l(7),b(n.stadium.name),l(8),b(n.stadium.openingDate),l(7),b(n.stadium.teamName),l(7),I(n.pictures),l(2),h(n.verifyPictures()?33:-1),l(2),h(n.success?35:-1),l(),h(n.loading?36:-1),l(),h(n.openConfirmationModal?37:-1),l(),h(n.error?38:-1),l(),h(n.finish?39:-1))},dependencies:[R,fe,Z,he,B,U],encapsulation:2})};var q=class{constructor(r){this.mapper=r}request;formInputs={};success=!1;error=!1;finish=!1;loading=!1;successMessage="";errorMessage="";hydrateForm(){this.mapper.syncFormInputs(this.formInputs,this.getEntity(),this.getFieldMap())}prepareRequest(){this.request=this.mapper.buildEditRequest(this.formInputs,this.getEntity(),this.getFieldMap())}updateDashboard(){this.mapper.updateEntityFromInputs(this.formInputs,this.getEntity(),this.getFieldMap())}confirm(){this.resetState(),this.prepareRequest(),this.updateEntityService(this.request).subscribe({next:r=>{this.finish=!0,this.updateDashboard()},error:r=>{this.error=!0,this.errorMessage="An unexpected error occurr. Please, try again later"}})}resetState(){this.error=!1,this.errorMessage="",this.success=!1,this.successMessage="",this.loading=!1}};var $=class i{buildEditRequest(r,e,n){let t={};return Object.entries(n).forEach(([p,m])=>{let v=r[p],V=this.getNested(e,m);v!==void 0&&v!==V&&this.setNested(t,m,v)}),t}syncFormInputs(r,e,n){Object.entries(n).forEach(([t,p])=>{r[t]=this.getNested(e,p)})}updateEntityFromInputs(r,e,n){Object.entries(n).forEach(([t,p])=>{let m=r[t],v=this.getNested(e,p);m!==void 0&&m!==v&&this.setNested(e,p,m)})}getNested(r,e){return e.split(".").reduce((n,t)=>n?.[t],r)}setNested(r,e,n){let t=e.split("."),p=t.pop(),m=t.reduce((v,V)=>((v[V]===void 0||v[V]===null)&&(v[V]={}),v[V]),r);m[p]=n}static \u0275fac=function(e){return new(e||i)};static \u0275prov=X({token:i,factory:i.\u0275fac,providedIn:"root"})};var nt=()=>[];function ot(i,r){if(i&1&&(o(0,"li",33),c(1),a()),i&2){let e=r.$implicit;l(),M(" ",e," ")}}function at(i,r){if(i&1){let e=C();o(0,"app-success-modal",40),_("continue",function(){u(e);let t=s();return g(t.goToEditMenu())}),a()}i&2&&d("message","Changes applied successfully")}function rt(i,r){if(i&1){let e=C();o(0,"app-success-modal",40),_("continue",function(){u(e);let t=s();return g(t.success=!1)}),a()}if(i&2){let e=s();d("message",e.successMessage)}}function lt(i,r){if(i&1){let e=C();o(0,"app-error-modal",41),_("cancel",function(){u(e);let t=s();return g(t.error=!1)}),a()}if(i&2){let e=s();d("title",e.errorMessage)}}var ve=class i extends q{constructor(e,n,t,p,m){super(e);this.teamService=n;this.stadiumService=t;this.selector=p;this.backgroundService=m}team;backToMenu=new A;pageSize=10;selectStadiumButtonClicked=!1;isClose=!1;formInputs={city:void 0,info:void 0,newChampionship:void 0,stadiumName:void 0};ngOnInit(){this.hydrateForm()}getFieldMap(){return{city:"city",info:"generalInfo",stadiumName:"stadium.name"}}getEntity(){return this.team}updateEntityService(e){let n=Ee({},e);return this.formInputs.stadiumName&&this.formInputs.stadiumName!==this.team.stadium.name&&(n.newStadiumName=this.formInputs.stadiumName),this.formInputs.newChampionship!==void 0&&(n.newChampionship=this.formInputs.newChampionship),this.teamService.updateTeam(this.team.teamStats.name,n)}showStadiumsModal(){this.selectStadiumButtonClicked=!0,this.selector.reset(),this.selector.loadPage(0,this.pageSize,this.stadiumService.getAvailableStadiums.bind(this.stadiumService))}loadNextPage(){this.selector.loadNextPage(this.pageSize,this.stadiumService.getAvailableStadiums.bind(this.stadiumService))}selectStadium(e){let n=e;this.formInputs.stadiumName=this.selector.select(n,t=>t.name),this.success=!0,this.successMessage="Stadium Selected"}closeStadiumModal=()=>{this.isClose=!0,setTimeout(()=>{this.selectStadiumButtonClicked=!1,this.isClose=!1},300)};goToEditMenu(){this.finish=!1,this.backToMenu.emit()}updateDashboard(){if(this.formInputs.city&&this.formInputs.city!==this.team.city){let e=this.team.city;this.team.city=this.formInputs.city,this.team.teamStats.name=this.team.teamStats.name.replace(e,this.team.city)}super.updateDashboard(),this.formInputs.newChampionship!==void 0&&(this.team.championships.push(this.formInputs.newChampionship),this.formInputs.newChampionship=void 0)}static \u0275fac=function(n){return new(n||i)(w($),w(le),w(Ce),w(_e),w(se))};static \u0275cmp=N({type:i,selectors:[["app-edit-team"]],inputs:{team:"team"},outputs:{backToMenu:"backToMenu"},features:[te],decls:91,vars:38,consts:[[1,"w-full","max-w-4xl","team-section-container","space-y-10","animate-fade-in"],[1,"text-xl","text-center","app-page-titles"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-8","items-center"],[1,"flex","justify-center","md:justify-start"],[1,"p-4","rounded-xl","shadow-md","border","border-gray-300","dark:border-gray-600",3,"ngClass"],[1,"w-24","h-24","object-contain",3,"src","alt"],[1,"md:col-span-3","grid","grid-cols-2","sm:grid-cols-3","gap-6","text-center"],[1,"min-w-[6rem]","p-4","bg-gray-50","dark:bg-gray-700","rounded-xl","shadow","flex","flex-col","items-center","justify-center","gap-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"],["stroke-linecap","round","stroke-linejoin","round","d","M6 6h.008v.008H6V6Z"],[1,"text-lg","font-bold","text-gray-800","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-300"],["stroke-linecap","round","stroke-linejoin","round","d","M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-5","gap-6","text-center"],[1,"min-w-[6rem]","p-4","bg-gray-50","dark:bg-gray-700","rounded-xl","shadow"],[1,"text-lg","font-bold","text-black","dark:text-white"],[1,"text-lg","font-bold","text-green-600"],[1,"text-lg","font-bold","text-red-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"flex","flex-col"],[1,"text-sm","font-medium","text-gray-600","dark:text-gray-300","mb-1"],["type","text",1,"px-4","py-2","rounded-lg","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-gray-800","dark:text-gray-200","shadow-inner","focus:outline-none","focus:ring-2","focus:ring-blue-700",3,"ngModelChange","placeholder","ngModel"],[1,"flex","items-center","justify-center","gap-1"],["matTooltipPosition","above","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","opacity-70","hover:opacity-100","transition-opacity","cursor-help",3,"matTooltip"],["stroke-linecap","round","stroke-linejoin","round","d","m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"],[1,"px-4","py-2","app-button","h-10","group","tracking-widest",3,"click"],[1,"app-button-bright"],[1,"app-button-texts"],[1,"md:col-span-2","flex","flex-col"],["rows","4",1,"px-4","py-2","rounded-lg","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-gray-800","dark:text-gray-200","shadow-inner","focus:outline-none","focus:ring-2","focus:ring-blue-700",3,"ngModelChange","ngModel","placeholder"],[1,"flex","flex-col","gap-4","md:flex-row","md:items-center"],[1,"flex","gap-2","flex-wrap"],[1,"px-3","py-1","bg-indigo-100","dark:bg-indigo-600","text-indigo-800","dark:text-white","rounded-full","text-sm","shadow"],[1,"flex","gap-2"],["type","number","placeholder","Add year...",1,"px-4","py-2","rounded-lg","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-gray-800","dark:text-gray-200","shadow-inner","focus:outline-none","focus:ring-2","focus:ring-blue-700",3,"ngModelChange","ngModel"],[3,"goBack","confirm"],[3,"select","loadNextPageFunction","closeModal","teamElements","openModal","isClose","hasMore","elements","appEscapeClose"],[3,"message"],[3,"title"],[3,"continue","message"],[3,"cancel","title"]],template:function(n,t){n&1&&(o(0,"div",0)(1,"h2",1),c(2),a(),o(3,"div",2)(4,"div",3)(5,"div",4),y(6,"img",5),a()(),o(7,"div",6)(8,"div",7),x(),o(9,"svg",8),y(10,"path",9)(11,"path",10),a(),S(),o(12,"p",11),c(13),a(),o(14,"p",12),c(15,"Abbreviation"),a()(),o(16,"div",7),x(),o(17,"svg",8),y(18,"path",13),a(),S(),o(19,"p",11),c(20),a(),o(21,"p",12),c(22,"League"),a()(),o(23,"div",7),x(),o(24,"svg",8),y(25,"path",13),a(),S(),o(26,"p",11),c(27),a(),o(28,"p",12),c(29,"Division"),a()()()(),o(30,"div",14)(31,"div",15)(32,"p",16),c(33),a(),o(34,"p",12),c(35,"Games"),a()(),o(36,"div",15)(37,"p",17),c(38),a(),o(39,"p",12),c(40,"Wins"),a()(),o(41,"div",15)(42,"p",18),c(43),a(),o(44,"p",12),c(45,"Losses"),a()(),o(46,"div",15)(47,"p",16),c(48),j(49,"number"),a(),o(50,"p",12),c(51,"Win %"),a()(),o(52,"div",15)(53,"p",16),c(54),a(),o(55,"p",12),c(56,"Last Ten"),a()()(),o(57,"div",19)(58,"div",20)(59,"label",21),c(60,"City"),a(),o(61,"input",22),k("ngModelChange",function(m){return T(t.formInputs.city,m)||(t.formInputs.city=m),m}),a()(),o(62,"div",20)(63,"div",23)(64,"label",21),c(65,"Stadium"),a(),x(),o(66,"svg",24),y(67,"path",25),a()(),S(),o(68,"button",26),_("click",function(){return t.showStadiumsModal()}),y(69,"span",27),o(70,"span",28),c(71),a()()(),o(72,"div",29)(73,"label",21),c(74,"General Info"),a(),o(75,"textarea",30),k("ngModelChange",function(m){return T(t.formInputs.info,m)||(t.formInputs.info=m),m}),a()(),o(76,"div",29)(77,"label",21),c(78,"Championships"),a(),o(79,"div",31)(80,"ul",32),P(81,ot,2,1,"li",33,D),a(),o(83,"div",34)(84,"input",35),k("ngModelChange",function(m){return T(t.formInputs.newChampionship,m)||(t.formInputs.newChampionship=m),m}),a()()()()(),o(85,"app-action-buttons",36),_("goBack",function(){return t.goToEditMenu()})("confirm",function(){return t.confirm()}),a(),o(86,"app-select-element-modal",37),j(87,"async"),_("select",function(m){return t.selectStadium(m)})("loadNextPageFunction",function(){return t.loadNextPage()})("closeModal",function(){return t.closeStadiumModal()}),a(),f(88,at,1,1,"app-success-modal",38),f(89,rt,1,1,"app-success-modal",38),f(90,lt,1,1,"app-error-modal",39),a()),n&2&&(l(2),M(" Edit ",t.team.teamStats.name),l(3),d("ngClass",t.backgroundService.getBackgroundColor(t.team.teamStats.abbreviation)),l(),d("src",ie("assets/team-logos-new/",t.team.teamStats.league,"/",t.team.teamStats.division,"/",t.team.teamStats.abbreviation,".png"),F)("alt",O("",t.team.teamStats.name," logo")),l(7),b(t.team.teamStats.abbreviation),l(7),b(t.team.teamStats.league),l(7),b(t.team.teamStats.division),l(6),b(t.team.teamStats.totalGames),l(5),b(t.team.teamStats.wins),l(5),b(t.team.teamStats.losses),l(5),b(Y(49,32,t.team.teamStats.pct,"1.3-3")),l(6),b(t.team.teamStats.lastTen),l(7),d("placeholder",t.team.city),E("ngModel",t.formInputs.city),l(5),d("matTooltip","Select an avaiblable stadium. A stadium is available if it does not have a team assigned"),l(5),b(t.formInputs.stadiumName),l(4),E("ngModel",t.formInputs.info),d("placeholder",t.team.generalInfo),l(6),I(t.team.championships),l(3),E("ngModel",t.formInputs.newChampionship),l(2),d("teamElements",!1)("openModal",t.selectStadiumButtonClicked)("isClose",t.isClose)("hasMore",t.selector.hasMore)("elements",oe(87,35,t.selector.items$)??ne(37,nt))("appEscapeClose",t.closeStadiumModal),l(2),h(t.finish?88:-1),l(),h(t.success?89:-1),l(),h(t.error?90:-1))},dependencies:[R,L,H,W,ce,z,G,Be,Re,Z,B,U,ye,ue,ae,re],encapsulation:2})};var st=i=>({"rotate-180":i}),ct=()=>[],we=(i,r)=>r.key;function pt(i,r){if(i&1&&(o(0,"option",19),c(1),a()),i&2){let e=r.$implicit;d("value",e),l(),b(e)}}function mt(i,r){if(i&1){let e=C();o(0,"div",14)(1,"label",15),c(2),a(),o(3,"input",36),k("ngModelChange",function(t){let p=u(e).$implicit,m=s(2);return T(m.formInputs[p.key],t)||(m.formInputs[p.key]=t),g(t)}),_("ngModelChange",function(){u(e);let t=s(2);return g(t.calculateTemporaryStats())}),a()()}if(i&2){let e=r.$implicit,n=s(2);l(2),b(e.label),l(),E("ngModel",n.formInputs[e.key]),d("placeholder",n.player[e.key])}}function dt(i,r){if(i&1&&P(0,mt,4,3,"div",14,we),i&2){let e=s();I(e.pitcherEditableFields)}}function ut(i,r){if(i&1){let e=C();o(0,"div",14)(1,"label",15),c(2),a(),o(3,"input",36),k("ngModelChange",function(t){let p=u(e).$implicit,m=s(2);return T(m.formInputs[p.key],t)||(m.formInputs[p.key]=t),g(t)}),_("ngModelChange",function(){u(e);let t=s(2);return g(t.calculateTemporaryStats())}),a()()}if(i&2){let e=r.$implicit,n=s(2);l(2),b(e.label),l(),E("ngModel",n.formInputs[e.key]),d("placeholder",n.player[e.key])}}function gt(i,r){if(i&1&&P(0,ut,4,3,"div",14,we),i&2){let e=s();I(e.positionPlayerEditableFields)}}function _t(i,r){if(i&1&&(o(0,"div",37)(1,"p",38),c(2),j(3,"number"),a(),o(4,"p",39),c(5),a()()),i&2){let e=r.$implicit,n=s(2);l(2),M(" ",Y(3,2,n.formInputs[e.key]!==void 0?n.formInputs[e.key]:n.player[e.key],"1.3-3")," "),l(3),b(e.label)}}function ft(i,r){if(i&1&&P(0,_t,6,5,"div",37,we),i&2){let e=s();I(e.pitcherReadonlyFields)}}function ht(i,r){if(i&1&&(o(0,"div",37)(1,"p",38),c(2),j(3,"number"),a(),o(4,"p",39),c(5),a()()),i&2){let e=r.$implicit,n=s(2);l(2),M(" ",Y(3,2,n.formInputs[e.key]!==void 0?n.formInputs[e.key]:n.player[e.key],"1.3-3")," "),l(3),b(e.label)}}function yt(i,r){if(i&1&&P(0,ht,6,5,"div",37,we),i&2){let e=s();I(e.positionPlayerReadonlyFields)}}function Ct(i,r){if(i&1){let e=C();o(0,"app-success-modal",40),_("continue",function(){u(e);let t=s();return g(t.success=!1)}),a()}if(i&2){let e=s();d("message",e.successMessage)}}function bt(i,r){if(i&1){let e=C();o(0,"app-success-modal",40),_("continue",function(){u(e);let t=s();return g(t.goToEditMenu())}),a()}i&2&&d("message","Changes applied successfully")}function xt(i,r){i&1&&y(0,"app-loading-modal",33),i&2&&d("message","Uploading the image...")}function vt(i,r){if(i&1){let e=C();o(0,"app-remove-confirmation-modal",41),_("confirm",function(){u(e);let t=s();return g(t.deletePlayer())})("cancel",function(){u(e);let t=s();return g(t.showDeleteConfirmationModal=!1)}),a()}if(i&2){let e=s();d("title","Are you sure you want to remove "+e.player.name+" from the league?")("contentMessage","Deleting a player implies that he retires from the MLB. Are you sure you want to proceed?")("buttonContent","Yes, Remove")("isDelete",!0)}}function St(i,r){if(i&1){let e=C();o(0,"app-error-modal",42),_("cancel",function(){u(e);let t=s();return g(t.error=!1)}),a()}if(i&2){let e=s();d("title",e.errorMessage)}}var Se=class i extends q{constructor(e,n,t,p,m){super(e);this.playerService=n;this.teamService=t;this.selector=p;this.validationService=m}player;backToMenu=new A;selectTeamButtonClicked=!1;isClose=!1;pageSize=10;positionPlayerFieldMap={number:"playerNumber",position:"position",teamName:"teamName",atBats:"atBats",walks:"walks",hits:"hits",doubles:"doubles",triples:"triples",homeRuns:"homeRuns",rbis:"rbis",average:"average",obp:"obp",ops:"ops",slugging:"slugging"};pitcherFieldMap={number:"playerNumber",position:"position",teamName:"teamName",games:"games",wins:"wins",losses:"losses",era:"era",inningsPitched:"inningsPitched",totalStrikeouts:"totalStrikeouts",walks:"walks",hitsAllowed:"hitsAllowed",runsAllowed:"runsAllowed",whip:"whip",saves:"saves",saveOpportunities:"saveOpportunities"};positionPlayerEditableFields=[{key:"atBats",label:"At Bats"},{key:"walks",label:"Walks"},{key:"hits",label:"Hits"},{key:"doubles",label:"Doubles"},{key:"triples",label:"Triples"},{key:"homeRuns",label:"Home Runs"},{key:"rbis",label:"RBIs"}];positionPlayerReadonlyFields=[{key:"average",label:"AVG"},{key:"obp",label:"OBP"},{key:"ops",label:"OPS"},{key:"slugging",label:"SLG"}];pitcherEditableFields=[{key:"games",label:"Games"},{key:"wins",label:"Wins"},{key:"losses",label:"Losses"},{key:"inningsPitched",label:"Innings Pitched"},{key:"totalStrikeouts",label:"Strikeouts"},{key:"walks",label:"Walks"},{key:"hitsAllowed",label:"Hits Allowed"},{key:"runsAllowed",label:"Runs Allowed"},{key:"saves",label:"Saves"},{key:"saveOpportunities",label:"Save Opportunities"}];pitcherReadonlyFields=[{key:"era",label:"ERA"},{key:"whip",label:"WHIP"}];availablePositions=["C","1B","2B","3B","SS","LF","CF","RF","DH","SP","CP","RP"];maxPictureSize=1*1024*1024;showDeleteConfirmationModal=!1;isPositionInputOpen=!1;ngOnInit(){this.hydrateForm(),this.selector.setLabelFn(e=>e.name)}ngOnChanges(e){e.player&&e.player.currentValue&&this.hydrateForm()}getFieldMap(){return this.validationService.isPositionPlayer(this.player)?this.positionPlayerFieldMap:this.pitcherFieldMap}getEntity(){return this.player}updateEntityService(e){return this.validationService.isPositionPlayer(this.player)?this.playerService.updatePositionPlayer(this.player.name,e):this.playerService.updatePitcher(this.player.name,e)}showTeamsModal(){this.selectTeamButtonClicked=!0,this.selector.reset(),this.selector.loadPage(0,this.pageSize,this.teamService.getAvailableTeams.bind(this.teamService))}loadNextPage(){this.selector.loadNextPage(this.pageSize,this.teamService.getAvailableTeams.bind(this.teamService))}selectTeam(e){let n=e;this.resetState(),this.success=!0,this.successMessage="Team Selected",this.formInputs.teamName=this.selector.select(n,t=>t.name)}closeTeamModal=()=>{this.isClose=!0,setTimeout(()=>{this.selectTeamButtonClicked=!1,this.isClose=!1},300)};uploadPicture(e,n){if(this.resetState(),this.loading=!0,n.size>this.maxPictureSize){this.error=!0,this.errorMessage="The picture must be less than 1MB",this.loading=!1;return}this.playerService.updatePicture(e,n).pipe(K(()=>this.loading=!1)).subscribe({next:t=>{this.success=!0,this.successMessage="Picture uploaded successfully",this.player.picture=t},error:()=>{this.error=!0,this.errorMessage="An error occurred trying to store the picture"}})}handleFileUpload(e){let n=e.target;if(n.files&&n.files.length>0){let t=n.files[0];if(t.size>this.maxPictureSize){this.error=!0,this.errorMessage="The picture must be less than 1MB",this.loading=!1;return}this.uploadPicture(this.player.name,t)}}deletePlayer(){this.resetState(),this.playerService.deletePlayer(this.player.name).subscribe({next:()=>{this.success=!0,this.successMessage=this.player.name+" successfully deleted"},error:()=>{this.error=!0,this.errorMessage="An error occurred during the deletion process"}})}togglePositionInput(e){this.isPositionInputOpen=e}goToEditMenu(){this.finish=!1,this.backToMenu.emit()}calculateTemporaryStats(){this.validationService.isPositionPlayer(this.player)?this.calculatePositionPlayerNonEditableStats():this.calculatePitcherNonEditableStats()}decimalFormatted(e,n){return Math.floor(e*n)/n}inningsFormatted(e){let n=Math.floor(e),t=parseFloat((e-n).toFixed(1));return Math.abs(t-.1)<.01?n+1/3:Math.abs(t-.2)<.01?n+2/3:e}calculatePositionPlayerNonEditableStats(){let{atBats:e=0,hits:n=0,walks:t=0,doubles:p=0,triples:m=0,homeRuns:v=0}=this.formInputs;if(e===0){this.formInputs.average=0,this.formInputs.obp=0,this.formInputs.slugging=0,this.formInputs.ops=0;return}this.formInputs.average=this.decimalFormatted(n/e,1e3);let V=Number(e)+Number(t),Ge=(Number(n)+Number(t))/V;this.formInputs.obp=V===0?0:this.decimalFormatted(Ge,1e3);let He=Number(n)+2*Number(p)+3*Number(m)+4*Number(v);this.formInputs.slugging=this.decimalFormatted(He/e,1e3);let Ze=Number(this.formInputs.obp)+Number(this.formInputs.slugging);this.formInputs.ops=this.decimalFormatted(Ze,1e3)}calculatePitcherNonEditableStats(){let{inningsPitched:e=0,runsAllowed:n=0,hitsAllowed:t=0,walks:p=0}=this.formInputs,m=this.inningsFormatted(Number(e));if(m===0){this.formInputs.era=0,this.formInputs.whip=0;return}let v=Number(n)*9/m;this.formInputs.era=this.decimalFormatted(v,100);let V=(Number(t)+Number(p))/m;this.formInputs.whip=this.decimalFormatted(V,100)}static \u0275fac=function(n){return new(n||i)(w($),w(Ae),w(le),w(_e),w(ge))};static \u0275cmp=N({type:i,selectors:[["app-edit-player"]],inputs:{player:"player"},outputs:{backToMenu:"backToMenu"},features:[te,Ve],decls:58,vars:27,consts:[[1,"w-full","max-w-5xl","team-section-container","space-y-12","animate-fade-in"],[1,"text-xl","text-center","app-page-titles"],[1,"flex","justify-start","mr-24","mt-24"],[1,"grid","grid-cols-1","lg:grid-cols-3","items-start","gap-4"],[1,"flex","justify-center","lg:justify-start"],[1,"p-4","rounded-xl","shadow-md","border","border-gray-300","dark:border-gray-600","bg-gray-50","dark:bg-gray-700","flex","flex-col","items-center","space-y-4"],[1,"w-36","h-36","object-contain","rounded-full",3,"src","alt"],[1,"flex","flex-col","items-center","space-y-2","w-full"],[1,"w-full"],["type","file","accept",".webp",1,"hidden",3,"change"],[1,"px-3","py-2","ml-2.5","app-button","hover:scale-[1.02]"],[1,"text-xs","text-gray-600","dark:text-gray-300","text-center"],[1,"font-semibold"],[1,"lg:col-span-2","grid","grid-cols-2","md:grid-cols-3","gap-4"],[1,"flex","flex-col"],[1,"text-sm","font-medium","text-gray-600","dark:text-gray-300","mb-1"],["type","number",1,"px-3","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-center","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel","placeholder"],[1,"relative","w-full"],[1,"appearance-none","w-full","pr-10","px-3","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","focus","blur","change","ngModel"],[3,"value"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"absolute","right-3","top-1/2","-translate-y-1/2","w-5","h-5","text-gray-500","pointer-events-none","transition-transform","duration-300","ease-in-out",3,"ngClass"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["type","button",1,"px-3","py-2","app-button","h-10","group","tracking-widest",3,"click"],[1,"app-button-bright"],[1,"app-button-texts","!text-sm"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-4","gap-6"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-6","justify-items-center","mt-10"],[1,"flex","flex-row","sm:flex-row","justify-between","items-center","gap-4","mt-12"],[1,"flex","justify-start","gap-4","pt-6"],[1,"px-4","py-2","w-full","sm:w-auto","app-red-buttons","group","tracking-widest",3,"click"],[1,"app-button-texts"],[3,"goBack","confirm"],[3,"select","loadNextPageFunction","closeModal","teamElements","openModal","isClose","hasMore","elements","appEscapeClose"],[3,"message"],[3,"title","contentMessage","buttonContent","isDelete"],[3,"title"],["type","number",1,"px-3","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel","placeholder"],[1,"w-full","p-4","bg-gray-50","dark:bg-gray-700","rounded-xl","shadow","text-center"],[1,"text-lg","font-bold","text-gray-800","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[3,"continue","message"],[3,"confirm","cancel","title","contentMessage","buttonContent","isDelete"],[3,"cancel","title"]],template:function(n,t){n&1&&(o(0,"div",0)(1,"h2",1),c(2),a(),o(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),y(7,"img",6),o(8,"div",7)(9,"label",8)(10,"input",9),_("change",function(m){return t.handleFileUpload(m)}),a(),o(11,"span",10),c(12," Change Picture "),a()(),o(13,"p",11),c(14," Only files under "),o(15,"span",12),c(16,"1MB"),a()()()()(),o(17,"div",13)(18,"div",14)(19,"label",15),c(20,"Number"),a(),o(21,"input",16),k("ngModelChange",function(m){return T(t.formInputs.number,m)||(t.formInputs.number=m),m}),a()(),o(22,"div",14)(23,"label",15),c(24,"Position"),a(),o(25,"div",17)(26,"select",18),k("ngModelChange",function(m){return T(t.formInputs.position,m)||(t.formInputs.position=m),m}),_("focus",function(){return t.togglePositionInput(!0)})("blur",function(){return t.togglePositionInput(!1)})("change",function(){return t.togglePositionInput(!1)}),P(27,pt,2,2,"option",19,D),a(),x(),o(29,"svg",20),y(30,"path",21),a()()(),S(),o(31,"div",14)(32,"label",15),c(33,"Team"),a(),o(34,"button",22),_("click",function(){return t.showTeamsModal()}),y(35,"span",23),o(36,"span",24),c(37),a()()()()()(),o(38,"div",25),f(39,dt,2,0)(40,gt,2,0),a(),o(41,"div",26),f(42,ft,2,0)(43,yt,2,0),a(),o(44,"div",27)(45,"div",28)(46,"button",29),_("click",function(){return t.showDeleteConfirmationModal=!0}),y(47,"span",23),o(48,"span",30),c(49,"Delete Player"),a()()(),o(50,"app-action-buttons",31),_("goBack",function(){return t.goToEditMenu()})("confirm",function(){return t.confirm()}),a()(),o(51,"app-select-element-modal",32),j(52,"async"),_("select",function(m){return t.selectTeam(m)})("loadNextPageFunction",function(){return t.loadNextPage()})("closeModal",function(){return t.closeTeamModal()}),a(),f(53,Ct,1,1,"app-success-modal",33),f(54,bt,1,1,"app-success-modal",33),f(55,xt,1,1,"app-loading-modal",33),f(56,vt,1,4,"app-remove-confirmation-modal",34),f(57,St,1,1,"app-error-modal",35),a()),n&2&&(l(2),M("Edit ",t.player.name),l(5),d("alt",O("",t.player.name," picture"))("src",t.player.picture.url,F),l(14),E("ngModel",t.formInputs.number),d("placeholder",t.player.playerNumber),l(5),E("ngModel",t.formInputs.position),l(),I(t.availablePositions),l(2),d("ngClass",Q(24,st,t.isPositionInputOpen)),l(8),b(t.formInputs.teamName),l(2),h(t.validationService.isPitcher(t.player)?39:40),l(3),h(t.validationService.isPitcher(t.player)?42:43),l(9),d("teamElements",!0)("openModal",t.selectTeamButtonClicked)("isClose",t.isClose)("hasMore",t.selector.hasMore)("elements",oe(52,22,t.selector.items$)??ne(26,ct))("appEscapeClose",t.closeTeamModal),l(2),h(t.success?53:-1),l(),h(t.finish?54:-1),l(),h(t.loading?55:-1),l(),h(t.showDeleteConfirmationModal?56:-1),l(),h(t.error?57:-1))},dependencies:[R,L,H,me,de,W,ce,pe,z,G,ye,U,Z,B,fe,he,ue,ae,re],encapsulation:2})};var ze=i=>({"rotate-180":i});function wt(i,r){if(i&1){let e=C();o(0,"div",6)(1,"select",18),k("ngModelChange",function(t){u(e);let p=s(2);return T(p.playerType,t)||(p.playerType=t),g(t)}),_("focus",function(){u(e);let t=s(2);return g(t.togglePlayerType(!0))})("blur",function(){u(e);let t=s(2);return g(t.togglePlayerType(!1))})("change",function(){u(e);let t=s(2);return g(t.togglePlayerType(!1))}),o(2,"option",19),c(3,"Position Player"),a(),o(4,"option",20),c(5,"Pitcher"),a()(),x(),o(6,"svg",11),y(7,"path",12),a()()}if(i&2){let e=s(2);l(),E("ngModel",e.playerType),l(5),d("ngClass",Q(2,ze,e.isPlayerTypeOpen))}}function Mt(i,r){if(i&1&&(o(0,"p",15),c(1),a()),i&2){let e=s(2);l(),M(" ",e.noResultsMessage," ")}}function Et(i,r){if(i&1&&(o(0,"div",23),y(1,"img",31),a()),i&2){let e=s().$implicit,n=s(3);d("ngClass",n.backgroundService.getBackgroundColor(e.teamStats.abbreviation)),l(),d("src",ie("assets/team-logos-new/",e.teamStats.league,"/",e.teamStats.division,"/",e.teamStats.abbreviation,".png"),F)("alt",Fe(e.teamStats.abbreviation))}}function Tt(i,r){i&1&&(x(),o(0,"svg",24)(1,"g"),y(2,"path",32)(3,"path",33)(4,"polygon",34)(5,"polygon",35)(6,"polygon",36)(7,"polygon",37)(8,"path",38),a()())}function kt(i,r){if(i&1&&(o(0,"div",25),y(1,"img",39),a()),i&2){let e=s().$implicit;l(),d("alt",O("",e.name," picture"))("src",e.picture.url,F)}}function Pt(i,r){if(i&1&&c(0),i&2){let e=s().$implicit;M(" ",e.teamStats.name," ")}}function It(i,r){if(i&1&&c(0),i&2){let e=s().$implicit;M(" ",e.name," ")}}function Vt(i,r){if(i&1&&(o(0,"span",27),c(1),a()),i&2){let e=s().$implicit;l(),M("(",e.position,")")}}function Ft(i,r){if(i&1){let e=C();o(0,"div",21)(1,"div",22),f(2,Et,2,7,"div",23)(3,Tt,9,0,":svg:svg",24)(4,kt,2,3,"div",25),o(5,"span",26),f(6,Pt,1,1)(7,It,1,1),f(8,Vt,2,1,"span",27),a()(),o(9,"button",28),_("click",function(){let t=u(e).$implicit,p=s(3);return g(p.edit(t))}),y(10,"span",29),o(11,"span",30),c(12,"EDIT"),a()()()}if(i&2){let e=r.$implicit,n=s(3);l(2),h(n.validationService.isTeamInfo(e)?2:n.validationService.isStadium(e)?3:n.validationService.isPositionPlayer(e)||n.validationService.isPitcher(e)?4:-1),l(4),h(n.validationService.isTeamInfo(e)?6:7),l(2),h(n.validationService.isPitcher(e)||n.validationService.isPositionPlayer(e)?8:-1)}}function Nt(i,r){if(i&1&&P(0,Ft,13,3,"div",21,D),i&2){let e=s(2);I(e.searchResults)}}function Rt(i,r){if(i&1){let e=C();o(0,"button",40),_("click",function(){u(e);let t=s(2);return g(t.loadNextPage())}),c(1," LOAD MORE "),a()}}function Bt(i,r){if(i&1){let e=C();o(0,"app-error-modal",41),_("cancel",function(){u(e);let t=s(2);return g(t.error=!1)}),a()}if(i&2){let e=s(2);d("title",e.errorMessage)}}function jt(i,r){if(i&1){let e=C();o(0,"h1",4),c(1," Edit Menu "),a(),o(2,"div",5)(3,"div",6)(4,"select",7),k("ngModelChange",function(t){u(e);let p=s();return T(p.searchType,t)||(p.searchType=t),g(t)}),_("focus",function(){u(e);let t=s();return g(t.toggleSearchType(!0))})("blur",function(){u(e);let t=s();return g(t.toggleSearchType(!1))})("change",function(){u(e);let t=s();return t.dynamicSearch(),g(t.toggleSearchType(!1))}),o(5,"option",8),c(6,"Player"),a(),o(7,"option",9),c(8,"Team"),a(),o(9,"option",10),c(10,"Stadium"),a()(),x(),o(11,"svg",11),y(12,"path",12),a()(),f(13,wt,8,4,"div",6),S(),o(14,"input",13),k("ngModelChange",function(t){u(e);let p=s();return T(p.searchQuery,t)||(p.searchQuery=t),g(t)}),_("input",function(){u(e);let t=s();return g(t.dynamicSearch())}),a()(),o(15,"div",14),f(16,Mt,2,1,"p",15),f(17,Nt,2,0),a(),f(18,Rt,2,0,"button",16),f(19,Bt,1,1,"app-error-modal",17)}if(i&2){let e=s();l(4),E("ngModel",e.searchType),l(7),d("ngClass",Q(8,ze,e.isSearchTypeOpen)),l(2),h(e.searchType==="player"?13:-1),l(),E("ngModel",e.searchQuery),l(2),h(e.noResultsMessage&&e.searchResults.length===0?16:-1),l(),h(e.searchResults?17:-1),l(),h(e.hasMore&&e.searchResults.length>0?18:-1),l(),h(e.error?19:-1)}}function At(i,r){if(i&1){let e=C();o(0,"app-edit-stadium",42),_("backToMenu",function(){u(e);let t=s();return g(t.currentView=null)}),a()}if(i&2){let e=s();d("stadium",e.selectedResult)}}function Dt(i,r){if(i&1){let e=C();o(0,"app-edit-team",43),_("backToMenu",function(){u(e);let t=s();return g(t.currentView=null)}),a()}if(i&2){let e=s();d("team",e.selectedResult)}}function Ot(i,r){if(i&1){let e=C();o(0,"app-edit-player",44),_("backToMenu",function(){u(e);let t=s();return g(t.currentView=null)}),a()}if(i&2){let e=s();d("player",e.selectedResult)}}var We=class i{searchService=ee(be);backgroundService=ee(se);validationService=ee(ge);searchQuery="";searchType="team";playerType=null;searchResults=[];searchSubject=new Te;error=!1;errorMessage="";currentPage=0;pageSize=10;hasMore=!0;lastSearch="";noResultsMessage="";isSearchTypeOpen=!1;isPlayerTypeOpen=!1;currentView=null;selectedResult;ngOnInit(){this.searchSubject.pipe(ke(200),Pe()).subscribe(()=>{this.performSearch(0)})}dynamicSearch(){this.searchSubject.next(this.searchQuery)}performSearch(r=0){if(!this.searchQuery.trim()){this.searchResults=[],this.hasMore=!1,this.noResultsMessage="";return}if(this.searchType==="player"&&!this.playerType){this.error=!0,this.errorMessage="Please select the type of player you want to edit";return}let e=`${this.searchType}-${this.playerType??""}`;(r===0||e!==this.lastSearch)&&(this.searchResults=[],this.currentPage=0,this.hasMore=!0,this.lastSearch=e),this.searchService.search(this.searchType,this.searchQuery,r,this.pageSize,this.playerType??void 0).subscribe({next:t=>{t.content.length===0?this.noResultsMessage="No results were found":this.noResultsMessage="",r===0?this.searchResults=t.content:this.searchResults=[...this.searchResults,...t.content],this.currentPage=t.page.number,this.hasMore=t.page.totalPages>this.currentPage+1},error:t=>{this.error=!0,this.errorMessage="An error occur during the search"}})}loadNextPage(){this.hasMore&&this.performSearch(this.currentPage+1)}edit(r){this.validationService.isTeamInfo(r)?this.currentView="team":this.validationService.isStadium(r)?this.currentView="stadium":(this.validationService.isPositionPlayer(r)||this.validationService.isPitcher(r))&&(this.currentView="player"),this.selectedResult=r}toggleSearchType(r){this.isSearchTypeOpen=r}togglePlayerType(r){this.isPlayerTypeOpen=r}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=N({type:i,selectors:[["app-edit-menu"]],decls:5,vars:1,consts:[[1,"app-background","min-h-screen","text-gray-900","dark:text-white","px-6","py-16","space-y-12","flex","flex-col","items-center"],[3,"stadium"],[3,"team"],[3,"player"],[1,"app-page-titles"],[1,"w-full","max-w-4xl","flex","flex-col","md:flex-row","items-center","gap-4"],[1,"relative","w-full","md:w-auto"],[1,"w-full","md:min-w-[12rem]","px-4","py-3","pr-10","rounded-lg","shadow-md","text-lg","bg-white","dark:bg-slate-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500","cursor-pointer","appearance-none",3,"ngModelChange","focus","blur","change","ngModel"],["value","player"],["value","team"],["value","stadium"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"absolute","right-3","top-1/2","-translate-y-1/2","w-5","h-5","text-gray-500","pointer-events-none","transition-transform","duration-300","ease-in-out",3,"ngClass"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["type","text","placeholder","Search a Team, a Player or a Stadium to edit...",1,"flex-grow","px-4","py-3","rounded-lg","shadow-md","text-lg","bg-white","dark:bg-slate-800","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","input","ngModel"],[1,"w-full","max-w-4xl","space-y-6"],[1,"text-xl","font-medium","text-black","dark:text-white"],[1,"mt-6","px-6","py-3","text-lg","font-semibold","text-white","rounded-lg","shadow-md","bg-gradient-to-br","from-green-600","via-green-700","to-green-800","hover:brightness-110","hover:shadow-lg","transition-all","duration-300","ease-out","cursor-pointer","dark:from-green-900","dark:via-green-800","dark:to-green-700"],[3,"title"],["id","player-type",1,"w-full","md:min-w-[12rem]","px-4","py-3","pr-10","rounded-lg","shadow-md","text-lg","bg-white","dark:bg-slate-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500","cursor-pointer","appearance-none",3,"ngModelChange","focus","blur","change","ngModel"],["value","position"],["value","pitcher"],[1,"bg-white","dark:bg-slate-700","rounded-lg","shadow-md","p-6","flex","justify-between","items-center"],[1,"flex","items-center","gap-5"],[1,"team-logo-container",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",1,"w-9","h-9","fill-current","text-black","dark:text-white"],[1,"w-14","h-14","rounded-full","flex","items-center","justify-center","overflow-hidden","shadow-sm"],[1,"text-xl","font-bold"],[1,"text-base","font-medium"],[1,"px-4","py-2","app-success-button","group","tracking-widest",3,"click"],[1,"app-button-bright"],[1,"app-button-texts"],[1,"w-9","h-9","object-contain",3,"src","alt"],["d","M450.338,288.096L331.012,393.623c-20.722,18.317-47.358,28.394-75.014,28.394   c-27.656,0-54.29-10.077-75.014-28.394L61.972,288.37c-22.726-21.301-44.765-42.132-59.222-64.937l4.105,52.848   c1.08,13.798,7.209,26.723,17.226,36.298l147.887,156.668c40.09,39.166,126.771,39.166,166.861,0l147.906-156.668   c10.018-9.575,16.146-22.5,17.206-36.298l3.948-50.638C493.474,247.524,472.201,267.599,450.338,288.096z"],["d","M71.242,277.881l119.033,105.244c37.536,33.186,93.929,33.186,131.465,0l119.013-105.244   c62.247-58.347,97.249-97.239,47.888-168.088C432.7,29.524,318.225,13.378,255.998,13.378c-62.227,0-176.721,16.145-232.643,96.414   C-26.007,180.642,9.015,219.534,71.242,277.881z M91.867,217.314c2.71-8.81,6.364-17.256,10.862-25.28   c4.498-7.994,9.861-15.576,15.93-22.638c6.088-7.051,12.905-13.612,20.33-19.593c7.68-6.148,16.028-11.687,24.945-16.548   c8.898-4.842,18.366-8.987,28.285-12.355c9.9-3.369,20.311-5.962,31.036-7.71c10.744-1.729,21.841-2.613,33.215-2.544   c11.373,0.079,22.471,1.1,33.196,2.967c10.744,1.866,21.115,4.606,30.995,8.093c9.919,3.496,19.347,7.768,28.226,12.718   c8.878,4.969,17.186,10.617,24.808,16.864c7.406,6.069,14.182,12.718,20.193,19.838c6.03,7.15,11.314,14.791,15.733,22.844   c4.459,8.072,8.033,16.578,10.666,25.416c2.632,8.869,4.301,18.071,4.89,27.559L281.552,370.358   c-14.987,12.875-37.202,12.757-52.052-0.286L86.799,244.814C87.448,235.336,89.176,226.143,91.867,217.314z"],["points","275.934,159.821 256.41,143.508 236.768,159.576 256.273,176.055"],["points","143.86,235.749 123.472,252.435 142.957,269.484 163.365,252.68"],["points","368.921,270.908 388.544,254.114 368.274,237.163 348.729,253.859"],["points","241.266,355.547 255.566,368.099 270.062,355.734 270.062,339.47 241.364,339.303"],["d","M244.861,322.165c3.516-0.599,7.149-0.904,10.902-0.865c3.712,0.02,7.346,0.364,10.862,1.012   c3.535,0.639,6.933,1.572,10.174,2.77c3.222,1.208,6.305,2.662,9.173,4.351c2.867,1.69,5.578,3.604,8.033,5.726l57.336-49.165   c-2.455-2.072-4.695-4.35-6.64-6.796c-1.944-2.426-3.634-5.028-5.008-7.759c-1.395-2.73-2.456-5.588-3.182-8.544   c-0.766-2.946-1.179-6.001-1.199-9.124c-0.039-3.114,0.276-6.148,0.962-9.075c0.669-2.916,1.67-5.715,2.967-8.396   c1.296-2.671,2.887-5.196,4.753-7.563c1.847-2.376,3.988-4.576,6.364-6.58l-56.982-47.701c-2.358,1.974-4.93,3.751-7.739,5.313   c-2.79,1.562-5.775,2.888-8.917,3.988c-3.143,1.09-6.444,1.925-9.861,2.484c-3.457,0.57-6.974,0.836-10.607,0.816   c-3.634-0.02-7.17-0.344-10.587-0.952c-3.418-0.599-6.737-1.483-9.861-2.613c-3.123-1.129-6.069-2.494-8.858-4.095   c-2.751-1.591-5.323-3.398-7.661-5.412l-57.415,46.974c2.357,2.042,4.479,4.272,6.345,6.659c1.846,2.386,3.438,4.94,4.715,7.631   c1.296,2.691,2.278,5.509,2.946,8.436c0.628,2.937,0.962,5.971,0.904,9.074c-0.059,3.123-0.492,6.168-1.277,9.124   c-0.766,2.937-1.865,5.785-3.28,8.496c-1.414,2.71-3.123,5.293-5.107,7.71c-1.983,2.416-4.203,4.654-6.698,6.698l57.042,49.891   c2.475-2.092,5.166-3.977,8.033-5.628c2.888-1.66,5.972-3.063,9.212-4.233C237.927,323.668,241.325,322.764,244.861,322.165z    M236.749,247.908l36.515,0.235v8.731l-36.594-0.226L236.749,247.908z"],[1,"w-12","h-12","object-contain",3,"src","alt"],[1,"mt-6","px-6","py-3","text-lg","font-semibold","text-white","rounded-lg","shadow-md","bg-gradient-to-br","from-green-600","via-green-700","to-green-800","hover:brightness-110","hover:shadow-lg","transition-all","duration-300","ease-out","cursor-pointer","dark:from-green-900","dark:via-green-800","dark:to-green-700",3,"click"],[3,"cancel","title"],[3,"backToMenu","stadium"],[3,"backToMenu","team"],[3,"backToMenu","player"]],template:function(e,n){e&1&&(o(0,"div",0),f(1,jt,20,10)(2,At,1,1,"app-edit-stadium",1)(3,Dt,1,1,"app-edit-team",2)(4,Ot,1,1,"app-edit-player",3),a()),e&2&&(l(),h(n.currentView?n.currentView==="stadium"&&n.validationService.isStadium(n.selectedResult)?2:n.currentView==="team"&&n.validationService.isTeamInfo(n.selectedResult)?3:n.currentView==="player"&&(n.validationService.isPositionPlayer(n.selectedResult)||n.validationService.isPitcher(n.selectedResult))?4:-1:1))},dependencies:[R,L,H,me,de,W,pe,z,G,B,xe,ve,Se],encapsulation:2})};export{We as EditMenuComponent};
