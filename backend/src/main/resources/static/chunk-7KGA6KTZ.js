import{a as Q,c as $,e as U,i as q,j as K,k as J,n as X}from"./chunk-BR4V5UBJ.js";import{a as A}from"./chunk-2DFG6UGS.js";import{Ab as c,Bb as G,Cb as V,Da as N,Eb as b,Fa as R,Fb as v,Ga as s,Gb as w,Hb as O,Jb as F,La as P,N as B,R as L,Ra as x,Wa as z,X as f,Y as C,Z as y,_ as T,db as m,fb as u,gb as D,hb as H,ib as j,jb as g,kb as o,kc as S,lb as a,mb as h,oc as M,qb as _,rb as p,tb as d,uc as W}from"./chunk-FU6UCUUO.js";var k=class n{title="";cancel=new z;isClosing=!1;handleCancel(){this.isClosing=!0,setTimeout(()=>{this.cancel.emit(),this.isClosing=!1},300)}handleEscape(t){t.key==="Escape"&&this.handleCancel()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-error-modal"]],hostBindings:function(e,i){e&1&&p("keydown",function(l){return i.handleEscape(l)},R)},inputs:{title:"title"},outputs:{cancel:"cancel"},decls:14,vars:2,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50","backdrop-blur-sm",3,"ngClass"],[1,"bg-white","dark:bg-gray-800","rounded-2xl","shadow-2xl","w-11/12","max-w-md","p-6","text-center","relative","transform","transition-all","animate-scaleIn"],["type","button",1,"absolute","top-3","right-3","text-gray-400","cursor-pointer","hover:text-gray-700","dark:hover:text-gray-200","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"mb-4"],[1,"w-12","h-12","mx-auto","text-red-500","dark:text-red-400"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"w-12","h-12","mx-auto"],["fill-rule","evenodd","clip-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"],[1,"text-lg","font-semibold","text-gray-800","dark:text-gray-100","mb-2"],[1,"flex","justify-center","gap-4"],[1,"px-4","py-2","text-sm","font-medium","cursor-pointer","text-white","bg-gradient-to-r","from-red-500","to-rose-600","rounded-lg","shadow-md","hover:scale-105","hover:shadow-lg","transition",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),p("click",function(){return i.handleCancel()}),y(),o(3,"svg",3),h(4,"path",4),a()(),T(),o(5,"div",5)(6,"div",6),y(),o(7,"svg",7),h(8,"path",8),a()()(),T(),o(9,"h2",9),c(10),a(),o(11,"div",10)(12,"button",11),p("click",function(){return i.handleCancel()}),c(13," Go Back "),a()()()()),e&2&&(g("ngClass",i.isClosing?"animate-fade-out-down":"animate-fade-in-up"),s(10),G(i.title))},dependencies:[M,S],encapsulation:2})};var E=class n{constructor(t){this.http=t}search(t,e,i=0,r=10,l){let I=`/api/searchs/${t}?query=${encodeURIComponent(e)}&page=${i}&size=${r}`;return t==="player"&&l&&(I+=`&playerType=${encodeURIComponent(l)}`),this.http.get(I)}static \u0275fac=function(e){return new(e||n)(L(W))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function ne(n,t){if(n&1){let e=_();o(0,"select",4),w("ngModelChange",function(r){f(e);let l=d();return v(l.playerType,r)||(l.playerType=r),C(r)}),o(1,"option",13),c(2,"Position Player"),a(),o(3,"option",14),c(4,"Pitcher"),a()()}if(n&2){let e=d();b("ngModel",e.playerType)}}function oe(n,t){if(n&1&&(o(0,"div",17),h(1,"img",22),a()),n&2){let e=d().$implicit,i=d(2);g("ngClass",i.getBackgroundColor(e.abbreviation)),s(),g("src",F("assets/team-logos-new/",e.league,"/",e.division,"/",e.abbreviation,".png"),N)("alt",O(e.abbreviation))}}function re(n,t){n&1&&(y(),o(0,"svg",18)(1,"g"),h(2,"path",23)(3,"path",24)(4,"polygon",25)(5,"polygon",26)(6,"polygon",27)(7,"polygon",28)(8,"path",29),a()())}function ae(n,t){if(n&1&&(o(0,"span",20),c(1),a()),n&2){let e=d().$implicit;s(),V("(",e.position,")")}}function le(n,t){if(n&1){let e=_();o(0,"div",15)(1,"div",16),m(2,oe,2,7,"div",17)(3,re,9,0,":svg:svg",18),o(4,"span",19),c(5),m(6,ae,2,1,"span",20),a()(),o(7,"button",21),p("click",function(){let r=f(e).$implicit,l=d(2);return C(l.edit(r))}),c(8," EDIT "),a()()}if(n&2){let e=t.$implicit,i=d(2);s(2),u(i.isTeam(e)?2:i.isStadium(e)?3:-1),s(3),V(" ",e.name," "),s(),u(i.isPitcher(e)||i.isPositionPlayer(e)?6:-1)}}function ce(n,t){if(n&1&&H(0,le,9,3,"div",15,D),n&2){let e=d();j(e.searchResults)}}function se(n,t){if(n&1){let e=_();o(0,"button",30),p("click",function(){f(e);let r=d();return C(r.loadNextPage())}),c(1," LOAD MORE "),a()}}function de(n,t){if(n&1){let e=_();o(0,"app-error-modal",31),p("cancel",function(){f(e);let r=d();return C(r.error=!1)}),a()}if(n&2){let e=d();g("title",e.errorMessage)}}var Z=class n{constructor(t,e){this.searchService=t;this.backgroundService=e}searchQuery="";searchType="team";playerType=null;searchResults=[];error=!1;errorMessage="";currentPage=0;pageSize=10;hasMore=!0;lastSearch="";ngOnInit(){}performSearch(t=0){if(!this.searchQuery.trim())return;if(this.searchType==="player"&&!this.playerType){this.error=!0,this.errorMessage="Please select the type of player";return}let e=`${this.searchType}-${this.playerType??""}`;(t===0||e!==this.lastSearch)&&(this.searchResults=[],this.currentPage=0,this.hasMore=!0,this.lastSearch=e),this.searchService.search(this.searchType,this.searchQuery,t,this.pageSize,this.playerType??void 0).subscribe({next:r=>{t===0?this.searchResults=r.content:this.searchResults=[...this.searchResults,...r.content],this.currentPage=r.page.number,this.hasMore=r.page.totalPages>this.currentPage+1},error:r=>{this.error=!0,this.errorMessage="An error occur during the search"}})}loadNextPage(){this.hasMore&&this.performSearch(this.currentPage+1)}edit(t){console.log("Edit:",t)}isPitcher(t){return"era"in t&&"inningsPitched"in t}isPositionPlayer(t){return"atBats"in t&&"homeRuns"in t}isTeam(t){return"division"in t&&"league"in t}isStadium(t){return"openingDate"in t&&"pictures"in t}getBackgroundColor(t){return this.backgroundService.getBackgroundColor(t)}static \u0275fac=function(e){return new(e||n)(P(E),P(A))};static \u0275cmp=x({type:n,selectors:[["app-edit-menu"]],decls:19,vars:6,consts:[[1,"app-background","min-h-screen","text-gray-900","dark:text-white","px-6","py-16","space-y-12","flex","flex-col","items-center"],[1,"app-page-titles"],[1,"w-full","max-w-4xl","flex","flex-col","md:flex-row","items-center","gap-4"],["type","text","placeholder","Search a Team, a Player or a Stadium to edit...",1,"flex-grow","px-4","py-3","rounded-lg","shadow-md","text-lg","bg-white","dark:bg-slate-800","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"px-4","py-3","rounded-lg","shadow-md","text-lg","bg-white","dark:bg-slate-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","player"],["value","team"],["value","stadium"],[1,"px-4","py-3","rounded-lg","shadow-md","text-lg","bg-white","dark:bg-slate-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModel"],[1,"px-6","py-3","text-lg","font-semibold","text-white","rounded-lg","shadow-md","bg-gradient-to-br","from-sky-600","via-sky-700","to-sky-800","hover:brightness-125","hover:shadow-lg","transition-all","duration-300","ease-out","cursor-pointer","dark:from-indigo-900","dark:via-blue-900","dark:to-sky-800",3,"click"],[1,"w-full","max-w-4xl","space-y-6"],[1,"mt-6","px-6","py-3","text-lg","font-semibold","text-white","rounded-lg","shadow-md","bg-gradient-to-br","from-green-600","via-green-700","to-green-800","hover:brightness-110","hover:shadow-lg","transition-all","duration-300","ease-out","cursor-pointer","dark:from-green-900","dark:via-green-800","dark:to-green-700"],[3,"title"],["value","position"],["value","pitcher"],[1,"bg-white","dark:bg-slate-700","rounded-lg","shadow-md","p-6","flex","justify-between","items-center"],[1,"flex","items-center","gap-5"],[1,"team-logo-container",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",1,"w-9","h-9","fill-current","text-black","dark:text-white"],[1,"text-xl","font-bold"],[1,"text-base","font-medium"],[1,"px-4","py-2","app-success-button",3,"click"],[1,"w-9","h-9","object-contain",3,"src","alt"],["d","M450.338,288.096L331.012,393.623c-20.722,18.317-47.358,28.394-75.014,28.394   c-27.656,0-54.29-10.077-75.014-28.394L61.972,288.37c-22.726-21.301-44.765-42.132-59.222-64.937l4.105,52.848   c1.08,13.798,7.209,26.723,17.226,36.298l147.887,156.668c40.09,39.166,126.771,39.166,166.861,0l147.906-156.668   c10.018-9.575,16.146-22.5,17.206-36.298l3.948-50.638C493.474,247.524,472.201,267.599,450.338,288.096z"],["d","M71.242,277.881l119.033,105.244c37.536,33.186,93.929,33.186,131.465,0l119.013-105.244   c62.247-58.347,97.249-97.239,47.888-168.088C432.7,29.524,318.225,13.378,255.998,13.378c-62.227,0-176.721,16.145-232.643,96.414   C-26.007,180.642,9.015,219.534,71.242,277.881z M91.867,217.314c2.71-8.81,6.364-17.256,10.862-25.28   c4.498-7.994,9.861-15.576,15.93-22.638c6.088-7.051,12.905-13.612,20.33-19.593c7.68-6.148,16.028-11.687,24.945-16.548   c8.898-4.842,18.366-8.987,28.285-12.355c9.9-3.369,20.311-5.962,31.036-7.71c10.744-1.729,21.841-2.613,33.215-2.544   c11.373,0.079,22.471,1.1,33.196,2.967c10.744,1.866,21.115,4.606,30.995,8.093c9.919,3.496,19.347,7.768,28.226,12.718   c8.878,4.969,17.186,10.617,24.808,16.864c7.406,6.069,14.182,12.718,20.193,19.838c6.03,7.15,11.314,14.791,15.733,22.844   c4.459,8.072,8.033,16.578,10.666,25.416c2.632,8.869,4.301,18.071,4.89,27.559L281.552,370.358   c-14.987,12.875-37.202,12.757-52.052-0.286L86.799,244.814C87.448,235.336,89.176,226.143,91.867,217.314z"],["points","275.934,159.821 256.41,143.508 236.768,159.576 256.273,176.055"],["points","143.86,235.749 123.472,252.435 142.957,269.484 163.365,252.68"],["points","368.921,270.908 388.544,254.114 368.274,237.163 348.729,253.859"],["points","241.266,355.547 255.566,368.099 270.062,355.734 270.062,339.47 241.364,339.303"],["d","M244.861,322.165c3.516-0.599,7.149-0.904,10.902-0.865c3.712,0.02,7.346,0.364,10.862,1.012   c3.535,0.639,6.933,1.572,10.174,2.77c3.222,1.208,6.305,2.662,9.173,4.351c2.867,1.69,5.578,3.604,8.033,5.726l57.336-49.165   c-2.455-2.072-4.695-4.35-6.64-6.796c-1.944-2.426-3.634-5.028-5.008-7.759c-1.395-2.73-2.456-5.588-3.182-8.544   c-0.766-2.946-1.179-6.001-1.199-9.124c-0.039-3.114,0.276-6.148,0.962-9.075c0.669-2.916,1.67-5.715,2.967-8.396   c1.296-2.671,2.887-5.196,4.753-7.563c1.847-2.376,3.988-4.576,6.364-6.58l-56.982-47.701c-2.358,1.974-4.93,3.751-7.739,5.313   c-2.79,1.562-5.775,2.888-8.917,3.988c-3.143,1.09-6.444,1.925-9.861,2.484c-3.457,0.57-6.974,0.836-10.607,0.816   c-3.634-0.02-7.17-0.344-10.587-0.952c-3.418-0.599-6.737-1.483-9.861-2.613c-3.123-1.129-6.069-2.494-8.858-4.095   c-2.751-1.591-5.323-3.398-7.661-5.412l-57.415,46.974c2.357,2.042,4.479,4.272,6.345,6.659c1.846,2.386,3.438,4.94,4.715,7.631   c1.296,2.691,2.278,5.509,2.946,8.436c0.628,2.937,0.962,5.971,0.904,9.074c-0.059,3.123-0.492,6.168-1.277,9.124   c-0.766,2.937-1.865,5.785-3.28,8.496c-1.414,2.71-3.123,5.293-5.107,7.71c-1.983,2.416-4.203,4.654-6.698,6.698l57.042,49.891   c2.475-2.092,5.166-3.977,8.033-5.628c2.888-1.66,5.972-3.063,9.212-4.233C237.927,323.668,241.325,322.764,244.861,322.165z    M236.749,247.908l36.515,0.235v8.731l-36.594-0.226L236.749,247.908z"],[1,"mt-6","px-6","py-3","text-lg","font-semibold","text-white","rounded-lg","shadow-md","bg-gradient-to-br","from-green-600","via-green-700","to-green-800","hover:brightness-110","hover:shadow-lg","transition-all","duration-300","ease-out","cursor-pointer","dark:from-green-900","dark:via-green-800","dark:to-green-700",3,"click"],[3,"cancel","title"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"h1",1),c(2," Edit Menu "),a(),o(3,"div",2)(4,"input",3),w("ngModelChange",function(l){return v(i.searchQuery,l)||(i.searchQuery=l),l}),a(),o(5,"select",4),w("ngModelChange",function(l){return v(i.searchType,l)||(i.searchType=l),l}),o(6,"option",5),c(7,"Player"),a(),o(8,"option",6),c(9,"Team"),a(),o(10,"option",7),c(11,"Stadium"),a()(),m(12,ne,5,1,"select",8),o(13,"button",9),p("click",function(){return i.performSearch()}),c(14," SEARCH "),a()(),o(15,"div",10),m(16,ce,2,0),a(),m(17,se,2,0,"button",11),m(18,de,1,1,"app-error-modal",12),a()),e&2&&(s(4),b("ngModel",i.searchQuery),s(),b("ngModel",i.searchType),s(7),u(i.searchType==="player"?12:-1),s(4),u(i.searchResults?16:-1),s(),u(i.hasMore&&i.searchResults.length>0?17:-1),s(),u(i.error?18:-1))},dependencies:[M,S,X,K,J,Q,q,$,U,k],encapsulation:2})};export{Z as EditMenuComponent};
