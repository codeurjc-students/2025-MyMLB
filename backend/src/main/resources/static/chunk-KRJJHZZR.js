import{a as z}from"./chunk-OMW7TAJM.js";import{a as L}from"./chunk-MFHGG2X3.js";import{b as N}from"./chunk-CHV4XMVR.js";import{a as O,b as j}from"./chunk-OEP7YT4B.js";import{a as B,c as E,e as F,g as R,j as W,k as V,l as H,n as q,q as A}from"./chunk-EHWH32QV.js";import{a as D}from"./chunk-NSO5BDPE.js";import{$ as i,H as T,I as s,K as _,L as M,U as h,Ua as k,W as b,X as v,Y as x,Z as S,_ as c,aa as r,cb as I,fa as P,ga as m,ia as u,pa as p,qa as w,ta as d,ua as g,va as y,w as C,x as f}from"./chunk-D66FJKGB.js";function J(l,n){if(l&1&&(i(0,"option",15),p(1),r()),l&2){let t=n.$implicit;c("value",t),s(),w(t)}}function K(l,n){if(l&1){let t=P();i(0,"app-success-modal",20),m("continue",function(){C(t);let o=u();return f(o.returnToHome())}),r()}if(l&2){let t=u();c("message",t.successMessage)}}function G(l,n){if(l&1){let t=P();i(0,"app-error-modal",21),m("cancel",function(){C(t);let o=u();return f(o.error=!1)}),r()}if(l&2){let t=u();c("title",t.errorMessage)}}var Y=class l{constructor(n,t,e){this.playerService=n;this.teamService=t;this.router=e}nameInput="";playerNumberInput=void 0;teamNameInput="";positionInput="";success=!1;error=!1;selectTeamButtonClicked=!1;hasMore=!0;isClose=!1;availableTeams=[];errorMessage="";successMessage="";currentPage=0;pageSize=10;availablePositions=["C","1B","2B","3B","SS","LF","CF","RF","DH","SP","CP","RP"];pitcherPositions=["SP","RP","CP"];positionPlayerPositions=["C","1B","2B","3B","SS","LF","CF","RF","DH"];buildRequest(){return{name:this.nameInput,playerNumber:this.playerNumberInput,teamName:this.teamNameInput,position:this.positionInput}}ngOnInit(){}isPitcher(){return this.pitcherPositions.includes(this.positionInput)}isPositionPlayer(){return this.positionPlayerPositions.includes(this.positionInput)}createPlayer(){let n=this.buildRequest();this.isPitcher()?this.createPlayerByType(()=>this.playerService.createPitcher(n)):this.isPositionPlayer()?this.createPlayerByType(()=>this.playerService.createPositionPlayer(n)):(this.error=!0,this.errorMessage="All the fields are required")}createPlayerByType(n){n().subscribe({next:t=>{this.success=!0,this.successMessage=`${t.name}  successfully created`},error:t=>{this.error=!0,this.errorMessage=t?.error?.message??"All the fields are required"}})}showTeamsModal(){this.selectTeamButtonClicked=!0,this.availableTeams=[],this.loadTeams(0)}loadTeams(n){this.teamService.getAvailableTeams(n,this.pageSize).subscribe({next:t=>{this.availableTeams=[...this.availableTeams,...t.content],this.currentPage=t.page.number,this.hasMore=t.page.totalPages>this.currentPage+1},error:t=>{this.error=!0,this.errorMessage=t?.error?.message??"Error trying to load the teams"}})}closeTeamModal(){this.isClose=!0,setTimeout(()=>{this.selectTeamButtonClicked=!1,this.isClose=!1},300)}handleEscape(n){n.key==="Escape"&&this.closeTeamModal()}selectTeam(n){let t=n;this.success=!0,this.successMessage="Team Selected",this.teamNameInput=t.name,this.availableTeams=this.availableTeams.filter(e=>e.name!==t.name)}loadNextPage(){this.hasMore&&this.loadTeams(this.currentPage+1)}returnToHome(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||l)(_(z),_(N),_(I))};static \u0275cmp=M({type:l,selectors:[["app-create-player"]],hostBindings:function(t,e){t&1&&m("keydown",function(a){return e.handleEscape(a)},T)},decls:30,vars:11,consts:[[1,"app-background","min-h-screen","text-gray-900","dark:text-white","px-6","py-16","space-y-12","flex","flex-col","items-center"],[1,"w-full","max-w-3xl","team-section-container","space-y-10","animate-fade-in"],[1,"text-xl","text-center","app-page-titles"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"flex","flex-col"],[1,"text-sm","font-medium","text-gray-600","dark:text-gray-300","mb-1"],["type","text","placeholder","e.g., Aaron Judge",1,"px-4","py-2","rounded-lg","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-gray-800","dark:text-gray-200","shadow-inner","focus:outline-none","focus:ring-2","focus:ring-blue-700",3,"ngModelChange","ngModel"],[1,"flex","flex-col","max-w-[120px]"],["type","number","placeholder","99","min","0",1,"px-3","py-2","rounded-lg","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-gray-800","dark:text-gray-200","shadow-inner","focus:outline-none","focus:ring-2","focus:ring-blue-700","text-center",3,"ngModelChange","ngModel"],[1,"flex","flex-col","md:col-span-2"],[1,"flex","items-center","gap-3"],["type","text","placeholder","e.g., New York Yankees",1,"w-[260px]","px-4","py-2","rounded-lg","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-700","text-gray-800","dark:text-gray-200","shadow-inner","focus:outline-none","focus:ring-2","focus:ring-blue-700",3,"ngModelChange","ngModel"],["type","button",1,"px-4","py-2","app-button","hover:scale-[1.02]",3,"click"],[1,"flex","flex-col","max-w-[140px]"],[1,"px-3","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[3,"value"],[3,"goBack","confirm"],[3,"select","loadNextPageFunction","closeModal","teamElements","openModal","isClose","hasMore","elements"],[3,"message"],[3,"title"],[3,"continue","message"],[3,"cancel","title"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),p(3,"Create Player"),r(),i(4,"div",3)(5,"div",4)(6,"label",5),p(7,"Name"),r(),i(8,"input",6),y("ngModelChange",function(a){return g(e.nameInput,a)||(e.nameInput=a),a}),r()(),i(9,"div",7)(10,"label",5),p(11,"Player #"),r(),i(12,"input",8),y("ngModelChange",function(a){return g(e.playerNumberInput,a)||(e.playerNumberInput=a),a}),r()(),i(13,"div",9)(14,"label",5),p(15,"Team"),r(),i(16,"div",10)(17,"input",11),y("ngModelChange",function(a){return g(e.teamNameInput,a)||(e.teamNameInput=a),a}),r(),i(18,"button",12),m("click",function(){return e.showTeamsModal()}),p(19," Select Team "),r()()(),i(20,"div",13)(21,"label",5),p(22,"Position"),r(),i(23,"select",14),y("ngModelChange",function(a){return g(e.positionInput,a)||(e.positionInput=a),a}),x(24,J,2,2,"option",15,v),r()()(),i(26,"app-action-buttons",16),m("goBack",function(){return e.returnToHome()})("confirm",function(){return e.createPlayer()}),r(),i(27,"app-select-element-modal",17),m("select",function(a){return e.selectTeam(a)})("loadNextPageFunction",function(){return e.loadNextPage()})("closeModal",function(){return e.closeTeamModal()}),r(),h(28,K,1,1,"app-success-modal",18),h(29,G,1,1,"app-error-modal",19),r()()),t&2&&(s(8),d("ngModel",e.nameInput),s(4),d("ngModel",e.playerNumberInput),s(5),d("ngModel",e.teamNameInput),s(6),d("ngModel",e.positionInput),s(),S(e.availablePositions),s(3),c("teamElements",!0)("openModal",e.selectTeamButtonClicked)("isClose",e.isClose)("hasMore",e.hasMore)("elements",e.availableTeams),s(),b(e.success?28:-1),s(),b(e.error?29:-1))},dependencies:[k,A,V,H,B,R,W,E,q,F,D,O,L,j],encapsulation:2})};export{Y as CreatePlayerComponent};
