import{a as A}from"./chunk-CJJTF7ZI.js";import{a as K}from"./chunk-2ZFPJZLY.js";import{a as H,c as z,e as O,g as W,n as U,o as Q,r as J,t as Y}from"./chunk-IIETMDHK.js";import{c as D,e as G}from"./chunk-2CFUAUWQ.js";import{b as X}from"./chunk-N6V2JLGD.js";import{$a as f,Ga as T,Gb as M,Hb as R,Ib as j,S as b,Ua as C,Wa as w,X as m,Xa as S,Y as p,Z as v,Za as y,_ as V,_a as k,ab as i,bb as r,cb as g,dc as F,fc as $,gb as _,gc as q,hb as u,jb as h,nb as E,ob as N,qb as s,sb as x,tb as I,ub as P,va as o,vb as B,wb as L}from"./chunk-J7PLGMTS.js";function ee(a,n){if(a&1&&(i(0,"div",5)(1,"div",8)(2,"div",39)(3,"h2",40),s(4),i(5,"span",41),s(6,"VS"),r(),s(7),r()(),i(8,"div",42)(9,"p",43),v(),i(10,"svg",44),g(11,"path",45)(12,"path",46),r(),s(13),r(),V(),i(14,"p",47),s(15),M(16,"date"),r()()()()),a&2){let t=h();o(4),x(" ",t.matchInfo.awayTeam.name," "),o(3),x(" ",t.matchInfo.homeTeam.name," "),o(6),x(" ",t.matchInfo.stadiumName," "),o(2),x(" ",j(16,4,t.matchInfo.date,"fullDate")," ")}}function te(a,n){a&1&&g(0,"div",6)}function ie(a,n){if(a&1){let t=_();i(0,"span",26),s(1),i(2,"button",48),u("click",function(){let l=m(t).$index,d=h();return p(d.removeSectorName(l))}),v(),i(3,"svg",49),g(4,"path",50),r()()()}if(a&2){let t=n.$implicit;o(),x(" ",t," ")}}function ne(a,n){if(a&1){let t=_();i(0,"span",28),s(1),M(2,"currency"),i(3,"button",48),u("click",function(){let l=m(t).$index,d=h();return p(d.removeSectorPrice(l))}),v(),i(4,"svg",49),g(5,"path",50),r()()()}if(a&2){let t=n.$implicit;o(),x(" ",R(2,1,t)," ")}}function re(a,n){if(a&1){let t=_();i(0,"span",29),s(1),i(2,"button",48),u("click",function(){let l=m(t).$index,d=h();return p(d.removeSectorCapacities(l))}),v(),i(3,"svg",49),g(4,"path",50),r()()()}if(a&2){let t=n.$implicit;o(),x(" ",t," seats ")}}function ae(a,n){if(a&1&&(i(0,"span",33),v(),i(1,"svg",51),g(2,"path",52),r(),s(3),r()),a&2){let t=h();o(3),x(" Ready to generate event with ",t.numSectors," sectors ")}}function oe(a,n){if(a&1&&s(0),a&2){let t=h();x(" * Please complete all tags for the ",t.numSectors," defined sectors. ")}}function se(a,n){if(a&1){let t=_();i(0,"app-success-modal",53),u("continue",function(){m(t);let l=h();return p(l.goToMenu())}),r()}if(a&2){let t=h();f("message",t.successMessage)}}function le(a,n){if(a&1){let t=_();i(0,"app-error-modal",54),u("cancel",function(){m(t);let l=h();return p(l.error=!1)}),r()}if(a&2){let t=h();f("title",t.errorMessage)}}var Z=class a{eventService=b(K);matchService=b(A);route=b(D);router=b(G);matchId;matchInfo=null;numSectors;sectorNames=[];sectorPrices=[];sectorCapacities=[];success=!1;error=!1;errorMessage="";successMessage="";ngOnInit(){this.route.queryParams.subscribe(n=>{this.matchId=+n.matchId,this.matchId&&this.matchService.getMatchById(this.matchId).subscribe({next:t=>{this.matchInfo=t},error:t=>{this.error=!0,this.errorMessage="Error fetching the match information"}})})}addSectorName(n){let t=n.trim();t&&this.sectorNames.length<this.numSectors&&this.sectorNames.push(t)}addSectorPrice(n){n>0&&this.sectorPrices.length<this.numSectors&&this.sectorPrices.push(n)}addSectorCapacity(n){n>0&&this.sectorCapacities.length<this.numSectors&&this.sectorCapacities.push(n)}removeSectorName(n){this.sectorNames.splice(n,1)}removeSectorPrice(n){this.sectorPrices.splice(n,1)}removeSectorCapacities(n){this.sectorCapacities.splice(n,1)}resetInputs(){this.sectorNames=[],this.sectorPrices=[],this.sectorCapacities=[]}isValid(){return!(this.numSectors===0||this.sectorNames.length<this.numSectors||this.sectorPrices.length<this.numSectors||this.sectorCapacities.length<this.numSectors)}prepareRequest(){return{matchId:this.matchId,prices:[...this.sectorPrices],sectors:this.sectorNames.map((n,t)=>({name:n,totalCapacity:this.sectorCapacities[t]}))}}createEvent(){let n=this.prepareRequest();this.eventService.createEvent(n).subscribe({next:t=>{this.success=!0,this.successMessage="Event Successfully Created"},error:t=>{this.error=!0,this.errorMessage="An error occur while attempting to create the event"}})}goToMenu(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=T({type:a,selectors:[["app-create-event"]],decls:58,vars:25,consts:[["nameInput",""],["priceInput",""],["capInput",""],[1,"min-h-screen","app-background","p-4","md:p-8","animate-fadeIn"],[1,"max-w-4xl","mx-auto"],[1,"mb-8","bg-white/80","dark:bg-gray-800/80","backdrop-blur-md","rounded-3xl","p-6","shadow-xl","border","border-white/20","animate-fadeInUpSmooth"],[1,"max-w-4xl","mx-auto","mb-8","animate-pulse","bg-gray-200","dark:bg-gray-700","h-24","rounded-3xl"],[1,"mb-8","bg-white/80","dark:bg-gray-800/80","backdrop-blur-md","rounded-3xl","p-6","shadow-xl","border","border-white/20","animate-fadeInUpSmooth",2,"animation-delay","0.1s"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","gap-4"],[1,"text-3xl","font-black","text-gray-800","dark:text-white","tracking-tight","uppercase"],[1,"text-indigo-600","dark:text-sky-400"],[1,"px-4","py-2","bg-indigo-100","dark:bg-indigo-900/30","rounded-2xl"],[1,"text-sm","font-bold","text-indigo-600","dark:text-indigo-400","italic"],[1,"bg-white","dark:bg-gray-800","rounded-3xl","p-8","shadow-2xl","border","border-gray-100","dark:border-gray-700","relative","overflow-hidden"],[1,"mb-10"],[1,"block","text-sm","font-semibold","text-gray-600","dark:text-gray-400","mb-2","ml-1","uppercase","tracking-wider"],[1,"relative","flex","items-center"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-indigo-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],["type","number","min","1","max","99","placeholder","0",1,"text-inputs","w-32","pl-12","pr-4","text-center","font-bold","text-lg",3,"ngModelChange","change","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-8"],[1,"space-y-4"],[1,"block","text-xs","font-bold","text-indigo-600","dark:text-sky-400","uppercase","tracking-widest","ml-1"],["type","text",1,"text-inputs","w-full",3,"keyup.enter","disabled","placeholder"],[1,"flex","flex-wrap","gap-2","min-h-[120px]","p-3","bg-gray-50","dark:bg-gray-900/50","rounded-2xl","border-2","border-dashed","border-gray-200","dark:border-gray-700"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1.5","rounded-xl","bg-indigo-600","text-white","text-xs","font-bold","animate-fadeIn"],["type","number",1,"text-inputs","w-full",3,"keyup.enter","disabled","placeholder"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1.5","rounded-xl","bg-emerald-600","text-white","text-xs","font-bold","animate-fadeIn"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1.5","rounded-xl","bg-amber-600","text-white","text-xs","font-bold","animate-fadeIn"],[1,"mt-12","pt-8","border-t","border-gray-100","dark:border-gray-700"],[1,"flex","flex-col","md:flex-row","items-center","justify-between","gap-6"],[1,"text-sm","text-gray-500","dark:text-gray-400","italic"],[1,"flex","items-center","gap-2","text-emerald-500","font-bold"],[1,"app-button","px-12","py-4","uppercase","font-black","tracking-widest","transition-all","duration-300",3,"click","disabled"],[1,"app-button-bright"],[1,"app-button-texts"],[3,"message"],[3,"title"],[1,"flex","items-center","gap-6"],[1,"text-2xl","md:text-3xl","font-black","text-gray-800","dark:text-white","tracking-tight"],[1,"text-indigo-500","mx-2","text-xl","font-light"],[1,"text-center","md:text-right"],[1,"text-md","font-bold","text-indigo-600","dark:text-sky-400","flex","items-center","justify-center","md:justify-end","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-gray-500","dark:text-gray-400","text-sm","font-medium","italic"],[1,"hover:text-red-300","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["d","M6 18L18 6M6 6l12 12"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[3,"continue","message"],[3,"cancel","title"]],template:function(t,e){if(t&1){let l=_();i(0,"div",3)(1,"div",4),C(2,ee,17,7,"div",5)(3,te,1,0,"div",6),i(4,"div",7)(5,"div",8)(6,"h2",9),s(7," Create New "),i(8,"span",10),s(9,"Event"),r()(),i(10,"div",11)(11,"span",12),s(12),r()()()(),i(13,"div",13)(14,"div",14)(15,"label",15),s(16," How many sectors will this event have? "),r(),i(17,"div",16)(18,"div",17),v(),i(19,"svg",18),g(20,"path",19),r()(),V(),i(21,"input",20),L("ngModelChange",function(c){return m(l),B(e.numSectors,c)||(e.numSectors=c),p(c)}),u("change",function(){return m(l),p(e.resetInputs())}),r()()(),i(22,"div",21)(23,"div",22)(24,"label",23),s(25),r(),i(26,"input",24,0),u("keyup.enter",function(){m(l);let c=E(27);return e.addSectorName(c.value),p(c.value="")}),r(),i(28,"div",25),y(29,ie,5,1,"span",26,S),r()(),i(31,"div",22)(32,"label",23),s(33),r(),i(34,"input",27,1),u("keyup.enter",function(){m(l);let c=E(35);return e.addSectorPrice(c.valueAsNumber),p(c.value="")}),r(),i(36,"div",25),y(37,ne,6,3,"span",28,S),r()(),i(39,"div",22)(40,"label",23),s(41),r(),i(42,"input",27,2),u("keyup.enter",function(){m(l);let c=E(43);return e.addSectorCapacity(c.valueAsNumber),p(c.value="")}),r(),i(44,"div",25),y(45,re,5,1,"span",29,S),r()()(),i(47,"div",30)(48,"div",31)(49,"div",32),C(50,ae,4,1,"span",33)(51,oe,1,1),r(),i(52,"button",34),u("click",function(){return m(l),p(e.createEvent())}),g(53,"span",35),i(54,"span",36),s(55,"Generate Event"),r()()()()()(),C(56,se,1,1,"app-success-modal",37),C(57,le,1,1,"app-error-modal",38),r()}t&2&&(o(2),w(e.matchInfo?2:3),o(10),x("Match ID: #",e.matchInfo==null?null:e.matchInfo.id),o(9),P("ngModel",e.numSectors),o(4),I(" Sector Names (",e.sectorNames.length,"/",e.numSectors,") "),o(),f("disabled",e.sectorNames.length>=e.numSectors)("placeholder",e.sectorNames.length>=e.numSectors?"Limit reached":"Type & Enter..."),o(3),k(e.sectorNames),o(4),I(" Prices (",e.sectorPrices.length,"/",e.numSectors,") "),o(),f("disabled",e.sectorPrices.length>=e.numSectors)("placeholder",e.sectorPrices.length>=e.numSectors?"Limit reached":"$ 0.00"),o(3),k(e.sectorPrices),o(4),I(" Capacities (",e.sectorCapacities.length,"/",e.numSectors,") "),o(),f("disabled",e.sectorCapacities.length>=e.numSectors)("placeholder",e.sectorCapacities.length>=e.numSectors?"Limit reached":"Qty..."),o(3),k(e.sectorCapacities),o(5),w(e.isValid()?50:51),o(2),N("opacity-50",!e.isValid())("cursor-not-allowed",!e.isValid())("grayscale",!e.isValid()),f("disabled",!e.isValid()),o(4),w(e.success?56:-1),o(),w(e.error?57:-1))},dependencies:[q,J,H,W,z,Q,U,O,X,Y,$,F],encapsulation:2})};export{Z as CreateEventComponent};
