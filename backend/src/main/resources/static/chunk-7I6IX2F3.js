import{a as Q}from"./chunk-STI55ZPY.js";import{a as z}from"./chunk-EYH47DQU.js";import{a as G}from"./chunk-W4S4VOJS.js";import{b as F}from"./chunk-DLUHG5HN.js";import"./chunk-O32YY2GY.js";import{a as K}from"./chunk-543SPYN4.js";import{a as V,c as R,e as W,g as A,k as q,l as D,m as L,o as H,r as O,t as J}from"./chunk-JNZXUMCO.js";import{e as E}from"./chunk-SSV6X3LQ.js";import{a as j,b as Y}from"./chunk-WAEJSYWU.js";import{$a as u,Aa as d,Cb as w,Ga as S,Hb as I,Ib as k,Ua as b,Wa as h,X as C,Y as f,Ya as v,Za as T,_a as M,ab as a,bb as i,dc as N,gb as P,hb as p,hc as B,jb as m,rb as c,sb as x,va as s,vb as y,wb as g,xb as _}from"./chunk-KSE3ZWBO.js";var X=()=>[];function Z(o,l){if(o&1&&(a(0,"option",13),c(1),i()),o&2){let t=l.$implicit;u("value",t),s(),x(t)}}function $(o,l){if(o&1){let t=P();a(0,"app-success-modal",18),p("continue",function(){C(t);let r=m();return f(r.returnToHome())}),i()}if(o&2){let t=m();u("message",t.successMessage)}}function ee(o,l){if(o&1){let t=P();a(0,"app-success-modal",18),p("continue",function(){C(t);let r=m();return f(r.closeSuccessModal())}),i()}if(o&2){let t=m();u("message",t.successMessage)}}function te(o,l){if(o&1){let t=P();a(0,"app-error-modal",19),p("cancel",function(){C(t);let r=m();return f(r.error=!1)}),i()}if(o&2){let t=m();u("title",t.errorMessage)}}var U=class o{constructor(l,t,e,r){this.playerService=l;this.teamService=t;this.selector=e;this.router=r}nameInput="";playerNumberInput=void 0;teamNameInput="";positionInput="";success=!1;error=!1;selectTeamButtonClicked=!1;isClose=!1;selectedTeam=!1;availableTeams=[];errorMessage="";successMessage="";pageSize=10;availablePositions=["C","1B","2B","3B","SS","LF","CF","RF","DH","SP","CP","RP"];pitcherPositions=["SP","RP","CP"];positionPlayerPositions=["C","1B","2B","3B","SS","LF","CF","RF","DH"];buildRequest(){return{name:this.nameInput,playerNumber:this.playerNumberInput,teamName:this.teamNameInput,position:this.positionInput}}ngOnInit(){}isPitcher(){return this.pitcherPositions.includes(this.positionInput)}isPositionPlayer(){return this.positionPlayerPositions.includes(this.positionInput)}createPlayer(){let l=this.buildRequest();this.isPitcher()?this.createPlayerByType(()=>this.playerService.createPitcher(l)):this.isPositionPlayer()?this.createPlayerByType(()=>this.playerService.createPositionPlayer(l)):(this.error=!0,this.errorMessage="All the fields are required")}createPlayerByType(l){l().subscribe({next:t=>{this.success=!0,this.successMessage=`${t.name}  successfully created`},error:t=>{this.error=!0,this.errorMessage=t?.error?.message??"All the fields are required"}})}showTeamsModal(){this.selectTeamButtonClicked=!0,this.selector.reset(),this.selector.loadPage(0,this.pageSize,this.teamService.getAvailableTeams.bind(this.teamService))}closeTeamModal=()=>{this.isClose=!0,setTimeout(()=>{this.selectTeamButtonClicked=!1,this.isClose=!1},300)};closeSuccessModal(){this.selectedTeam=!1,this.selectTeamButtonClicked=!1}selectTeam(l){let t=l;this.selectedTeam=!0,this.successMessage="Team Selected",this.teamNameInput=this.selector.select(t,e=>e.name)}loadNextPage(){this.selector.loadNextPage(this.pageSize,this.teamService.getAvailableTeams.bind(this.teamService))}returnToHome(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||o)(d(Q),d(F),d(z),d(E))};static \u0275cmp=S({type:o,selectors:[["app-create-player"]],decls:32,vars:16,consts:[[1,"app-background","min-h-screen","text-gray-900","dark:text-white","px-6","py-16","space-y-12","flex","flex-col","items-center"],[1,"w-full","max-w-3xl","mx-auto","team-section-container","space-y-10","animate-fade-in"],[1,"text-xl","text-center","app-page-titles"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"flex","flex-col"],[1,"text-sm","font-semibold","text-gray-600","dark:text-gray-300","mb-1"],["type","text","placeholder","e.g., Aaron Judge",1,"px-4","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-gray-200","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-600",3,"ngModelChange","ngModel"],["type","number","placeholder","99","min","0",1,"px-3","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-gray-200","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-600","text-center",3,"ngModelChange","ngModel"],[1,"flex","flex-col","md:col-span-2"],[1,"flex","items-center","gap-3"],["type","text","placeholder","e.g., New York Yankees",1,"flex-1","px-4","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-gray-200","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-600",3,"ngModelChange","ngModel"],["type","button",1,"px-4","py-2","app-button","hover:scale-[1.02]",3,"click"],[1,"px-3","py-2","rounded-md","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-800","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-600",3,"ngModelChange","ngModel"],[3,"value"],[3,"goBack","confirm"],[3,"select","loadNextPageFunction","closeModal","teamElements","openModal","isClose","hasMore","elements","appEscapeClose"],[3,"message"],[3,"title"],[3,"continue","message"],[3,"cancel","title"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"div",1)(2,"h2",2),c(3,"Create Player"),i(),a(4,"div",3)(5,"div",4)(6,"label",5),c(7,"Name"),i(),a(8,"input",6),_("ngModelChange",function(n){return g(e.nameInput,n)||(e.nameInput=n),n}),i()(),a(9,"div",4)(10,"label",5),c(11,"Player #"),i(),a(12,"input",7),_("ngModelChange",function(n){return g(e.playerNumberInput,n)||(e.playerNumberInput=n),n}),i()(),a(13,"div",8)(14,"label",5),c(15,"Team"),i(),a(16,"div",9)(17,"input",10),_("ngModelChange",function(n){return g(e.teamNameInput,n)||(e.teamNameInput=n),n}),i(),a(18,"button",11),p("click",function(){return e.showTeamsModal()}),c(19," Select Team "),i()()(),a(20,"div",4)(21,"label",5),c(22,"Position"),i(),a(23,"select",12),_("ngModelChange",function(n){return g(e.positionInput,n)||(e.positionInput=n),n}),T(24,Z,2,2,"option",13,v),i()()(),a(26,"app-action-buttons",14),p("goBack",function(){return e.returnToHome()})("confirm",function(){return e.createPlayer()}),i(),a(27,"app-select-element-modal",15),I(28,"async"),p("select",function(n){return e.selectTeam(n)})("loadNextPageFunction",function(){return e.loadNextPage()})("closeModal",function(){return e.closeTeamModal()}),i(),b(29,$,1,1,"app-success-modal",16),b(30,ee,1,1,"app-success-modal",16),b(31,te,1,1,"app-error-modal",17),i()()),t&2&&(s(8),y("ngModel",e.nameInput),s(4),y("ngModel",e.playerNumberInput),s(5),y("ngModel",e.teamNameInput),s(6),y("ngModel",e.positionInput),s(),M(e.availablePositions),s(3),u("teamElements",!0)("openModal",e.selectTeamButtonClicked)("isClose",e.isClose)("hasMore",e.selector.hasMore)("elements",k(28,13,e.selector.items$)??w(15,X))("appEscapeClose",e.closeTeamModal),s(2),h(e.success?29:-1),s(),h(e.selectedTeam?30:-1),s(),h(e.error?31:-1))},dependencies:[B,O,D,L,V,A,q,R,H,W,Y,J,G,K,j,N],encapsulation:2})};export{U as CreatePlayerComponent};
