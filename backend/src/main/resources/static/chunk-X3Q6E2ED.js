import{C as o,N as s,R as n,j as l,jc as c}from"./chunk-W3BZSQCG.js";var h=class r{items$=new l([]);rawItems=[];currentPage=0;hasMore=!0;loading=!1;excludedLabels=new Set;currentSelectionLabel;labelFn=null;setLabelFn(e){this.labelFn=e,this.refreshView()}exclude(e){this.excludedLabels.add(e),this.refreshView()}loadPage(e,t,i){this.loading||(this.loading=!0,i(e,t).pipe(o(()=>this.loading=!1)).subscribe({next:a=>{this.rawItems=[...this.rawItems,...a.content],this.currentPage=a.page.number,this.hasMore=a.page.totalPages>this.currentPage+1,this.refreshView()},error:()=>{this.items$.error("Error loading items")}}))}loadNextPage(e,t){this.hasMore&&this.loadPage(this.currentPage+1,e,t)}select(e,t){let i=t(e);return this.currentSelectionLabel&&this.excludedLabels.delete(this.currentSelectionLabel),this.excludedLabels.add(i),this.currentSelectionLabel=i,this.refreshView(),i}clearSelection(){this.currentSelectionLabel&&(this.excludedLabels.delete(this.currentSelectionLabel),this.currentSelectionLabel=void 0,this.refreshView())}reset(){this.rawItems=[],this.items$.next([]),this.currentPage=0,this.hasMore=!0}clearAll(){this.rawItems=[],this.items$.next([]),this.currentSelectionLabel=void 0,this.excludedLabels.clear(),this.currentPage=0,this.hasMore=!0}refreshView(){if(!this.labelFn){this.items$.next(this.rawItems.slice());return}let e=this.rawItems.filter(t=>!this.excludedLabels.has(this.labelFn(t)));this.items$.next(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})};var p=class r{constructor(e){this.httpMock=e}apiUrl="https://localhost:8443/api/v1/players";createPositionPlayer(e){return this.httpMock.post(`${this.apiUrl}/position-players`,e)}createPitcher(e){return this.httpMock.post(`${this.apiUrl}/pitchers`,e)}updatePicture(e,t){let i=new FormData;return i.append("file",t),this.httpMock.post(`${this.apiUrl}/${e}/pictures`,i)}updatePositionPlayer(e,t){return this.httpMock.patch(`${this.apiUrl}/position-players/${e}`,t)}updatePitcher(e,t){return this.httpMock.patch(`${this.apiUrl}/pitchers/${e}`,t)}deletePlayer(e){return this.httpMock.delete(`${this.apiUrl}/${e}`)}static \u0275fac=function(t){return new(t||r)(n(c))};static \u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})};export{h as a,p as b};
