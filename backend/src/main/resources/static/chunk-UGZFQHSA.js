import{a as De}from"./chunk-YRJ4WRB2.js";import{a as Be}from"./chunk-R23KVMPD.js";import{a as ze}from"./chunk-O32YY2GY.js";import{a as H,b as y,c as B,d as Me,e as ye,f as Ie,g as Te,i as Ee,j as Pe,k as Le,l as Ve,m as Re,n as Ne,o as Fe,p as Ze,q as Oe,r as We,s as Ae,t as j}from"./chunk-JNZXUMCO.js";import{c as Ce,e as we}from"./chunk-SSV6X3LQ.js";import{b as He}from"./chunk-WAEJSYWU.js";import{$a as h,Aa as $,Bb as fe,Db as xe,Ga as k,Ha as ue,Hb as M,Ib as P,Jb as ve,La as I,N,O as le,Qb as be,R as ce,S,Ua as g,Wa as f,X as d,Y as u,Z as _,Za as T,_ as w,_a as E,ab as n,bb as a,bc as Se,cb as m,db as V,eb as F,ec as _e,fb as pe,gb as x,gc as D,ha as me,hb as p,hc as C,ib as he,j as se,jb as c,kb as Z,lb as O,mb as W,mc as ke,nb as ge,ob as A,pb as z,rb as l,sa as L,sb as R,tb as v,ub as J,va as s,vb as X,wb as Y,xb as K,za as de}from"./chunk-KSE3ZWBO.js";var q=class i{http=S(ke);apiUrl="https://localhost:8443/api/v1/tickets";purchaseTicket(t){return this.http.post(this.apiUrl,t,{withCredentials:!0})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=N({token:i,factory:i.\u0275fac,providedIn:"root"})};var Q=class i{router=S(we);navigateToHome(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=k({type:i,selectors:[["app-successfull-purchase"]],decls:8,vars:0,consts:[[1,"text-center"],["src","assets/coming-soon.png","alt","404 Illustration",1,"mx-auto","mb-8","w-72","max-w-full","h-auto"],[1,"text-5xl","font-bold","mb-4"],[1,"text-lg","text-gray-700","dark:text-gray-200","mb-6"],[1,"inline-block","px-6","py-3","app-button","hover:scale-105",3,"click"]],template:function(e,o){e&1&&(V(0,"div",0),pe(1,"img",1),V(2,"h1",2),l(3,"Thank you for your purchase"),F(),V(4,"p",3),l(5," Enjoy the game and see you at the ballpark! "),F(),V(6,"button",4),he("click",function(){return o.navigateToHome()}),l(7," Go Back to Home "),F()())},dependencies:[C],encapsulation:2})};var Xe=(i,t)=>t.id;function Ye(i,t){if(i&1&&(n(0,"span",19)(1,"span",51),l(2,"#"),a(),l(3),a()),i&2){let e=t.$implicit;s(3),v("",e.name," ")}}function Ke(i,t){i&1&&(n(0,"span",38),_(),n(1,"svg",52),m(2,"path",53),a()())}function et(i,t){if(i&1&&(n(0,"div",45)(1,"div",54),_(),n(2,"svg",55),m(3,"path",56),a()(),w(),n(4,"span",57),l(5),a()()),i&2){let e=c(2);s(5),R(e.errorMessage)}}function tt(i,t){if(i&1){let e=x();n(0,"app-error-modal",58),p("cancel",function(){d(e);let r=c(2);return u(r.error=!1)}),a()}if(i&2){let e=c(2);h("title",e.errorMessage)}}function it(i,t){if(i&1){let e=x();n(0,"app-success-modal",59),p("continue",function(){d(e);let r=c(2);return u(r.openSuccessPage())}),a()}if(i&2){let e=c(2);h("message",e.successMessage)}}function ot(i,t){i&1&&m(0,"app-loading-modal",50),i&2&&h("message","Processing your order...")}function nt(i,t){if(i&1){let e=x();n(0,"div",0)(1,"div",1),m(2,"div",2),n(3,"div",3)(4,"div",4),m(5,"div",5),n(6,"div",6)(7,"div",7)(8,"div",8),m(9,"img",9),a(),n(10,"div",10)(11,"h3",11),l(12,"MLB PORTAL"),a(),n(13,"span",12),l(14,"Official Ticketing"),a()()(),n(15,"div",13)(16,"div")(17,"p",14),l(18,"Event Details"),a(),n(19,"p",15),l(20),n(21,"span",16),l(22),a()()(),n(23,"div")(24,"p",17),l(25,"Selected Seats"),a(),n(26,"div",18),T(27,Ye,4,1,"span",19,Xe),a()()()(),n(29,"div",20)(30,"p",21),l(31,"Total to pay"),a(),n(32,"p",22),l(33),M(34,"currency"),a()()(),n(35,"div",23)(36,"button",24),p("click",function(){d(e);let r=c();return u(r.previousPage())}),_(),n(37,"svg",25),m(38,"path",26),a(),w(),n(39,"span",27),l(40,"Go back"),a()(),n(41,"header",28)(42,"div",29),m(43,"span",30),n(44,"span",31),l(45,"Secure Checkout"),a()(),n(46,"h4",32),l(47,"Payment Details"),a()(),n(48,"form",33),p("ngSubmit",function(){d(e);let r=c();return u(r.purchase())}),n(49,"div",34)(50,"label",35),l(51,"Cardholder Name"),a(),n(52,"div",36),m(53,"input",37),g(54,Ke,3,0,"span",38),a()(),n(55,"div",34)(56,"label",35),l(57,"Card Number"),a(),n(58,"div",36),m(59,"input",39),n(60,"div",40),m(61,"div",41)(62,"div",41),a()()(),n(63,"div",42)(64,"div",34)(65,"label",35),l(66,"Expiry Date"),a(),m(67,"input",43),a(),n(68,"div",34)(69,"label",35),l(70,"CVV"),a(),m(71,"input",44),a()(),g(72,et,6,1,"div",45),n(73,"button",46),m(74,"span",47),n(75,"span",48),l(76),M(77,"currency"),a()()()()()(),g(78,tt,1,1,"app-error-modal",49),g(79,it,1,1,"app-success-modal",50),g(80,ot,1,1,"app-loading-modal",50),a()}if(i&2){let e=c();s(20),v(" ",e.event.awayTeamName," "),s(2),v("at ",e.event.homeTeamName),s(5),E(e.seats),s(6),R(P(34,19,e.totalPrice)),s(15),h("formGroup",e.paymentForm),s(5),z("border-red-500",e.invalidField("ownerName")),s(),f(e.invalidField("ownerName")?54:-1),s(5),z("border-red-500",e.invalidField("cardNumber")),s(8),z("border-red-500",e.invalidField("expirationDate")),s(4),z("border-red-500",e.invalidField("cvv")),s(),f(e.errorMessage?72:-1),s(),h("disabled",e.loading),s(3),v(" Confirm Payment \u2022 ",P(77,21,e.totalPrice)," "),s(2),f(e.error?78:-1),s(),f(e.showSuccesModal?79:-1),s(),f(e.loading?80:-1)}}function at(i,t){i&1&&m(0,"app-successfull-purchase")}var U=class i{event;eventManagerId;tickets;seats;totalPrice;goBack=new I;ticketService=S(q);fb=S(Oe);request;paymentForm;loading=!1;error=!1;showSuccesModal=!1;successfullPurchase=!1;errorMessage="";successMessage="";ngOnInit(){this.initForm()}initForm(){this.paymentForm=this.fb.group({ownerName:["",[y.required]],cardNumber:["",[y.required,y.pattern("^[0-9\\s]{13,19}$")]],cvv:["",[y.required,y.pattern("^[0-9]{3,4}$")]],expirationDate:["",[y.required]]})}invalidField(t){let e=this.paymentForm.get(t);return!!(e&&e.invalid&&(e.dirty||e.touched))}prepareRequest(){let t=this.paymentForm.value;return{eventManagerId:this.eventManagerId,ticketAmount:this.tickets,seats:this.seats,ownerName:t.ownerName,cardNumber:t.cardNumber,cvv:t.cvv,expirationDate:new Date(t.expirationDate)}}purchase(){if(this.paymentForm.invalid)return;this.loading=!0;let t=this.prepareRequest();this.ticketService.purchaseTicket(t).subscribe({next:e=>{this.loading=!1,this.showSuccesModal=!0,this.successMessage="Thank you for your purchase"},error:e=>{this.loading=!1,this.error=!0,this.errorMessage="An error occur during the payment"}})}openSuccessPage(){this.showSuccesModal=!1,this.successfullPurchase=!0}previousPage(){this.goBack.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=k({type:i,selectors:[["app-ticket-purchase"]],inputs:{event:"event",eventManagerId:"eventManagerId",tickets:"tickets",seats:"seats",totalPrice:"totalPrice"},outputs:{goBack:"goBack"},decls:2,vars:1,consts:[[1,"max-w-6xl","mx-auto","p-4","md:p-10","animate-fadeIn"],[1,"bg-white","dark:bg-gray-900","rounded-[3rem]","shadow-[0_20px_50px_rgba(0,0,0,0.3)]","overflow-hidden","border","border-white/10","relative"],[1,"absolute","top-0","right-0","w-64","h-64","bg-indigo-500/5","rounded-full","-mr-32","-mt-32","blur-3xl"],[1,"flex","flex-col","lg:flex-row"],[1,"lg:w-1/3","bg-gradient-to-br","from-indigo-600","to-indigo-800","p-8","md:p-12","text-white","flex","flex-col","justify-between","relative"],[1,"absolute","inset-0","opacity-10","pointer-events-none",2,"background-image","radial-gradient(circle, #fff 1px, transparent 1px)","background-size","20px 20px"],[1,"relative","z-10"],[1,"flex","items-center","gap-4","mb-12"],[1,"w-12","h-12","bg-white","rounded-2xl","p-2","shadow-lg","flex","items-center","justify-center","overflow-hidden"],["src","assets/logo.png","alt","Logo",1,"w-full","h-full","object-contain"],[1,"flex","flex-col"],[1,"text-2xl","font-black","tracking-tighter","italic","leading-none"],[1,"text-[8px]","uppercase","tracking-[0.3em]","text-indigo-300","font-bold"],[1,"space-y-8"],[1,"text-indigo-200","text-[10px]","font-black","uppercase","tracking-[0.2em]","mb-2","opacity-70"],[1,"text-2xl","font-bold","leading-tight"],[1,"text-indigo-300","font-light","block","text-lg"],[1,"text-indigo-200","text-[10px]","font-black","uppercase","tracking-[0.2em]","mb-3","opacity-70"],[1,"flex","flex-wrap","gap-2"],[1,"bg-black/20","border","border-white/10","px-3","py-1.5","rounded-xl","text-xs","font-mono","backdrop-blur-sm","shadow-inner"],[1,"mt-16","pt-8","border-t","border-white/10","relative","z-10"],[1,"text-indigo-200","text-[10px]","font-black","uppercase","tracking-[0.2em]","mb-1","opacity-70"],[1,"text-6xl","font-black","tracking-tighter"],[1,"lg:w-2/3","p-8","md:p-16","bg-white","dark:bg-gray-800"],[1,"mb-8","flex","items-center","gap-2","text-gray-400","cursor-pointer","hover:text-indigo-600","transition-colors","group",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","transform","group-hover:-translate-x-1","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-xs","font-black","uppercase","tracking-[0.2em]"],[1,"mb-12"],[1,"flex","items-center","gap-2","mb-2"],[1,"w-8","h-[2px]","bg-indigo-600"],[1,"text-indigo-600","font-bold","text-xs","uppercase","tracking-widest"],[1,"text-4xl","md:text-5xl","font-black","text-gray-800","dark:text-white","tracking-tight"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"group"],[1,"text-[10px]","font-black","text-gray-400","dark:text-gray-500","uppercase","tracking-[0.2em]","ml-1","mb-2","block","group-focus-within:text-indigo-500","transition-colors"],[1,"relative"],["type","text","formControlName","ownerName","placeholder","Ex: Alex Jonson",1,"text-inputs","w-full","bg-gray-50","dark:bg-gray-900/50","border-transparent","focus:bg-white","transition-all","duration-300"],[1,"absolute","right-4","top-1/2","-translate-y-1/2","text-red-500","animate-bounce"],["type","text","formControlName","cardNumber","maxlength","19","placeholder","0000 0000 0000 0000",1,"text-inputs","w-full","font-mono","tracking-[0.15em]","bg-gray-50","dark:bg-gray-900/50","border-transparent","focus:bg-white","transition-all","duration-300"],[1,"absolute","right-4","top-1/2","-translate-y-1/2","flex","gap-1","opacity-30"],[1,"w-8","h-5","bg-gray-400","rounded-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8"],["type","date","formControlName","expirationDate",1,"text-inputs","w-full","bg-gray-50","dark:bg-gray-900/50","border-transparent","transition-all","duration-300"],["type","password","formControlName","cvv","maxlength","4","placeholder","***",1,"text-inputs","w-full","bg-gray-50","dark:bg-gray-900/50","border-transparent","transition-all","duration-300"],[1,"bg-red-500/5","border","border-red-500/20","p-5","rounded-2xl","flex","items-center","gap-4","text-red-600","dark:text-red-400","animate-shake"],["type","submit",1,"app-button","w-full","mt-10","group",3,"disabled"],[1,"app-button-bright"],[1,"app-button-texts","flex","items-center","justify-center","gap-4","uppercase","font-black","tracking-[0.25em]","text-sm"],[3,"title"],[3,"message"],[1,"text-indigo-300","mr-1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"w-10","h-10","bg-red-500/10","rounded-full","flex","items-center","justify-center","shrink-0"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor font-black",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","font-bold","tracking-tight"],[3,"cancel","title"],[3,"continue","message"]],template:function(e,o){e&1&&g(0,nt,81,23,"div",0)(1,at,1,0,"app-successfull-purchase"),e&2&&f(o.successfullPurchase?1:0)},dependencies:[C,Ae,Ie,H,B,Me,Ze,Ee,Pe,j,He,Be,Q,D],encapsulation:2})};var rt=["zoomContainer"],st=["imageThumbnail"],lt=["fullSizeImage"],ct=i=>({ngxImageZoomFullContainer:!0,ngxImageZoomLensEnabled:i}),Ge=(()=>{class i{constructor(e){this.changeDetectorRef=e,this.zoomDisplay="none",this.thumbWidth=0,this.thumbHeight=0,this.fullImageTop=0,this.fullImageLeft=0,this.lensWidth=100,this.lensHeight=100,this.lensTop=0,this.lensLeft=0,this.magnifiedWidth=0,this.magnifiedHeight=0,this.zoomPosition=new se(null),this.zoomingEnabled=!1,this.isReady=!1,this.enableLens=!1,this.minZoomRatio=1,this.maxZoomRatio=2,this.magnification=1,this.fullWidth=0,this.fullHeight=0,this.xRatio=0,this.yRatio=0,this.latestMouseLeft=-1,this.latestMouseTop=-1}zoomOn(e){this.isReady&&(this.zoomingEnabled=!0,this.calculateRatioAndOffset(),this.zoomDisplay="block",this.calculateZoomPosition(e),this.changeDetectorRef.markForCheck())}zoomOff(){this.zoomingEnabled=!1,this.zoomDisplay="none",this.changeDetectorRef.markForCheck()}markForCheck(){this.changeDetectorRef.markForCheck()}calculateRatioAndOffset(){this.enableLens||(this.lensWidth=this.thumbWidth,this.lensHeight=this.thumbHeight,this.lensLeft=0,this.lensTop=0),this.fullImageLoaded&&(this.baseRatio=Math.max(this.thumbWidth/this.fullWidth,this.thumbHeight/this.fullHeight),this.minZoomRatio=Math.max(this.minZoomRatio||0,this.baseRatio||0),this.calculateRatio())}calculateRatio(){this.magnifiedWidth=this.fullWidth*this.magnification,this.magnifiedHeight=this.fullHeight*this.magnification,this.xRatio=(this.magnifiedWidth-this.thumbWidth)/this.thumbWidth,this.yRatio=(this.magnifiedHeight-this.thumbHeight)/this.thumbHeight}calculateZoomPosition(e){let o=Math.max(Math.min(e.offsetX,this.thumbWidth),0),r=Math.max(Math.min(e.offsetY,this.thumbHeight),0);this.setZoomPosition(o,r),this.calculateImageAndLensPosition(),this.changeDetectorRef.markForCheck()}calculateImageAndLensPosition(){let e=0,o=0;this.enableLens&&this.latestMouseLeft>0&&(e=this.latestMouseLeft-this.lensWidth/2,o=this.latestMouseTop-this.lensHeight/2,this.lensLeft=e,this.lensTop=o),this.fullImageLeft=this.latestMouseLeft*-this.xRatio-e,this.fullImageTop=this.latestMouseTop*-this.yRatio-o}setZoomPosition(e,o){this.latestMouseLeft=Number(e)||this.latestMouseLeft,this.latestMouseTop=Number(o)||this.latestMouseTop;let r={x:this.latestMouseLeft,y:this.latestMouseTop};this.zoomPosition.next(r)}}return i.\u0275fac=function(e){return new(e||i)(ce(be))},i.\u0275prov=N({token:i,factory:i.\u0275fac}),i})(),ee=class{constructor(t){this.zoomService=t}onClick(t){this.zoomService.zoomingEnabled===!1&&this.zoomService.zoomOn(t)}onMouseEnter(){}onMouseLeave(){this.zoomService.zoomOff()}onMouseMove(t){this.zoomService.zoomingEnabled&&this.zoomService.calculateZoomPosition(t)}onMouseWheel(){return!0}},te=class{constructor(t){this.zoomService=t,this.zoomFrozen=!1}onClick(t){this.zoomService.zoomingEnabled&&this.zoomFrozen?this.zoomFrozen=!1:this.zoomService.zoomingEnabled?(this.zoomFrozen=!0,this.zoomService.markForCheck()):this.zoomService.zoomOn(t)}onMouseEnter(t){this.zoomFrozen||this.zoomService.zoomOn(t)}onMouseLeave(){this.zoomService.zoomingEnabled&&!this.zoomFrozen&&this.zoomService.zoomOff()}onMouseMove(t){this.zoomService.zoomingEnabled&&!this.zoomFrozen&&this.zoomService.calculateZoomPosition(t)}onMouseWheel(){return!this.zoomFrozen}},ie=class{constructor(t){this.zoomService=t}onClick(){}onMouseEnter(t){this.zoomService.zoomOn(t)}onMouseLeave(){this.zoomService.zoomOff()}onMouseMove(t){this.zoomService.calculateZoomPosition(t)}onMouseWheel(){return!0}},oe=class{constructor(t){this.zoomService=t}onClick(t){this.zoomService.zoomingEnabled?this.zoomService.zoomOff():this.zoomService.zoomOn(t)}onMouseEnter(){}onMouseLeave(){this.zoomService.zoomOff()}onMouseMove(t){this.zoomService.zoomingEnabled&&this.zoomService.calculateZoomPosition(t)}onMouseWheel(){return!0}},ne=class{constructor(t){this.zoomService=t,this.zoomFrozen=!1}onClick(t){this.zoomService.zoomingEnabled&&this.zoomFrozen?(this.zoomFrozen=!1,this.zoomService.zoomOff()):this.zoomService.zoomingEnabled?(this.zoomFrozen=!0,this.zoomService.markForCheck()):this.zoomService.zoomOn(t)}onMouseEnter(){}onMouseLeave(){this.zoomService.zoomingEnabled&&!this.zoomFrozen&&this.zoomService.zoomOff()}onMouseMove(t){this.zoomService.zoomingEnabled&&!this.zoomFrozen&&this.zoomService.calculateZoomPosition(t)}onMouseWheel(){return!this.zoomFrozen}},ae=class{constructor(t){this.zoomService=t}onClick(t){this.zoomService.zoomingEnabled?this.zoomService.zoomOff():this.zoomService.zoomOn(t)}onMouseEnter(){}onMouseLeave(){}onMouseMove(){}onMouseWheel(){return!0}},Qe=(()=>{class i{constructor(e,o){this.zoomService=e,this.renderer=o,this.zoomScroll=new I,this.zoomPosition=new I,this.imagesLoaded=new I,this.lensBorderRadius=0,this.zoomMode="hover",this.enableScrollZoom=!1,this.scrollStepSize=.1,this.circularLens=!1,this.thumbImageLoaded=!1,this.subscriptions=[],this.eventListeners=[],this.zoomModesMap=new Map([["click",ee],["hover-freeze",te],["hover",ie],["toggle-click",oe],["toggle-freeze",ne],["toggle",ae]]),this.altText="",this.titleText=""}set setThumbImage(e){this.thumbImageLoaded=!1,this.setIsReady(!1),this.thumbImage=e}set setFullImage(e){this.zoomService.fullImageLoaded=!1,this.setIsReady(!1),this.fullImage=e}set setZoomMode(e){i.validZoomModes.some(o=>o===e)&&(this.zoomMode=e)}set setMagnification(e){this.zoomService.magnification=Number(e)||this.zoomService.magnification,this.zoomScroll.emit(this.zoomService.magnification)}set setMinZoomRatio(e){let o=Number(e)||this.zoomService.minZoomRatio||this.zoomService.baseRatio||0;this.zoomService.minZoomRatio=Math.max(o,this.zoomService.baseRatio||0)}set setMaxZoomRatio(e){this.zoomService.maxZoomRatio=Number(e)||this.zoomService.maxZoomRatio}set setScrollStepSize(e){this.scrollStepSize=Number(e)||this.scrollStepSize}set setEnableLens(e){this.zoomService.enableLens=!!e}set setLensWidth(e){this.zoomService.lensWidth=Number(e)||this.zoomService.lensWidth}set setLensHeight(e){this.zoomService.lensHeight=Number(e)||this.zoomService.lensHeight}set setCircularLens(e){this.circularLens=!!e}set setEnableScrollZoom(e){this.enableScrollZoom=!!e}ngOnInit(){this.fullImage===void 0&&(this.fullImage=this.thumbImage),this.registerServiceSubscriptions(),this.loadZoomMode(),this.registerEventListeners(),this.calculateLensBorder()}ngOnChanges(){this.calculateLensBorder(),this.zoomService.calculateRatioAndOffset(),this.zoomService.calculateImageAndLensPosition()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.eventListeners.forEach(e=>e())}registerServiceSubscriptions(){this.subscriptions.push(this.zoomService.zoomPosition.subscribe(e=>this.zoomPosition.emit(e)))}loadZoomMode(){let e=this.zoomModesMap.get(this.zoomMode);e?this.zoomInstance=new e(this.zoomService):console.error(`Unsupported zoom mode: ${this.zoomMode}`)}registerEventListeners(){if(this.zoomInstance){let e=this.zoomContainer.nativeElement;this.eventListeners.push(this.renderer.listen(e,"mouseenter",o=>this.zoomInstance.onMouseEnter(o)),this.renderer.listen(e,"mouseleave",o=>this.zoomInstance.onMouseLeave(o)),this.renderer.listen(e,"mousemove",o=>this.zoomInstance.onMouseMove(o)),this.renderer.listen(e,"click",o=>this.zoomInstance.onClick(o)),this.renderer.listen(e,"mousewheel",o=>{this.zoomInstance.onMouseWheel(o)&&this.onMouseWheel(o)}),this.renderer.listen(e,"DOMMouseScroll",o=>{this.zoomInstance.onMouseWheel(o)&&this.onMouseWheel(o)}),this.renderer.listen(e,"onmousewheel",o=>{this.zoomInstance.onMouseWheel(o)&&this.onMouseWheel(o)}))}}onThumbImageLoaded(){this.zoomService.thumbWidth=this.imageThumbnail.nativeElement.width,this.zoomService.thumbHeight=this.imageThumbnail.nativeElement.height,this.thumbImageLoaded=!0,this.checkImagesLoaded()}onFullImageLoaded(){this.zoomService.fullWidth=this.fullSizeImage.nativeElement.naturalWidth,this.zoomService.fullHeight=this.fullSizeImage.nativeElement.naturalHeight,this.zoomService.fullImageLoaded=!0,this.checkImagesLoaded()}calculateLensBorder(){this.zoomService.enableLens&&(this.circularLens?this.lensBorderRadius=this.zoomService.lensWidth/2:this.lensBorderRadius=0)}checkImagesLoaded(){this.zoomService.calculateRatioAndOffset(),this.thumbImageLoaded&&this.zoomService.fullImageLoaded&&(this.zoomService.calculateImageAndLensPosition(),this.setIsReady(!0))}setIsReady(e){this.zoomService.isReady=e,this.imagesLoaded.emit(e)}onMouseWheel(e){if(!this.enableScrollZoom||!this.zoomService.zoomingEnabled)return;e=window.event||e,Math.max(Math.min(e.wheelDelta||-e.detail,1),-1)>0?this.setMagnification=Math.min(this.zoomService.magnification+this.scrollStepSize,this.zoomService.maxZoomRatio):this.setMagnification=Math.max(this.zoomService.magnification-this.scrollStepSize,this.zoomService.minZoomRatio),this.zoomService.calculateRatio(),this.zoomService.calculateZoomPosition(e),e.returnValue=!1,e.preventDefault&&e.preventDefault()}}return i.validZoomModes=["hover","toggle","click","toggle-click","toggle-freeze","hover-freeze"],i.\u0275fac=function(e){return new(e||i)($(Ge),$(de))},i.\u0275cmp=k({type:i,selectors:[["lib-ngx-image-zoom"]],viewQuery:function(e,o){if(e&1&&(Z(rt,7),Z(st,7),Z(lt,7)),e&2){let r;O(r=W())&&(o.zoomContainer=r.first),O(r=W())&&(o.imageThumbnail=r.first),O(r=W())&&(o.fullSizeImage=r.first)}},inputs:{setThumbImage:[0,"thumbImage","setThumbImage"],setFullImage:[0,"fullImage","setFullImage"],setZoomMode:[0,"zoomMode","setZoomMode"],setMagnification:[0,"magnification","setMagnification"],setMinZoomRatio:[0,"minZoomRatio","setMinZoomRatio"],setMaxZoomRatio:[0,"maxZoomRatio","setMaxZoomRatio"],setScrollStepSize:[0,"scrollStepSize","setScrollStepSize"],setEnableLens:[0,"enableLens","setEnableLens"],setLensWidth:[0,"lensWidth","setLensWidth"],setLensHeight:[0,"lensHeight","setLensHeight"],setCircularLens:[0,"circularLens","setCircularLens"],setEnableScrollZoom:[0,"enableScrollZoom","setEnableScrollZoom"],altText:"altText",titleText:"titleText"},outputs:{zoomScroll:"zoomScroll",zoomPosition:"zoomPosition",imagesLoaded:"imagesLoaded"},standalone:!1,features:[fe([Ge]),me],decls:7,vars:35,consts:[["zoomContainer",""],["imageThumbnail",""],["fullSizeImage",""],[1,"ngxImageZoomContainer"],[1,"ngxImageZoomThumbnail",3,"load","alt","title","src"],[3,"ngClass"],[1,"ngxImageZoomFull",3,"load","alt","title","src"]],template:function(e,o){if(e&1){let r=x();n(0,"div",3,0)(2,"img",4,1),p("load",function(){return d(r),u(o.onThumbImageLoaded())}),a(),n(4,"div",5)(5,"img",6,2),p("load",function(){return d(r),u(o.onFullImageLoaded())}),a()()()}e&2&&(A("width",o.zoomService.thumbWidth,"px")("height",o.zoomService.thumbHeight,"px"),s(2),h("alt",o.altText)("title",o.titleText)("src",o.thumbImage,L),s(2),A("display",o.zoomService.zoomDisplay)("top",o.zoomService.lensTop,"px")("left",o.zoomService.lensLeft,"px")("width",o.zoomService.lensWidth,"px")("height",o.zoomService.lensHeight,"px")("border-radius",o.lensBorderRadius,"px"),h("ngClass",xe(33,ct,o.zoomService.enableLens)),s(),A("display",o.zoomService.zoomDisplay)("top",o.zoomService.fullImageTop,"px")("left",o.zoomService.fullImageLeft,"px")("width",o.zoomService.magnifiedWidth,"px")("height",o.zoomService.magnifiedHeight,"px"),h("alt",o.altText)("title",o.titleText)("src",o.fullImage,L))},dependencies:[Se],styles:[".ngxImageZoomContainer[_ngcontent-%COMP%]{position:relative;margin:auto;overflow:hidden;pointer-events:none}.ngxImageZoomThumbnail[_ngcontent-%COMP%]{pointer-events:all}.ngxImageZoomFull[_ngcontent-%COMP%]{position:absolute;max-width:none;max-height:none;display:none;pointer-events:none}.ngxImageZoomFullContainer[_ngcontent-%COMP%]{position:absolute;overflow:hidden;pointer-events:none}.ngxImageZoomFullContainer.ngxImageZoomLensEnabled[_ngcontent-%COMP%]{border:2px solid red;cursor:crosshair;pointer-events:none}"]}),i})(),Ue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=ue({type:i}),i.\u0275inj=le({imports:[C]}),i})();var re=(i,t)=>t.id;function dt(i,t){if(i&1&&(n(0,"div",4)(1,"div",33)(2,"div",34)(3,"h2",35),l(4),n(5,"span",36),l(6,"VS"),a(),l(7),a()(),n(8,"div",37)(9,"p",38),_(),n(10,"svg",39),m(11,"path",40)(12,"path",41),a(),l(13),a(),w(),n(14,"p",42),l(15),M(16,"date"),a()()()()),i&2){let e=c(2);s(4),v(" ",e.event.awayTeamName," "),s(3),v(" ",e.event.homeTeamName," "),s(6),v(" ",e.event.stadiumName," "),s(2),v(" ",ve(16,4,e.event.date,"fullDate")," ")}}function ut(i,t){i&1&&m(0,"div",5)}function pt(i,t){if(i&1){let e=x();n(0,"lib-ngx-image-zoom",43),p("click",function(){d(e);let r=c(2);return u(r.openStadiumMap())}),a()}if(i&2){let e=c(2);h("thumbImage",e.event.pictureMap.url)("fullImage",e.event.pictureMap.url)("magnification",1.5)("enableLens",!0)("lensHeight",180)("lensWidth",180)("circularLens",!0)}}function ht(i,t){if(i&1){let e=x();n(0,"div",44),p("click",function(){d(e);let r=c(2);return u(r.openStadiumMap())}),n(1,"button",45),p("click",function(){d(e);let r=c(2);return u(r.openStadiumMap())}),_(),n(2,"svg",46),m(3,"path",47),a()(),w(),n(4,"div",48),p("click",function(r){return d(e),u(r.stopPropagation())}),m(5,"img",49),a()()}if(i&2){let e=c(2);s(5),h("src",e.event.pictureMap.url,L)}}function gt(i,t){if(i&1&&(n(0,"option",26),l(1),M(2,"currency"),a()),i&2){let e=t.$implicit;h("value",e.id),s(),J(" ",e.sectorName," \u2014 ",P(2,3,e.price)," ")}}function ft(i,t){if(i&1&&(n(0,"option",53),l(1),a()),i&2){let e=t.$implicit,o=c(3);h("ngValue",e)("disabled",o.isAlreadySelected(e.id)),s(),v(" Seat ",e.name," ")}}function xt(i,t){if(i&1){let e=x();n(0,"span",55),l(1),n(2,"button",56),p("click",function(){let r=d(e).$implicit,b=c(3);return u(b.addSeats(r))}),_(),n(3,"svg",57),m(4,"path",58),a()()()}if(i&2){let e=t.$implicit;s(),v(" Seat ",e.name," ")}}function vt(i,t){if(i&1){let e=x();n(0,"div",27)(1,"label",50),l(2),a(),n(3,"select",51,0),p("change",function(){d(e);let r=ge(4),b=c(2);return b.addSeats(b.availableSeats[r.selectedIndex-1]),u(r.value="")}),n(5,"option",52),l(6),a(),T(7,ft,2,3,"option",53,re),a(),n(9,"div",54),T(10,xt,5,1,"span",55,re),a()()}if(i&2){let e=c(2);s(2),J(" Select seats (",e.selectedSeats.length,"/",e.ticketAmount,") "),s(),h("disabled",e.selectedSeats.length>=e.ticketAmount),s(3),v(" ",e.selectedSeats.length>=e.ticketAmount?"Limit reached":"Click to add a seat..."," "),s(),E(e.availableSeats),s(3),E(e.selectedSeats)}}function bt(i,t){if(i&1){let e=x();n(0,"div",2),g(1,dt,17,7,"div",4)(2,ut,1,0,"div",5),n(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"span",10),l(8," Stadium Map "),a()(),n(9,"div",11)(10,"button",12),p("click",function(){d(e);let r=c();return u(r.openStadiumMap())}),_(),n(11,"svg",13),m(12,"path",14),a()()(),g(13,pt,1,7,"lib-ngx-image-zoom",15),a()(),g(14,ht,6,1,"div",16),w(),n(15,"div",17)(16,"div",18)(17,"h3",19),m(18,"span",20),l(19," Ticket Selection "),a(),n(20,"div",21)(21,"label",22),l(22,"Ticket Amount"),a(),n(23,"input",23),K("ngModelChange",function(r){d(e);let b=c();return Y(b.ticketAmount,r)||(b.ticketAmount=r),u(r)}),p("change",function(){d(e);let r=c();return u(r.onTicketAmountChange())}),a()(),n(24,"div",21)(25,"label",22),l(26,"Choose Sector"),a(),n(27,"select",24),K("ngModelChange",function(r){d(e);let b=c();return Y(b.selectedSectorId,r)||(b.selectedSectorId=r),u(r)}),p("change",function(){d(e);let r=c();return u(r.onSectorChange())}),n(28,"option",25),l(29,"Select a sector..."),a(),T(30,gt,3,5,"option",26,re),a()(),g(32,vt,12,4,"div",27),n(33,"div",28)(34,"div",29)(35,"span",30),l(36,"Estimated Total"),a(),n(37,"span",31),l(38),M(39,"currency"),a()(),n(40,"button",32),p("click",function(){d(e);let r=c();return u(r.confirm=!0)}),l(41," Proceed to Payment "),a()()()()()()}if(i&2){let e=c();s(),f(e.event?1:2),s(12),f(e.event.pictureMap.url?13:-1),s(),f(e.isPictureOpen?14:-1),s(9),X("ngModel",e.ticketAmount),s(4),X("ngModel",e.selectedSectorId),s(),h("value",0),s(2),E(e.availableSectors),s(2),f(e.selectedSectorId!==0?32:-1),s(6),R(P(39,15,e.totalPrice)),s(2),z("opacity-50",e.selectedSectorId===0||e.selectedSeats.length!==e.ticketAmount)("cursor-not-allowed",e.selectedSectorId===0||e.selectedSeats.length!==e.ticketAmount)("grayscale",e.selectedSectorId===0||e.selectedSeats.length!==e.ticketAmount),h("disabled",e.selectedSectorId===0||e.selectedSeats.length!==e.ticketAmount)}}function St(i,t){if(i&1){let e=x();n(0,"div",2)(1,"app-ticket-purchase",59),p("goBack",function(){d(e);let r=c();return u(r.confirm=!1)}),a()()}if(i&2){let e=c();s(),h("event",e.event)("eventManagerId",e.selectedSectorId)("tickets",e.ticketAmount)("seats",e.selectedSeats)("totalPrice",e.totalPrice)}}function _t(i,t){if(i&1){let e=x();n(0,"app-error-modal",60),p("cancel",function(){d(e);let r=c();return u(r.error=!1)}),a()}if(i&2){let e=c();h("title",e.errorMessage)}}var $e=class i{eventService=S(De);route=S(Ce);backgroundColorService=S(ze);matchId;event;availableSectors=[];availableSeats=[];selectedSectorId=0;ticketAmount;selectedSeats=[];error=!1;success=!1;confirm=!1;errorMessage="";successMessage="";totalPrice=0;isPictureOpen=!1;ngOnInit(){this.route.queryParams.subscribe(t=>{this.matchId=+t.matchId,this.matchId&&this.loadEventInfo()})}loadEventInfo(){this.eventService.getEventByMatchId(this.matchId).subscribe({next:t=>{this.event=t,this.loadAvailableSectors()},error:t=>{this.error=!0,this.errorMessage="An error occur while loading the event"}})}loadAvailableSectors(){this.eventService.getAvailableSectors(this.event?.id).subscribe({next:t=>{this.availableSectors=t.content},error:t=>{this.error=!0,this.errorMessage="An error occur while loading the sectors"}})}loadAvailableSeats(){this.eventService.getAvailableSeats(this.event?.id,this.selectedSectorId).subscribe({next:t=>{this.availableSeats=t.content},error:t=>{this.error=!0,this.errorMessage="An error occur while loading the seats"}})}onTicketAmountChange(){this.selectedSeats=[],this.selectedSectorId=Number(this.selectedSectorId),this.totalPrice=this.calculateTotalPrice()}onSectorChange(){this.selectedSectorId=Number(this.selectedSectorId),this.totalPrice=this.calculateTotalPrice(),this.selectedSeats=[],this.selectedSectorId!==0?this.loadAvailableSeats():this.availableSeats=[]}calculateTotalPrice(){if(!this.ticketAmount||!this.selectedSectorId||this.selectedSectorId===0)return 0;let t=this.availableSectors.find(e=>e.id===this.selectedSectorId);return t?t.price*this.ticketAmount:0}addSeats(t){let e=this.selectedSeats.findIndex(o=>o.id===t.id);e!==-1?this.selectedSeats.splice(e,1):this.selectedSeats.length<this.ticketAmount&&this.selectedSeats.push(t)}isAlreadySelected(t){return this.selectedSeats.some(e=>e.id===t)}openStadiumMap(){this.isPictureOpen=!this.isPictureOpen}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=k({type:i,selectors:[["app-ticket-selection"]],decls:4,vars:2,consts:[["seatSelect",""],[1,"min-h-screen","app-background","p-4","md:p-8","animate-fadeIn"],[1,"animate-fadeIn"],[3,"title"],[1,"max-w-7xl","mx-auto","mb-8","bg-white/80","dark:bg-gray-800/80","backdrop-blur-md","rounded-3xl","p-6","shadow-xl","border","border-white/20","animate-fadeInUpSmooth"],[1,"max-w-7xl","mx-auto","mb-8","animate-pulse","bg-gray-200","dark:bg-gray-700","h-24","rounded-3xl"],[1,"max-w-7xl","mx-auto","grid","grid-cols-1","lg:grid-cols-12","gap-8"],[1,"lg:col-span-7","xl:col-span-8","group"],[1,"relative","rounded-3xl","overflow-hidden","shadow-lg","bg-white","dark:bg-gray-400","border","border-gray-200","dark:border-gray-700","p-6","h-[380px]","lg:h-[420px]","transition-all","duration-500","hover:shadow-2xl"],[1,"absolute","top-4","left-4","z-10"],[1,"bg-indigo-600","text-white","text-xs","font-bold","px-3","py-1","rounded-full","uppercase","tracking-widest","shadow-lg"],[1,"absolute","top-4","right-4","z-10","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],[1,"bg-indigo-600","hover:bg-indigo-700","backdrop-blur-md","p-2","rounded-xl","transition-all","border","border-white/30","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"],[1,"w-full","h-full","group-hover:scale-105","cursor-zoom-in",3,"thumbImage","fullImage","magnification","enableLens","lensHeight","lensWidth","circularLens"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/70","backdrop-blur-md","animate-fadeIn","p-4","md:p-10"],[1,"lg:col-span-5","xl:col-span-4","space-y-6"],[1,"bg-white","dark:bg-gray-800","rounded-3xl","p-8","shadow-2xl","border","border-gray-100","dark:border-gray-700","relative","overflow-hidden"],[1,"text-2xl","font-bold","text-gray-800","dark:text-white","mb-8","flex","items-center","gap-3"],[1,"w-2","h-8","bg-indigo-600","rounded-full"],[1,"mb-6"],[1,"block","text-sm","font-semibold","text-gray-600","dark:text-gray-400","mb-2","ml-1","uppercase","tracking-wider"],["type","number","min","1","max","10","placeholder","Tickets amount",1,"text-inputs","w-full",3,"ngModelChange","change","ngModel"],[1,"text-inputs","w-full","appearance-none",3,"ngModelChange","change","ngModel"],["disabled","",3,"value"],[3,"value"],[1,"mb-10","animate-fadeIn"],[1,"pt-6","border-t","border-gray-100"],[1,"flex","justify-between","items-end","mb-6"],[1,"text-gray-500","text-xs","font-bold","uppercase","tracking-widest"],[1,"text-4xl","font-black","text-indigo-600"],[1,"app-button","w-full","py-4","uppercase","font-black","tracking-widest","transition-all","duration-300",3,"click","disabled"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-6"],[1,"text-3xl","md:text-4xl","font-black","text-gray-800","dark:text-white","tracking-tight"],[1,"text-indigo-500","mx-2","text-2xl","font-light"],[1,"text-center","md:text-right"],[1,"text-lg","font-bold","text-indigo-600","dark:text-sky-400","flex","items-center","justify-center","md:justify-end","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-gray-500","dark:text-gray-400","font-medium","tracking-wide","italic"],[1,"w-full","h-full","group-hover:scale-105","cursor-zoom-in",3,"click","thumbImage","fullImage","magnification","enableLens","lensHeight","lensWidth","circularLens"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/70","backdrop-blur-md","animate-fadeIn","p-4","md:p-10",3,"click"],[1,"absolute","top-6","right-6","text-black","hover:scale-110","transition-all","p-2","z-[110]","bg-white/80","rounded-full","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-8","w-8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"bg-white","p-2","md:p-4","rounded-2xl","shadow-2xl","max-w-5xl","max-h-[90vh]","flex","items-center","justify-center","animate-zoomIn",3,"click"],[1,"max-w-full","max-h-[80vh]","object-contain","rounded-lg",3,"src"],[1,"block","text-sm","font-semibold","text-gray-600","dark:text-gray-400","mb-3","ml-1","uppercase","tracking-wider"],[1,"text-inputs","w-full","mb-4",3,"change","disabled"],["value","","disabled","","selected",""],[3,"ngValue","disabled"],[1,"flex","flex-wrap","gap-2","min-h-[48px]","p-2","bg-gray-50","dark:bg-gray-900/50","rounded-2xl","border-2","border-dashed","border-gray-200"],[1,"inline-flex","items-center","gap-1.5","px-3","py-1.5","rounded-full","bg-indigo-600","text-white","text-xs","font-bold"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["d","M6 18L18 6M6 6l12 12"],[3,"goBack","event","eventManagerId","tickets","seats","totalPrice"],[3,"cancel","title"]],template:function(e,o){e&1&&(n(0,"div",1),g(1,bt,42,17,"div",2)(2,St,2,5,"div",2),g(3,_t,1,1,"app-error-modal",3),a()),e&2&&(s(),f(o.confirm?2:1),s(2),f(o.error?3:-1))},dependencies:[C,We,Ve,Re,H,Te,Le,B,Fe,Ne,ye,j,U,Ue,Qe,D,_e],styles:["[_nghost-%COMP%]     .ngxImageZoomContainer{width:fit-content!important;height:fit-content!important;margin:0 auto!important;position:relative!important;display:block!important}[_nghost-%COMP%]     .ngxImageZoomThumbnail{display:block!important;max-width:100%!important;max-height:380px!important;width:auto!important;height:auto!important}[_nghost-%COMP%]     .ngxImageZoomLens{border:2px solid rgba(255,255,255,.5)!important;box-shadow:0 0 15px #0000004d;cursor:crosshair!important}"]})};export{$e as TicketSelectionComponent};
