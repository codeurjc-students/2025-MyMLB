import{a as U}from"./chunk-AJ36ZMNF.js";import{a as j}from"./chunk-54NKNTCP.js";import{a as N}from"./chunk-4MKGYKPC.js";import{a as q,c as B,e as L,q as W}from"./chunk-Q3ATU7E6.js";import{a as O}from"./chunk-GYEUC36V.js";import{$ as o,I as a,L as b,P as I,U as v,Ua as R,W as x,_ as c,aa as i,ba as w,bb as V,ca as y,da as A,ea as T,fa as C,ga as p,ha as D,ia as d,pa as s,qa as h,ta as M,ua as P,v as m,va as S,w as f,x as g,y as k,z as E}from"./chunk-PKXEEY3P.js";var _=class r{content;confirm=new I;handleConfirm(){this.confirm.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-profile-buttons"]],inputs:{content:"content"},outputs:{confirm:"confirm"},decls:4,vars:1,consts:[[1,"relative","inline-flex","items-center","justify-center","px-6","py-3","overflow-hidden","font-medium","text-white","cursor-pointer","transition-all","duration-300","bg-gradient-to-r","from-red-500","to-rose-600","rounded-xl","shadow-lg","group","hover:from-red-600","hover:to-rose-700","hover:scale-105",3,"click"],[1,"absolute","inset-0","transition-transform","duration-300","ease-out","translate-x-full","bg-white","opacity-10","group-hover:translate-x-0"],[1,"relative","z-10","text-lg","tracking-wide"]],template:function(e,t){e&1&&(y(0,"button",0),D("click",function(){return t.handleConfirm()}),T(1,"span",1),y(2,"span",2),s(3),A()()),e&2&&(a(3),h(t.content))},encapsulation:2})};function H(r,n){if(r&1){let e=C();o(0,"app-remove-confirmation-modal",20),p("confirm",function(){f(e);let l=d();return g(l.confirm())})("cancel",function(){f(e);let l=d();return g(l.cancel())}),i()}if(r&2){let e=d();c("title",e.activeAction==="logout"?"Are you sure you want to log out?":"Are you sure you want to delete your account?")("contentMessage",e.activeAction==="logout"?"You will be signed out of your account and will need to log in again to continue.":"Your account will be deleted from the system and this is an irreversible change.")("buttonContent",e.activeAction==="logout"?"Yes, Logout":"Yes, Delete")("isDelete",e.activeAction==="delete")}}function G(r,n){if(r&1){let e=C();o(0,"app-success-modal",21),p("continue",function(){f(e);let l=d();return g(l.sucess=!1)}),i()}if(r&2){let e=d();c("message",e.successMessage)}}var Y=class r{authService=m(j);router=m(V);userService=m(U);username="";errorMessage="";activeAction=null;editRequest;emailInput="";passwordInput="";currentEmail="";sucess=!1;successMessage="";ngOnInit(){this.authService.getActiveUser().subscribe({next:n=>{this.username=n.username,this.currentEmail=n.email,this.passwordInput=n.password},error:()=>this.errorMessage="Unexpected error while retrieving the user"})}openModal(n){this.activeAction=n}cancel(){this.activeAction=null}confirm(){this.activeAction==="logout"&&this.authService.logoutUser().subscribe(()=>this.router.navigate(["/"])),this.activeAction==="delete"&&this.authService.deleteAccount().subscribe(()=>this.router.navigate(["/"])),this.activeAction=null}prepareRequest(){this.emailInput!==""&&(this.editRequest.email=this.emailInput),this.passwordInput!==""&&(this.editRequest.password=this.passwordInput)}editProfile(){this.prepareRequest(),this.userService.editProfile(this.editRequest).subscribe({next:n=>{this.sucess=!0,this.successMessage="Profile Updated!",this.currentEmail=this.editRequest.email},error:n=>this.errorMessage="Invalid format for some of the fields entered"})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-profile"]],decls:29,vars:8,consts:[[1,"min-h-screen","app-background","flex","flex-col","items-center","justify-center","gap-12","p-6"],[1,"flex","flex-col","items-center","gap-6"],[1,"relative","group"],["src","assets/account-avatar.png","alt","Profile picture",1,"w-36","h-36","rounded-full","object-cover","shadow-xl","ring-4","ring-white","dark:ring-gray-700"],[1,"absolute","bottom-2","right-2","bg-blue-600","hover:bg-blue-700","text-white","p-2","rounded-full","shadow-md","opacity-90","group-hover:opacity-100","transition"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536M9 11l6.232-6.232a2 2 0 112.828 2.828L11.828 13.828a2 2 0 01-1.414.586H7v-3a2 2 0 01.586-1.414z"],[1,"text-4xl","font-bold","text-gray-900","dark:text-gray-100","tracking-tight"],[1,"text-blue-600","dark:text-blue-400"],[1,"w-full","max-w-lg","bg-white","dark:bg-gray-800","rounded-3xl","shadow-xl","p-8","flex","flex-col","gap-8"],[1,"text-2xl","font-semibold","text-blue-600","dark:text-blue-400","text-center"],[1,"flex","flex-col","gap-2"],[1,"text-gray-700","dark:text-gray-300","font-medium"],["type","email",1,"px-4","py-3","rounded-xl","border","border-gray-300","dark:border-gray-600","bg-gray-50","dark:bg-gray-700","text-gray-900","dark:text-gray-100","placeholder:text-gray-400","dark:placeholder:text-gray-500","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition","hover:border-blue-400","dark:hover:border-blue-500",3,"ngModelChange","placeholder","ngModel"],["type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022 (new password)",1,"px-4","py-3","rounded-xl","border","border-gray-300","dark:border-gray-600","bg-gray-50","dark:bg-gray-700","text-gray-900","dark:text-gray-100","placeholder:text-gray-400","dark:placeholder:text-gray-500","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition","hover:border-blue-400","dark:hover:border-blue-500",3,"ngModelChange","ngModel"],[1,"w-full","bg-blue-600","hover:bg-blue-700","text-white","font-semibold","py-3","rounded-xl","shadow-md","transition",3,"click"],[1,"flex","flex-row","items-center","justify-center","gap-5"],[3,"confirm","content"],[3,"title","contentMessage","buttonContent","isDelete"],[3,"message"],[3,"confirm","cancel","title","contentMessage","buttonContent","isDelete"],[3,"continue","message"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),w(3,"img",3),o(4,"button",4),k(),o(5,"svg",5),w(6,"path",6),i()()(),E(),o(7,"h1",7),s(8," Welcome, "),o(9,"span",8),s(10),i()()(),o(11,"div",9)(12,"h2",10),s(13," Profile Information "),i(),o(14,"div",11)(15,"label",12),s(16,"Email"),i(),o(17,"input",13),S("ngModelChange",function(u){return P(t.emailInput,u)||(t.emailInput=u),u}),i()(),o(18,"div",11)(19,"label",12),s(20,"Password"),i(),o(21,"input",14),S("ngModelChange",function(u){return P(t.passwordInput,u)||(t.passwordInput=u),u}),i()(),o(22,"button",15),p("click",function(){return t.editProfile()}),s(23," Save Changes "),i()(),o(24,"div",16)(25,"app-profile-buttons",17),p("confirm",function(){return t.openModal("logout")}),i(),o(26,"app-profile-buttons",17),p("confirm",function(){return t.openModal("delete")}),i()(),v(27,H,1,4,"app-remove-confirmation-modal",18),v(28,G,1,1,"app-success-modal",19),i()),e&2&&(a(10),h(t.username),a(7),c("placeholder",t.currentEmail),M("ngModel",t.emailInput),a(4),M("ngModel",t.passwordInput),a(4),c("content","Logout"),a(),c("content","Delete Account"),a(),x(t.activeAction?27:-1),a(),x(t.sucess?28:-1))},dependencies:[R,W,q,B,L,N,_,O],encapsulation:2})};export{Y as ProfileComponent};
